<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Customer Single View</title>
  <!-- Tell the browser to be responsive to screen width -->
  <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
  <!-- Bootstrap 3.3.6 -->
  <link rel="stylesheet" href="../bootstrap/css/bootstrap.min.css">
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.5.0/css/font-awesome.min.css">
  <!-- Ionicons -->
  <link rel="stylesheet" href="../bootstrap/css/ionicons.min.css">
  <!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/ionicons/2.0.1/css/ionicons.min.css"> -->
  <!-- DataTables -->
  <link rel="stylesheet" href="../plugins/datatables/dataTables.bootstrap.css">
  <!-- Theme style -->
  <link rel="stylesheet" href="../dist/css/AdminLTE.min.css">
  <!-- AdminLTE Skins. Choose a skin from the css/skins
       folder instead of downloading all of them to reduce the load. -->
  <link rel="stylesheet" href="../dist/css/skins/_all-skins.min.css">
  <!-- iCheck -->
  <link rel="stylesheet" href="../plugins/iCheck/flat/blue.css">
  <!-- iCheck for checkboxes and radio inputs -->
  <link rel="stylesheet" href="../plugins/iCheck/all.css">
  <!-- Date Picker -->
  <link rel="stylesheet" href="../plugins/datepicker/datepicker3.css">
  <!-- fullCalendar 2.2.5-->
  <link rel="stylesheet" href="../plugins/fullcalendar/fullcalendar.min.css">
  <link rel="stylesheet" href="../plugins/fullcalendar/fullcalendar.print.css" media="print">
  <!-- Tree Map -->
  <link rel="stylesheet" href="../plugins/d3/tree.css"> 
  <script src="../plugins/d3/tree.js"></script>
  <!-- Echarts -->
  <script src="../plugins/echarts/echarts.js"></script>
  <!-- D3 -->
  <script src="../plugins/d3/d3.v3.min.js"></script>
  <!-- Select2 -->
  <link rel="stylesheet" href="../plugins/select2/select2.min.css">  
  <!-- jQuery Number -->
  <script src="../number/jquery.number.js"></script>

  <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 9]>
  <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
  <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
  <![endif]-->
</head>
<body class="hold-transition skin-green-light sidebar-mini">
<div class="wrapper">

  <header class="main-header" style="position:fixed;width:100%">
    <!-- Logo -->
    <a class="logo">
      <!-- mini logo for sidebar mini 50x50 pixels -->
      <span class="logo-mini">CSV</span>
      <!-- logo for regular state and mobile devices -->
      <span class="logo-lg">Customer Single View</span>
    </a>
    <!-- Header Navbar: style can be found in header.less -->
    <nav class="navbar navbar-static-top">
      <!-- Sidebar toggle button-->
      <a href="#" class="sidebar-toggle" data-toggle="offcanvas" role="button">
        <span class="sr-only">Toggle navigation</span>
      </a>

      <div class="navbar-custom-menu">
        <ul class="nav navbar-nav" style="margin-right:10px">
		  <!-- User Account: style can be found in dropdown.less -->
          <li class="dropdown user user-menu">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown">
              <span class="hidden-xs" th:text="${user.username}">UserName</span>
			  <small id="useridHidden" style="display:none;" th:text="${user.userid}"></small>
				<small id="customercodeHidden" style="display:none;" th:text="${customer_code}"></small>
            </a>
            <ul class="dropdown-menu">
              <!-- Menu Footer-->
              <li class="user-footer">
                <a class="btn bg-purple btn-flat"  href="/logout">Sign out</a>
              </li>
            </ul>
          </li>
          <!-- Control Sidebar Toggle Button -->
          <!--<li>
            <a href="#" data-toggle="control-sidebar"><i class="fa fa-gears"></i></a>
          </li>-->
        </ul>
      </div>
    </nav>
  </header>
  <!-- Left side column. contains the logo and sidebar -->
  <aside class="main-sidebar" style="position:fixed">
    <!-- sidebar: style can be found in sidebar.less -->
    <section class="sidebar">
      <!-- sidebar menu: : style can be found in sidebar.less -->
      <ul class="sidebar-menu">
        <li>
          <a data-toggle="modal" data-target="#project-enquiry">
            <i class="fa fa-th"></i> <span>Single View</span>
          </a>
        </li>		
      </ul>
    </section>
    <!-- /.sidebar -->
	
  </aside>
  
  <!-- Modal -->
	<div class="modal fade " id="project-enquiry" tabindex="-1" role="dialog" aria-labelledby="project-enquiry-label" aria-hidden="true">
		<div class="modal-dialog modal-lg">
			<div class="modal-content">
				<div class="modal-header bg-purple">
					<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
					<h4 class="modal-title" id="project-enquiry-label">Customer Enquiry</h4>
				</div>
				<div class="modal-body">
					<div class="row">
						<div class="modal-body">
							<div class="row">
								<div class="col-md-6">
									<div class="form-group">
										<label>Customer Code:</label>											
										<input class="form-control" id="cust_code">
									 </div>
								</div>
								<div class="col-md-6">
									<div class="form-group">
										<label>Customer Name:</label>
										<input class="form-control" id="cust_name">
									 </div>
								</div>
								<div class="col-md-6">
									<div class="form-group">
										<label>Account No:</label>
										<input class="form-control" id="acct_no">
									 </div>
								</div>
								<div class="col-md-6">
									<div class="form-group">
										<label>Reference No:</label>
										<input class="form-control" id="ref_no">
									</div>
								</div>
								<div class="col-md-6">
									<div class="form-group">
										<label>Identity No:</label>
										<input class="form-control" id="id_no">
									</div>
								</div>																	
								<div class="col-md-12">
								<button type="button" class="btn  bg-purple btn-block" onclick="enquiry()">Search</button>
								</div>
							</div>
						</div>
					</div>
					<table id="enquiryTable" class="table table-bordered table-hover">
						<thead>
							<tr>
								<th>Customer Code</th>
								<th>Customer Name</th>
								<th>Identity No</th>
							</tr>
						</thead>
						<tbody >
							
						</tbody>
					</table>
				</div>					
				<div class="modal-footer" >
					
				</div>
			</div>
		</div>
	</div>

  <!-- Content Wrapper. Contains page content -->
  <div class="content-wrapper">
   <!-- Content Header (Page header) -->
    <section class="content-header">
		<h1>
			Single View
			<small>
				<a data-toggle="modal" data-target="#project-enquiry">
					<i class="fa fa-search-plus"></i> <span>Enquiry</span>
				</a>
			</small>
		</h1>		
	</section>
    <section class="content-header">
		<h1>
			Single View
			<small>
				<a data-toggle="modal" data-target="#project-enquiry">
					<i class="fa fa-search-plus"></i> <span>Enquiry</span>
				</a>
			</small>
		</h1>		
    </section>	
	
	
	<!-- Main content -->
    <section class="content">
	<div class="row">	
	<!-- Custom tabs (Charts with tabs)-->
		<div>
			<div id="tabMenu" style="width:100%;background:rgba(236,240,245,1);padding:5px;top:50px;z-index:100" >
            <!-- Tabs within a box -->
            <ul class="nav nav-tabs pull-left" style="font:16px arial,sans-serif;background-color:white;">
				<li id="Portfolio-li" style="display:none;" data-id="Portfolio"><a href="#">Portfolio</a></li>
				<li id="CustomerProfile-li" style="display:none;" data-id="CustomerProfile"><a href="#">Customer profile</a></li>
				<li id="Product-li" style="display:none;" data-id="Product"><a href="#">Product</a></li>
				<li id="CreditFacility-li" style="display:none;" data-id="CreditFacility"><a href="#">Credit facility</a></li>
				<li id="Pricing-li" style="display:none;" data-id="Pricing"><a href="#">Pricing</a></li>	
				<li id="CallMemo-li" style="display:none;" data-id="CallMemo"><a href="#">Call memo</a></li>				
			</ul>
			</div>
            <div class="tab-content no-padding">
              <!-- Morris chart - Sales -->
				<div class="chart tab-pane" id="Portfolio" style="display:none;position: relative;">
					<div class="col-lg-11" style="padding:0px">
						<div class="box box-success" id="Portfolio-KPI" style="display:none;">
							<div class="box-header with-border">
								 <h5 class="box-title"></h5>
								 <div class="box-tools pull-right">
									<button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i>
									</button>
								 </div>
								  <!-- /.box-tools -->
							</div>
							<!-- /.box-header -->
							<div class="box-body">					 
								<div class="col-md-3">
								  <div class="box box-success box-solid">
									<div class="box-header with-border">
									  <h3 class="box-title">Customer Name</h3>					  
									</div>
									<!-- /.box-header -->
									<div class="box-body" name="b_CN">
									  
									</div>
									<!-- /.box-body -->
								  </div>
								  <!-- /.box -->
								</div>
								<!-- /.col -->						
								<div class="col-md-3">
								  <div class="box box-success box-solid">
									<div class="box-header with-border">
									  <h3 class="box-title">Customer Code</h3>
									  <!-- /.box-tools -->
									</div>
									<!-- /.box-header -->
									<div class="box-body" name="b_CC">
									  
									</div>
									<!-- /.box-body -->
								  </div>
								  <!-- /.box -->
								</div>
								<!-- /.col -->						
								<div class="col-md-3">
								  <div class="box box-success box-solid">
									<div class="box-header with-border">
									  <h3 class="box-title">Customer Level</h3>
									</div>
									<!-- /.box-header -->
									<div class="box-body" name="b_CL">
									  
									</div>
									<!-- /.box-body -->
								  </div>
								  <!-- /.box -->
								</div>
								<!-- /.col -->						
								<div class="col-md-3">
								  <div class="box box-success box-solid">
									<div class="box-header with-border">
									  <h3 class="box-title">Risk Rating</h3>
									</div>
									<!-- /.box-header -->
									<div class="box-body" name="b_RR">
									  
									</div>
									<!-- /.box-body -->
								  </div>
								  <!-- /.box -->
								</div>
								<!-- /.col -->						
								<div class="col-md-4">
								  <div class="box box-success box-solid">
									<div class="box-header with-border">
									  <h3 class="box-title">Assets Balance</h3>				
									</div>
									<!-- /.box-header -->
									<div class="box-body" name="b_AB">
									  
									</div>
									<!-- /.box-body -->
								  </div>
								  <!-- /.box -->
								</div>
								<!-- /.col -->						
								<div class="col-md-4">
								  <div class="box box-success box-solid">
									<div class="box-header with-border">
									  <h3 class="box-title">Liabilities Balance</h3>
									  <!-- /.box-tools -->
									</div>
									<!-- /.box-header -->
									<div class="box-body" name="b_LB">
									  
									</div>
									<!-- /.box-body -->
								  </div>
								  <!-- /.box -->
								</div>
								<!-- /.col -->						
								<div class="col-md-4">
								  <div class="box box-success box-solid">
									<div class="box-header with-border">
									  <h3 class="box-title">Line Limit</h3>
									</div>
									<!-- /.box-header -->
									<div class="box-body" name="b_LL">
									  
									</div>
									<!-- /.box-body -->
								  </div>
								  <!-- /.box -->
								</div>
								<!-- /.col -->						
							</div>
								<!-- /.box-body -->
						</div>
						<!-- /.box -->												 

						<section class="col-lg-6"  id="Portfolio-DOAP" style="display:none;">
							<div class="box box-success">
								<div class="box-header">
								  <div class="pull-right box-tools">
									<button type="button" class="btn bg-purple btn-sm pull-right" data-widget="collapse" data-toggle="tooltip" title="Collapse" style="margin-right: 5px;">
									  <i class="fa fa-minus"></i></button>
								  </div>
								  <h3 class="box-title">
									Deposit Outstanding Amount 
								  </h3>
								</div>
								<div class="box-body">
								  <small id="pieChartLocation"></small>
								  <br/><br/>
								  <!-- Pie Chart -->
								  <div id="depositBalance" style="width: 450px;height:400px;"></div>
								</div>
							</div>
						</section>	
						
						<section class="col-lg-6"  id="Portfolio-LOAB" style="display:none;">
						<div class="box box-success">
								<div class="box-header">
								  <div class="pull-right box-tools">
									<button type="button" class="btn bg-purple btn-sm pull-right" data-widget="collapse" data-toggle="tooltip" title="Collapse" style="margin-right: 5px;">
									  <i class="fa fa-minus"></i></button>
								  </div>
								  <h3 class="box-title">
									Loan Outstanding Amount
								  </h3>
								</div>
								<div class="box-body">
								  <small id="barChartLocation"></small>
								  <br/><br/>
								  <!-- Bar Chart -->
								  <div id="loanBalance" style="width: 450px;height:400px;"></div>
								</div>
							</div>
						</section>
					
						<section class="col-lg-12"  id="Portfolio-DAIT" style="display:none;">
							<div class="box box-success">
								<div class="box-header">
									<div class="pull-right box-tools">
									  <button type="button" class="btn bg-purple btn-sm pull-right" data-widget="collapse" data-toggle="tooltip" title="Collapse" style="margin-right: 5px;">
										<i class="fa fa-minus"></i></button>
											<button type="button" class="btn bg-purple btn-sm pull-right" data-toggle="modal" data-target="#project-d" style="margin-right: 5px;">
										<i class="fa fa-search-plus"></i></button>
									</div>
								  
									<!-- Modal -->
									<div class="modal fade " id="project-d" tabindex="-1" role="dialog" aria-labelledby="project-d-label" aria-hidden="true">
										<div class="modal-dialog modal-lg">
											<div class="modal-content">
												<div class="modal-header bg-purple">
													<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
													<h4 class="modal-title" id="project-d-label">Search</h4>
												</div>
												<div class="modal-body">
													<div class="row">
														<div class="col-md-6">
															<div class="form-group">
																<label>Branch:</label>
																<select id="depositBranchSelect" class="form-control select2" multiple="multiple" data-placeholder="Select States" style="width: 100%;">
																</select>
															 </div>
														</div>
														<div class="col-md-6">
															<div class="form-group">
																<label>Account No:</label>
																<input id="depositAccountNo" type="text" class="form-control">
															  </div>
															  <!-- /.form group -->
														</div>
														<div class="col-md-6">
															<div class="form-group">
																<label>Product:</label>
																<select id="depositProductSelect" class="form-control select2" multiple="multiple" data-placeholder="Select States" style="width: 100%;">
																</select>
															 </div>
														</div>
														<div class="col-md-6">
															<div class="form-group">
																<label>Currency:</label>
																<select id="depositCurrencySelect" class="form-control select2" multiple="multiple" data-placeholder="Select States" style="width: 100%;">
																</select>
															 </div>
														</div>
														<div class="col-md-6">
															<!-- Date -->
															  <div class="form-group" style="position: relative; z-index: 9999;">
																<label>Open Date:</label>
																<div class="input-group date">
																  <div class="input-group-addon">
																	<i class="fa fa-calendar"></i>
																  </div>
																  <input type="text" class="form-control pull-right" id="datepickerD1">
																</div>
																<label>To</label>
																<div class="input-group date">
																  <div class="input-group-addon">
																	<i class="fa fa-calendar"></i>
																  </div>
																  <input type="text" class="form-control pull-right" id="datepickerD2">
																</div>
																<!-- /.input group -->
															  </div>
															  <!-- /.form group -->
														</div>
														<div class="col-md-6">
															<!-- Date -->
															  <div class="form-group" style="position: relative; z-index: 9999;">
																<label>Maturity Date:</label>

																<div class="input-group date">
																  <div class="input-group-addon">
																	<i class="fa fa-calendar"></i>
																  </div>
																  <input type="text" class="form-control pull-right" id="datepickerD3">
																</div>
																<label>To</label>
																<div class="input-group date">
																  <div class="input-group-addon">
																	<i class="fa fa-calendar"></i>
																  </div>
																  <input type="text" class="form-control pull-right" id="datepickerD4">
																</div>
																<!-- /.input group -->
															  </div>
															  <!-- /.form group -->
														</div>
														<div class="col-md-6">
															<div class="form-group">
																<label>Outstanding AMT:</label>
																<div class="input-group">
																	<span class="input-group-addon">$</span>
																	<input id="depositOutstandingAmountFrom" type="text" class="form-control">
																	<span class="input-group-addon">.00</span>
																</div>
																<label>To</label>
																<div class="input-group">
																	<span class="input-group-addon">$</span>
																	<input id="depositOutstandingAmountTo" type="text" class="form-control">
																	<span class="input-group-addon">.00</span>
																</div>
															  </div>
															  <!-- /.form group -->
														</div>
														<div class="col-md-6">
															<div class="form-group">
																<label>Status:</label>												
																<select id="depositStatusSelect" class="form-control select2" multiple="multiple" data-placeholder="Select States" style="width: 100%;">
																</select>
															 </div>
														</div>
													</div>
												</div>
												<div class="modal-footer">
													<button type="button" class="btn  bg-purple" onclick="searchDepositResult()">Search</button>
													<button type="button" class="btn  bg-purple" data-dismiss="modal">Close</button>
												</div>
											</div>
										</div>
									</div>
									<!-- Modal end -->
								  
									<h3 class="box-title">
										Deposit Account Information
									</h3>
								</div>
								<div class="box-body">
								 <table id="depositInformationTable" class="table table-bordered table-striped">
									<thead>
									<tr>
									  <th>Branch</th>
									  <th>Acct No</th>
									  <th>Product</th>
									  <th>CCY</th>
									  <th>Start Date</th>
									  <th>End Date</th>
									  <th>Outstanding AMT</th>
									  <th>Status</th>
									</tr>
									</thead>
									<tbody>
									</tbody>
									<tfoot>
									<tr>
									  <th>Branch</th>
									  <th>Acct No</th>
									  <th>Product</th>
									  <th>CCY</th>
									  <th>Start Date</th>
									  <th>End Date</th>
									  <th>Outstanding AMT</th>
									  <th>Status</th>
									</tr>
									</tfoot>
								  </table>
								</div>
							</div>
						</section>
						
						<section class="col-lg-12"  id="Portfolio-LIT" style="display:none;">
							<div class="box box-success">
								<div class="box-header">
									<div class="pull-right box-tools">
									  <button type="button" class="btn bg-purple btn-sm pull-right" data-widget="collapse" data-toggle="tooltip" title="Collapse" style="margin-right: 5px;">
										<i class="fa fa-minus"></i></button>
											<button type="button" class="btn bg-purple btn-sm pull-right" data-toggle="modal" data-target="#project-l" style="margin-right: 5px;">
										<i class="fa fa-search-plus"></i></button>
									</div>
									
									<!-- Modal -->
									<div class="modal fade " id="project-l" tabindex="-1" role="dialog" aria-labelledby="project-l-label" aria-hidden="true">
										<div class="modal-dialog modal-lg">
											<div class="modal-content">
												<div class="modal-header bg-purple">
													<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
													<h4 class="modal-title" id="project-l-label">Search</h4>
												</div>
												<div class="modal-body">
													<div class="row">
														<div class="col-md-6">
															<div class="form-group">
																<label>Branch:</label>
																<select id="loanBranchSelect" class="form-control select2" multiple="multiple" data-placeholder="Select States" style="width: 100%;">
																</select>
															 </div>
														</div>
														<div class="col-md-6">
															<div class="form-group">
																<label>Account No:</label>
																<input id="loanAccountNo" type="text" class="form-control">
															  </div>
															  <!-- /.form group -->
														</div>
														<div class="col-md-6">
															<div class="form-group">
																<label>Loan Type:</label>
																<select id="loanTypeSelect" class="form-control select2" multiple="multiple" data-placeholder="Select States" style="width: 100%;">
																</select>
															 </div>
														</div>
														<div class="col-md-6">
															<div class="form-group">
																<label>Line No:</label>
																<input id="loanLineNo" type="text" class="form-control">
															  </div>
															  <!-- /.form group -->
														</div>
														<div class="col-md-6">
															<div class="form-group">
																<label>Principal Currency:</label>
																<select id="loanPrincipalCurrencySelect" class="form-control select2" multiple="multiple" data-placeholder="Select States" style="width: 100%;">
																</select>
															 </div>
														</div>
														<div class="col-md-6">
															<div class="form-group">
																<label>Principal Amount:</label>
																<div class="input-group">
																	<span class="input-group-addon">$</span>
																	<input id="loanPrincipalAmountFrom" type="text" class="form-control">
																	<span class="input-group-addon">.00</span>
																</div>
																<label>To</label>
																<div class="input-group">
																	<span class="input-group-addon">$</span>
																	<input id="loanPrincipalAmountTo" type="text" class="form-control">
																	<span class="input-group-addon">.00</span>
																</div>
															  </div>
															  <!-- /.form group -->
														</div>
														<div class="col-md-6">
															<!-- Date -->
															  <div class="form-group" style="position: relative; z-index: 9999;">
																<label>Value Date:</label>
																<div class="input-group date">
																  <div class="input-group-addon">
																	<i class="fa fa-calendar"></i>
																  </div>
																  <input type="text" class="form-control pull-right" id="datepickerL1">
																</div>
																<label>To</label>
																<div class="input-group date">
																  <div class="input-group-addon">
																	<i class="fa fa-calendar"></i>
																  </div>
																  <input type="text" class="form-control pull-right" id="datepickerL2">
																</div>
																<!-- /.input group -->
															  </div>
															  <!-- /.form group -->
														</div>
														<div class="col-md-6">
															<!-- Date -->
															  <div class="form-group" style="position: relative; z-index: 9999;">
																<label>Maturity Date:</label>

																<div class="input-group date">
																  <div class="input-group-addon">
																	<i class="fa fa-calendar"></i>
																  </div>
																  <input type="text" class="form-control pull-right" id="datepickerL3">
																</div>
																<label>To</label>
																<div class="input-group date">
																  <div class="input-group-addon">
																	<i class="fa fa-calendar"></i>
																  </div>
																  <input type="text" class="form-control pull-right" id="datepickerL4">
																</div>
																<!-- /.input group -->
															  </div>
															  <!-- /.form group -->
														</div>
														<div class="col-md-6">
															<div class="form-group">
																<label>Balance Currency:</label>
																<select id="loanBalanceCurrencySelect" class="form-control select2" multiple="multiple" data-placeholder="Select States" style="width: 100%;">
																</select>
															 </div>
														</div>
														<div class="col-md-6">
															<div class="form-group">
																<label>Balance:</label>
																<div class="input-group">
																	<span class="input-group-addon">$</span>
																	<input id="loanBalanceFrom" type="text" class="form-control">
																	<span class="input-group-addon">.00</span>
																</div>
																<label>To</label>
																<div class="input-group">
																	<span class="input-group-addon">$</span>
																	<input id="loanBalanceTo" type="text" class="form-control">
																	<span class="input-group-addon">.00</span>
																</div>
															  </div>
															  <!-- /.form group -->
														</div>
														<div class="col-md-6">
															<div class="form-group">
																<label>Account Status:</label>
																<select id="loanStatusSelect" class="form-control select2" multiple="multiple" data-placeholder="Select States" style="width: 100%;">
																</select>
															 </div>
														</div>
													</div>
												</div>
												<div class="modal-footer">
													<button type="button" class="btn  bg-purple" onclick="searchLoanResult()">Search</button>
													<button type="button" class="btn  bg-purple" data-dismiss="modal">Close</button>
												</div>
											</div>
										</div>
									</div>
									<!-- Modal end -->
									
									<h3 class="box-title">
										Loan Information
									</h3>
								</div>
								<div class="box-body">
								 <table id="loanInformationTable" class="table table-bordered table-striped">
									<thead>
									<tr>
									  <th>Branch</th>
									  <th>Loan Acct No</th>
									  <th>Loan Type</th>
									  <th>Line No</th>									  
									  <th>Principal Currency</th>
									  <th>Principal Amount</th>									  
									  <th>Value Date</th>
									  <th>Maturity Date</th>
									  <th>Balance Currency</th>	 									  
									  <th>Balance</th>
									  <th>Account Status</th>
									</tr>
									</thead>
									<tbody>
									</tbody>
									<tfoot>
									<tr>
									  <th>Branch</th>
									  <th>Loan Acct No</th>
									  <th>Loan Type</th>
									  <th>Line No</th>									  
									  <th>Principal Currency</th>
									  <th>Principal Amount</th>									  
									  <th>Value Date</th>
									  <th>Maturity Date</th>
									  <th>Balance Currency</th>	 									  
									  <th>Balance</th>
									  <th>Account Status</th>
									</tr>
									</tfoot>
								  </table>
								</div>
							</div>
						</section>
					</div>
					<div class="col-lg-1" style="padding:8px;position:fixed;right:-12px">
						<ul class="nav nav-tabs" style="font:14px arial,sans-serif;background:#e9efef;">
						<li class="nav-header" style="border-bottom:solid 2px #ddd;width:100%;text-align:center">
						  <h4>Navigation</h4>
						</li>
						<li style="border-bottom:solid 2px #ddd;width:100%">
						<a href="#">Top</a>
						</li>
						<li style="display:none;border-bottom:solid 2px #ddd;width:100%" id="Navigation-Portfolio-DOAP">
						<a href="#Portfolio-DOAP">Deposit Outstanding Amount</a>
						</li>
						<li style="display:none;border-bottom:solid 2px #ddd;width:100%" id="Navigation-Portfolio-LOAB">
						<a href="#Portfolio-LOAB">Loan Outstanding Amount</a>
						</li>
						<li style="display:none;border-bottom:solid 2px #ddd;width:100%" id="Navigation-Portfolio-DAIT">
						<a href="#Portfolio-DAIT">Deposit Account Information</a>
						</li>
						<li style="display:none;border-bottom:solid 2px #ddd;width:100%" id="Navigation-Portfolio-LIT">
						<a href="#Portfolio-LIT">Loan Information</a>
						</li>
						</ul>
					</div>
				</div>
				<div class="chart tab-pane" id="CustomerProfile" style="display:none;position: relative;">
					<div class="col-lg-11" style="padding:0px">
						<div class="box box-success" id="CustomerProfile-KPI" style="display:none;">
							<div class="box-header with-border">
								 <h5 class="box-title"></h5>
								 <div class="box-tools pull-right">
									<button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i>
									</button>
								 </div>
								  <!-- /.box-tools -->
							</div>
							<!-- /.box-header -->
							<div class="box-body">					 
								<div class="col-md-3">
								  <div class="box box-success box-solid">
									<div class="box-header with-border">
									  <h3 class="box-title">Customer Name</h3>					  
									</div>
									<!-- /.box-header -->
									<div class="box-body" name="b_CN">
									  
									</div>
									<!-- /.box-body -->
								  </div>
								  <!-- /.box -->
								</div>
								<!-- /.col -->						
								<div class="col-md-3">
								  <div class="box box-success box-solid">
									<div class="box-header with-border">
									  <h3 class="box-title">Customer Code</h3>
									  <!-- /.box-tools -->
									</div>
									<!-- /.box-header -->
									<div class="box-body" name="b_CC">
									  
									</div>
									<!-- /.box-body -->
								  </div>
								  <!-- /.box -->
								</div>
								<!-- /.col -->						
								<div class="col-md-3">
								  <div class="box box-success box-solid">
									<div class="box-header with-border">
									  <h3 class="box-title">Customer Level</h3>
									</div>
									<!-- /.box-header -->
									<div class="box-body" name="b_CL">
									  
									</div>
									<!-- /.box-body -->
								  </div>
								  <!-- /.box -->
								</div>
								<!-- /.col -->						
								<div class="col-md-3">
								  <div class="box box-success box-solid">
									<div class="box-header with-border">
									  <h3 class="box-title">Risk Rating</h3>
									</div>
									<!-- /.box-header -->
									<div class="box-body" name="b_RR">
									  
									</div>
									<!-- /.box-body -->
								  </div>
								  <!-- /.box -->
								</div>
								<!-- /.col -->						
								<div class="col-md-4">
								  <div class="box box-success box-solid">
									<div class="box-header with-border">
									  <h3 class="box-title">Assets Balance</h3>				
									</div>
									<!-- /.box-header -->
									<div class="box-body" name="b_AB">
									  
									</div>
									<!-- /.box-body -->
								  </div>
								  <!-- /.box -->
								</div>
								<!-- /.col -->						
								<div class="col-md-4">
								  <div class="box box-success box-solid">
									<div class="box-header with-border">
									  <h3 class="box-title">Liabilities Balance</h3>
									  <!-- /.box-tools -->
									</div>
									<!-- /.box-header -->
									<div class="box-body" name="b_LB">

									</div>
									<!-- /.box-body -->
								  </div>
								  <!-- /.box -->
								</div>
								<!-- /.col -->						
								<div class="col-md-4">
								  <div class="box box-success box-solid">
									<div class="box-header with-border">
									  <h3 class="box-title">Line Limit</h3>
									</div>
									<!-- /.box-header -->
									<div class="box-body number" name="b_LL">
									</div>
									<!-- /.box-body -->
								  </div>
								  <!-- /.box -->
								</div>
								<!-- /.col -->						
							</div>
								<!-- /.box-body -->		
						</div>
						<!-- /.box -->
							
						<section class="col-lg-12" id="CustomerProfile-BID" style="display:none;">
						<div class="box box-success">
							<div class="box-header">
							  <div class="pull-right box-tools">
								<button type="button" class="btn bg-purple btn-sm pull-right" data-widget="collapse" data-toggle="tooltip" title="Collapse" style="margin-right: 5px;">
								  <i class="fa fa-minus"></i></button>
							  </div>
							  <h3 class="box-title">
								Basic Information
							  </h3>
							</div>
							<div class="box-body">
							  <div class="table-responsive">
								<table class="table" id="basicInformationDisplay">
								  <tbody>
								  <tr>
									<th style="width:50%;color:#00CCCC">Branch</th>
									<td></td>
								  </tr>
								  <tr>
									<th style="width:50%;color:#00CCCC">Customer Code</th>
									<td></td>
								  </tr>
								  <tr>
									<th style="width:50%;color:#00CCCC">Customer Full Name</th>
									<td></td>
								  </tr>
								  <tr>
									<th style="width:50%;color:#00CCCC">Customer Short Name</th>
									<td></td>
								  </tr>
								  <tr>
									<th style="width:50%;color:#00CCCC">Identity No</th>
									<td></td>
								  </tr>
								  <tr>
									<th style="width:50%;color:#00CCCC">Customer Status</th>
									<td></td>
								  </tr>
								  <tr>
									<th style="width:50%;color:#00CCCC">Close Date</th>
									<td></td>
								  </tr>
								  <tr>
									<th style="width:50%;color:#00CCCC">Open Date</th>
									<td></td>
								  </tr>
								  <tr>
									<th style="width:50%;color:#00CCCC">Country Code</th>
									<td></td>
								  </tr>
								  <tr>
									<th style="width:50%;color:#00CCCC">Credit Rating</th>
									<td></td>
								  </tr>
								  <tr>
									<th style="width:50%;color:#00CCCC">Customer Type</th>
									<td></td>
								  </tr>
								  <tr>
									<th style="width:50%;color:#00CCCC">E-Mail</th>
									<td></td>
								  </tr>
								  <tr>
									<th style="width:50%;color:#00CCCC">Fax No</th>
									<td></td>
								  </tr>
								  <tr>
									<th style="width:50%;color:#00CCCC">Parent Customer Code</th>
									<td></td>
								  </tr>
								  <tr>
									<th style="width:50%;color:#00CCCC">Relationship Level</th>
									<td></td>
								  </tr>
								  <tr>
									<th style="width:50%;color:#00CCCC">Strat Date</th>
									<td></td>
								  </tr>
								  <tr>
									<th style="width:50%;color:#00CCCC">Tel No</th>
									<td></td>
								  </tr>
								</tbody>
								</table>
							  </div>
							</div>
						</div>
						</section>
						
						<section class="col-lg-12" id="CustomerProfile-RRD" style="display:none;">
						<div class="box box-success">
							<div class="box-header">
							  <div class="pull-right box-tools">
								<button type="button" class="btn bg-purple btn-sm pull-right" data-widget="collapse" data-toggle="tooltip" title="Collapse" style="margin-right: 5px;">
								  <i class="fa fa-minus"></i></button>
							  </div>
							  <h3 class="box-title">
								Risk Rating
							  </h3>
							</div>
							<div class="box-body">
							  <div class="table-responsive">
								<table class="table" id="riskRatingDisplay">
								  <tbody><tr>
									<th style="width:50%;color:#00CCCC">LCY Rating</th>
									<td></td>
								  </tr>
								  <tr>
									<th style="width:50%;color:#00CCCC">FCY Rating</th>
									<td></td>
								  </tr>
								  <tr>
									<th style="width:50%;color:#00CCCC">Rating Date</th>
									<td></td>
								  </tr>
								  <tr>
									<th style="width:50%;color:#00CCCC">Rating Agency</th>
									<td></td>
								  </tr>
								</tbody></table>
							  </div>
							</div>
						</div>
						</section>
						
						<section class="col-lg-12" id="CustomerProfile-CID" style="display:none;">
						<div class="box box-success">
							<div class="box-header">
							  <div class="pull-right box-tools">
								<button type="button" class="btn bg-purple btn-sm pull-right" data-widget="collapse" data-toggle="tooltip" title="Collapse" style="margin-right: 5px;">
								  <i class="fa fa-minus"></i></button>
							  </div>
							  <h3 class="box-title">
								Company Information
							  </h3>
							</div>
							<div class="box-body">
							  <div class="table-responsive">
								<table class="table" id="companyInformationDisplay">
								  <tbody><tr>
									<th style="width:50%;color:#00CCCC">Industry Code Head Office</th>
									<td></td>
								  </tr>
								  <tr>
									<th style="width:50%;color:#00CCCC">Industry Code Regulatory</th>
									<td></td>
								  </tr>
								  <tr>
									<th style="width:50%;color:#00CCCC">Sales Vol</th>
									<td></td>
								  </tr>
								  <tr>
									<th style="width:50%;color:#00CCCC">Market Share</th>
									<td></td>
								  </tr>
								  <tr>
									<th style="width:50%;color:#00CCCC">Product Array</th>
									<td></td>
								  </tr>
								  <tr>
									<th style="width:50%;color:#00CCCC">Reputation</th>
									<td></td>
								  </tr>
								  <tr>
									<th style="width:50%;color:#00CCCC">Network</th>
									<td></td>
								  </tr>
								  <tr>
									<th style="width:50%;color:#00CCCC">Threats Challenges</th>
									<td></td>
								  </tr>
								  <tr>
									<th style="width:50%;color:#00CCCC">Success Factors</th>
									<td></td>
								  </tr>
								  <tr>
									<th style="width:50%;color:#00CCCC">Potential Gap</th>
									<td></td>
								  </tr>
								</tbody></table>
							  </div>
							</div>
						</div>
						</section>
						
						<section class="col-lg-12" id="CustomerProfile-CRD" style="display:none;">
						<div class="box box-success">
							<div class="box-header">
							  <div class="pull-right box-tools">
								<button type="button" class="btn bg-purple btn-sm pull-right" data-widget="collapse" data-toggle="tooltip" title="Collapse" style="margin-right: 5px;">
								  <i class="fa fa-minus"></i></button>
							  </div>
							  <h3 class="box-title">
								Company Registration
							  </h3>
							</div>
							<div class="box-body">
							  <div class="table-responsive">
								<table class="table" id="companyRegistrationDisplay">
								  <tbody>
								  <tr>
									<th style="width:50%;color:#00CCCC">Parent Subsidiary Type</th>
									<td></td>
								  </tr>
								  <tr>
									<th style="width:50%;color:#00CCCC">Registration Type</th>
									<td></td>
								  </tr>
								  <tr>
									<th style="width:50%;color:#00CCCC">Registration No</th>
									<td></td>
								  </tr>
								  <tr>
									<th style="width:50%;color:#00CCCC">Registration Date</th>
									<td></td>
								  </tr>
								  <tr>
									<th style="width:50%;color:#00CCCC">Business License Exp Date</th>
									<td></td>
								  </tr>
								  <tr>
									<th style="width:50%;color:#00CCCC">Org Code</th>
									<td></td>
								  </tr>
								  <tr>
									<th style="width:50%;color:#00CCCC">Legal Rep</th>
									<td></td>
								  </tr>
								  <tr>
									<th style="width:50%;color:#00CCCC">Business Area</th>
									<td></td>
								  </tr>
								  <tr>
									<th style="width:50%;color:#00CCCC">Tax No National</th>
									<td></td>
								  </tr>
								  <tr>
									<th style="width:50%;color:#00CCCC">Tax No Local</th>
									<td></td>
								  </tr>
								  <tr>
									<th style="width:50%;color:#00CCCC">Registered Capital</th>
									<td></td>
								  </tr>
								  <tr>
									<th style="width:50%;color:#00CCCC">Listed Company Status</th>
									<td></td>
								  </tr>
								  <tr>
									<th style="width:50%;color:#00CCCC">Stock Exchange</th>
									<td></td>
								  </tr>
								  <tr>
									<th style="width:50%;color:#00CCCC">Stock Ticker</th>
									<td></td>
								  </tr>
								  </tbody>
								</table>
							  </div>
							</div>
						</div>
						</section>
						
						<section class="col-lg-12" id="CustomerProfile-CGTM" style="display:none;">
							<div class="box box-success" id="customerGroupBox">
								<div class="box-header">
								  <div class="pull-right box-tools">
									<button type="button" class="btn bg-purple btn-sm pull-right" data-widget="collapse" data-toggle="tooltip" title="Collapse" style="margin-right: 5px;">
									  <i class="fa fa-minus"></i></button>
								  </div>
								  <h3 class="box-title">
									Customer Group 
								  </h3>
								</div>
								<div class="box-body">
								  <!-- Tree Structure Chart -->
								  <div id="customerGroupTreeMap"></div>
								</div>
							</div>
						</section>							

						<section class="col-lg-12" id="CustomerProfile-RPT" style="display:none;">
							<div class="box box-success">
								<div class="box-header">
									<div class="pull-right box-tools">
									  <button type="button" class="btn bg-purple btn-sm pull-right" data-widget="collapse" data-toggle="tooltip" title="Collapse" style="margin-right: 5px;">
										<i class="fa fa-minus"></i></button>
									</div>
									<h3 class="box-title">
										Related Parties
									</h3>
								</div>
								<div class="box-body">
								 <table id="relatedPartiesTable" class="table table-bordered table-striped">
									<thead>
									<tr>
									  <th>Customer Code</th>
									  <th>Related Party</th>
									  <th>Related Party Name</th>
									  <th>Relationship</th>
									  <th>Shareholding </th>									  
									</tr>
									</thead>
									<tbody>
									</tbody>
									<tfoot>
									<tr>
									  <th>Customer Code</th>
									  <th>Related Party</th>
									  <th>Related Party Name</th>
									  <th>Relationship</th>
									  <th>Shareholding </th>									  
									</tr>
									</tfoot>
								  </table>
								</div>
							</div>
						</section>
						
						<section class="col-lg-12" id="CustomerProfile-BCT" style="display:none;">
							<div class="box box-success">
								<div class="box-header">
									<div class="pull-right box-tools">
									  <button type="button" class="btn bg-purple btn-sm pull-right" data-widget="collapse" data-toggle="tooltip" title="Collapse" style="margin-right: 5px;">
										<i class="fa fa-minus"></i></button>
									</div>
									<h3 class="box-title">
										Background Check
									</h3>
								</div>
								<div class="box-body">
								 <table id="backgroundCheckTable" class="table table-bordered table-striped">
									<thead>
									<tr>
									  <th>Check Date</th>
									  <th>Check Item</th>
									  <th>Check Result</th>
									</tr>
									</thead>
									<tbody>
									</tbody>
									<tfoot>
									<tr>
									  <th>Check Date</th>
									  <th>Check Item</th>
									  <th>Check Result</th>
									</tr>
									</tfoot>
								  </table>
								</div>
							</div>
						</section>								
				    	
					</div>
					<div class="col-lg-1" style="padding:8px;position:fixed;right:-12px">
						<ul class="nav nav-tabs" style="font:14px arial,sans-serif;background:#e9efef;">
						<li class="nav-header" style="border-bottom:solid 2px #ddd;width:100%;text-align:center">
						  <h4>Navigation</h4>
						</li>
						<li style="border-bottom:solid 2px #ddd;width:100%">
						<a href="#">Top</a>
						</li>
						<li style="display:none;border-bottom:solid 2px #ddd;width:100%" id="Navigation-CustomerProfile-BID">
						<a href="#CustomerProfile-BID">Basic Information</a>
						</li>
						<li style="display:none;border-bottom:solid 2px #ddd;width:100%" id="Navigation-CustomerProfile-RRD">
						<a href="#CustomerProfile-RRD">Risk Rating</a>
						</li>
						<li style="display:none;border-bottom:solid 2px #ddd;width:100%" id="Navigation-CustomerProfile-CID">
						<a href="#CustomerProfile-CID">Company Information</a>
						</li>
						<li style="display:none;border-bottom:solid 2px #ddd;width:100%" id="Navigation-CustomerProfile-CRD">
						<a href="#CustomerProfile-CRD">Company Registration</a>
						</li>
						<li style="display:none;border-bottom:solid 2px #ddd;width:100%" id="Navigation-CustomerProfile-CGTM">
						<a href="#CustomerProfile-CGTM">Customer Group</a>
						</li>
						<li style="display:none;border-bottom:solid 2px #ddd;width:100%" id="Navigation-CustomerProfile-RPT">
						<a href="#CustomerProfile-RPT">Related Parties</a>
						</li>
						<li style="display:none;border-bottom:solid 2px #ddd;width:100%" id="Navigation-CustomerProfile-BCT">
						<a href="#CustomerProfile-BCT">Background Check</a>
						</li>
						</ul>
					</div>						
				</div>
				<div class="chart tab-pane" id="Product" style="display:none;position: relative;">
					<div class="col-lg-11" style="padding:0px">
						<div class="box box-success" id="Product-KPI" style="display:none;">
							<div class="box-header with-border">
								 <h5 class="box-title"></h5>
								 <div class="box-tools pull-right">
									<button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i>
									</button>
								 </div>
								  <!-- /.box-tools -->
							</div>
							<!-- /.box-header -->
							<div class="box-body">					 
								<div class="col-md-3">
								  <div class="box box-success box-solid">
									<div class="box-header with-border">
									  <h3 class="box-title">Customer Name</h3>					  
									</div>
									<!-- /.box-header -->
									<div class="box-body" name="b_CN">
									  
									</div>
									<!-- /.box-body -->
								  </div>
								  <!-- /.box -->
								</div>
								<!-- /.col -->						
								<div class="col-md-3">
								  <div class="box box-success box-solid">
									<div class="box-header with-border">
									  <h3 class="box-title">Customer Code</h3>
									  <!-- /.box-tools -->
									</div>
									<!-- /.box-header -->
									<div class="box-body" name="b_CC">
									  
									</div>
									<!-- /.box-body -->
								  </div>
								  <!-- /.box -->
								</div>
								<!-- /.col -->						
								<div class="col-md-3">
								  <div class="box box-success box-solid">
									<div class="box-header with-border">
									  <h3 class="box-title">Customer Level</h3>
									</div>
									<!-- /.box-header -->
									<div class="box-body" name="b_CL">
									  
									</div>
									<!-- /.box-body -->
								  </div>
								  <!-- /.box -->
								</div>
								<!-- /.col -->						
								<div class="col-md-3">
								  <div class="box box-success box-solid">
									<div class="box-header with-border">
									  <h3 class="box-title">Risk Rating</h3>
									</div>
									<!-- /.box-header -->
									<div class="box-body" name="b_RR">
									  
									</div>
									<!-- /.box-body -->
								  </div>
								  <!-- /.box -->
								</div>
								<!-- /.col -->						
								<div class="col-md-4">
								  <div class="box box-success box-solid">
									<div class="box-header with-border">
									  <h3 class="box-title">Assets Balance</h3>				
									</div>
									<!-- /.box-header -->
									<div class="box-body" name="b_AB">
									  
									</div>
									<!-- /.box-body -->
								  </div>
								  <!-- /.box -->
								</div>
								<!-- /.col -->						
								<div class="col-md-4">
								  <div class="box box-success box-solid">
									<div class="box-header with-border">
									  <h3 class="box-title">Liabilities Balance</h3>
									  <!-- /.box-tools -->
									</div>
									<!-- /.box-header -->
									<div class="box-body" name="b_LB">

									</div>
									<!-- /.box-body -->
								  </div>
								  <!-- /.box -->
								</div>
								<!-- /.col -->						
								<div class="col-md-4">
								  <div class="box box-success box-solid">
									<div class="box-header with-border">
									  <h3 class="box-title">Line Limit</h3>
									</div>
									<!-- /.box-header -->
									<div class="box-body number" name="b_LL">
									</div>
									<!-- /.box-body -->
								  </div>
								  <!-- /.box -->
								</div>
								<!-- /.col -->						
							</div>
								<!-- /.box-body -->
						</div>
						<!-- /.box -->	
						
						<section class="col-lg-12" id="Product-LB" style="display:none;">
							<div class="box box-success">
								<div class="box-header">
								  <div class="pull-right box-tools">
									<button type="button" class="btn bg-purple btn-sm pull-right" data-widget="collapse" data-toggle="tooltip" title="Collapse" style="margin-right: 5px;">
									  <i class="fa fa-minus"></i></button>
								  </div>
								  <h3 class="box-title">
									Liquidity 
								  </h3>
								</div>
								<div class="box-body">
								  <div id="liquidityRadio" class="col-md-1" style="margin-left:20px;margin-top:10px;margin-bottom:20px;">
								
								  </div>
								  <!-- Bar Chart -->
								  <div id="liquidityBar"  class="col-md-11" style="height:400px;width:800px;display:none;"></div>
								</div>
							</div>
						</section>
						
						<section class="col-lg-12" id="Product-ABT" style="display:none;">
							<div class="box box-success">
								<div class="box-header">
									<div class="pull-right box-tools">
									  <button type="button" class="btn bg-purple btn-sm pull-right" data-widget="collapse" data-toggle="tooltip" title="Collapse" style="margin-right: 5px;">
										<i class="fa fa-minus"></i></button>
											<button type="button" class="btn bg-purple btn-sm pull-right" data-toggle="modal" data-target="#project-pro_d" style="margin-right: 5px;">
										<i class="fa fa-search-plus"></i></button>
									</div>
								  
									<!-- Modal -->
									<div class="modal fade " id="project-pro_d" tabindex="-1" role="dialog" aria-labelledby="project-pro_d-label" aria-hidden="true">
										<div class="modal-dialog modal-lg">
											<div class="modal-content">
												<div class="modal-header bg-purple">
													<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
													<h4 class="modal-title" id="project-pro_d-label">Search</h4>
												</div>
												<div class="modal-body">
													<div class="row">
														<div class="col-md-6">
															<div class="form-group">
																<label>Branch:</label>
																<select id="pro_depositBranchSelect" class="form-control select2" multiple="multiple" data-placeholder="Select States" style="width: 100%;">
																</select>
															 </div>
														</div>
														<div class="col-md-6">
															<div class="form-group">
																<label>Account No:</label>
																<input id="pro_depositAccountNo" type="text" class="form-control">
															  </div>
															  <!-- /.form group -->
														</div>
														<div class="col-md-6">
															<div class="form-group">
																<label>Product:</label>
																<select id="pro_depositProductSelect" class="form-control select2" multiple="multiple" data-placeholder="Select States" style="width: 100%;">
																</select>
															 </div>
														</div>
														<div class="col-md-6">
															<div class="form-group">
																<label>Currency:</label>
																<select id="pro_depositCurrencySelect" class="form-control select2" multiple="multiple" data-placeholder="Select States" style="width: 100%;">
																</select>
															 </div>
														</div>
														<div class="col-md-6">
															<!-- Date -->
															  <div class="form-group" style="position: relative; z-index: 9999;">
																<label>Open Date:</label>
																<div class="input-group date">
																  <div class="input-group-addon">
																	<i class="fa fa-calendar"></i>
																  </div>
																  <input type="text" class="form-control pull-right" id="datepickerProD1">
																</div>
																<label>To</label>
																<div class="input-group date">
																  <div class="input-group-addon">
																	<i class="fa fa-calendar"></i>
																  </div>
																  <input type="text" class="form-control pull-right" id="datepickerProD2">
																</div>
																<!-- /.input group -->
															  </div>
															  <!-- /.form group -->
														</div>
														<div class="col-md-6">
															<!-- Date -->
															  <div class="form-group" style="position: relative; z-index: 9999;">
																<label>Maturity Date:</label>

																<div class="input-group date">
																  <div class="input-group-addon">
																	<i class="fa fa-calendar"></i>
																  </div>
																  <input type="text" class="form-control pull-right" id="datepickerProD3">
																</div>
																<label>To</label>
																<div class="input-group date">
																  <div class="input-group-addon">
																	<i class="fa fa-calendar"></i>
																  </div>
																  <input type="text" class="form-control pull-right" id="datepickerProD4">
																</div>
																<!-- /.input group -->
															  </div>
															  <!-- /.form group -->
														</div>
														<div class="col-md-6">
															<div class="form-group">
																<label>Account Balance:</label>
																<div class="input-group">
																	<span class="input-group-addon">$</span>
																	<input id="pro_depositOutstandingAmountFrom" type="text" class="form-control">
																	<span class="input-group-addon">.00</span>
																</div>
																<label>To</label>
																<div class="input-group">
																	<span class="input-group-addon">$</span>
																	<input id="pro_depositOutstandingAmountTo" type="text" class="form-control">
																	<span class="input-group-addon">.00</span>
																</div>
															  </div>
															  <!-- /.form group -->
														</div>
														<div class="col-md-6">
															<div class="form-group">
																<label>Status:</label>												
																<select id="pro_depositStatusSelect" class="form-control select2" multiple="multiple" data-placeholder="Select States" style="width: 100%;">
																</select>
															 </div>
														</div>
													</div>
												</div>
												<div class="modal-footer">
													<button type="button" class="btn  bg-purple" onclick="searchProDepositResult()">Search</button>
													<button type="button" class="btn  bg-purple" data-dismiss="modal">Close</button>
												</div>
											</div>
										</div>
									</div>
									<!-- Modal end -->
								  
									<h3 class="box-title">
										Account Balance
									</h3>
								</div>
								<div class="box-body">
								 <table id="proDepositTable" class="table table-bordered table-striped">
									<thead>
									<tr>
									  <th>Branch</th>
									  <th>Acct No</th>
									  <th>Product</th>
									  <th>CCY</th>
									  <th>Start Date</th>
									  <th>End Date</th>
									  <th>Account Balance</th>
									  <th>Status</th>
									</tr>
									</thead>
									<tbody>
									</tbody>
									<tfoot>
									<tr>
									  <th>Branch</th>
									  <th>Acct No</th>
									  <th>Product</th>
									  <th>CCY</th>
									  <th>Start Date</th>
									  <th>End Date</th>
									  <th>Account Balance</th>
									  <th>Status</th>
									</tr>
									</tfoot>
								  </table>
								</div>
							</div>
						</section>
						
						<section class="col-lg-12" id="Product-DTL" style="display:none;">
							<div class="box box-success">
								<div class="box-header">
								  <div class="pull-right box-tools">
									<button type="button" class="btn bg-purple btn-sm pull-right" data-widget="collapse" data-toggle="tooltip" title="Collapse" style="margin-right: 5px;">
									  <i class="fa fa-minus"></i></button>
								  </div>
								  <h3 class="box-title">
									Deposit Transaction
								  </h3>
								</div>
								<div class="box-body" style="padding-top:0px;">
								  <!-- Date -->
								  <div class="form-group" style="width:80%;margin-left:10%;padding-bottom:5px;">
									<h5>Date Range:</h5>								
									<div class="col-md-5 input-group date" style="float:left;">
									  <div class="input-group-addon">
										<i class="fa fa-calendar"></i>
									  </div>
									  <input type="text" class="form-control pull-right" id="datepickerProDT1">
									</div>
									<div class="col-md-1" style="text-align:center">
										<label>To</label>
									</div>
									<div class="col-md-5 input-group date" style="float:left;">
									  <div class="input-group-addon">
										<i class="fa fa-calendar"></i>
									  </div>
									  <input type="text" class="form-control pull-right" id="datepickerProDT2">
									</div>
									<div class="col-md-1 input-group-btn" >
										<button type="button" class="btn bg-purple" id="lineChartSearch">Search</button>
									</div>
									<!-- /.input group -->
								  </div>
								  <!-- /.form group -->
								  <br/>
								  <hr width="90%"/>
								  <!-- Line Chart -->
								  <div id="depositTransaction" style="width: 990px;height:500px;"></div>
								</div>
							</div>
						</section>	
						
						<section class="col-lg-12" id="Product-TDT" style="display:none;">
							<div class="box box-success">
								<div class="box-header">
									<div class="pull-right box-tools">
									  <button type="button" class="btn bg-purple btn-sm pull-right" data-widget="collapse" data-toggle="tooltip" title="Collapse" style="margin-right: 5px;">
										<i class="fa fa-minus"></i></button>
											<button type="button" class="btn bg-purple btn-sm pull-right" data-toggle="modal" data-target="#project-pro_t" style="margin-right: 5px;">
										<i class="fa fa-search-plus"></i></button>
									</div>
								  
									<!-- Modal -->
									<div class="modal fade " id="project-pro_t" tabindex="-1" role="dialog" aria-labelledby="project-pro_t-label" aria-hidden="true">
										<div class="modal-dialog modal-lg">
											<div class="modal-content">
												<div class="modal-header bg-purple">
													<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
													<h4 class="modal-title" id="project-pro_t-label">Search</h4>
												</div>
												<div class="modal-body">
													<div class="row">
														<div class="col-md-6">
															<div class="form-group">
																<label>Branch:</label>
																<select id="depositTranBranchSelect" class="form-control select2" multiple="multiple" data-placeholder="Select States" style="width: 100%;">
																</select>
															 </div>
														</div>
														<div class="col-md-6">
															<div class="form-group">
																<label>Dep Serial No:</label>
																<input id="depositTranSernoSelect" type="text" class="form-control">
															  </div>
															  <!-- /.form group -->
														</div>
														<div class="col-md-6">
															<div class="form-group">
																<label>Dr Indicator:</label>
																<select id="depositTranDrSelect" class="form-control select2" multiple="multiple" data-placeholder="Select States" style="width: 100%;">
																</select>
															 </div>
														</div>
														<div class="col-md-6">
															<div class="form-group">
																<label>Currency:</label>
																<select id="depositTranCcySelect" class="form-control select2" multiple="multiple" data-placeholder="Select States" style="width: 100%;">
																</select>
															 </div>
														</div>
														<div class="col-md-6">
															<div class="form-group">
																<label>Transaction Type:</label>
																<select id="depositTranTypeSelect" class="form-control select2" multiple="multiple" data-placeholder="Select States" style="width: 100%;">
																</select>
															 </div>
														</div>
														<div class="col-md-6">
															<div class="form-group">
																<label>Account No:</label>
																<input id="depositTranAccountNo" type="text" class="form-control">
															  </div>
															  <!-- /.form group -->
														</div>
														<div class="col-md-6">
															<!-- Date -->
															  <div class="form-group" style="position: relative; z-index: 9999;">
																<label>Transaction Date:</label>
																<div class="input-group date">
																  <div class="input-group-addon">
																	<i class="fa fa-calendar"></i>
																  </div>
																  <input type="text" class="form-control pull-right" id="datepickerProT1">
																</div>
																<label>To</label>
																<div class="input-group date">
																  <div class="input-group-addon">
																	<i class="fa fa-calendar"></i>
																  </div>
																  <input type="text" class="form-control pull-right" id="datepickerProT2">
																</div>
																<!-- /.input group -->
															  </div>
															  <!-- /.form group -->
														</div>
														
														<div class="col-md-6">
															<div class="form-group">
																<label>Transaction AMT:</label>
																<div class="input-group">
																	<span class="input-group-addon">$</span>
																	<input id="depositTranAmtFrom" type="text" class="form-control">
																	<span class="input-group-addon">.00</span>
																</div>
																<label>To</label>
																<div class="input-group">
																	<span class="input-group-addon">$</span>
																	<input id="depositTranAmtTo" type="text" class="form-control">
																	<span class="input-group-addon">.00</span>
																</div>
															  </div>
															  <!-- /.form group -->
														</div>
														
													</div>
												</div>
												<div class="modal-footer">
													<button type="button" class="btn  bg-purple" onclick="searchDepositTran()">Search</button>
													<button type="button" class="btn  bg-purple" data-dismiss="modal">Close</button>
												</div>
											</div>
										</div>
									</div>
									<!-- Modal end -->
								  
									<h3 class="box-title">
										Transaction Detail
									</h3>
								</div>
								<div class="box-body">
								 <table id="depositTranTable" class="table table-bordered table-striped">
									<thead>
									<tr>
									  <th>Branch</th>
									  <th>Dep Serial No</th>
									  <th>Transaction Date</th>
									  <th>Transaction Type</th>
									  <th>Acc No</th>
									  <th>Ccy</th>
									  <th>Dr Indicator</th>
									  <th>Amount</th>
									</tr>
									</thead>
									<tbody>
									</tbody>
									<tfoot>
									<tr>
									  <th>Branch</th>
									  <th>Dep Serial No</th>
									  <th>Transaction Date</th>
									  <th>Transaction Type</th>
									  <th>Acc No</th>
									  <th>Ccy</th>
									  <th>Dr Indicator</th>
									  <th>Amount</th>
									</tr>
									</tfoot>
								  </table>
								</div>
							</div>
						</section>						
					
						<section class="col-lg-12" id="Product-LIT2" style="display:none;">
							<div class="box box-success">
								<div class="box-header">
									<div class="pull-right box-tools">
									  <button type="button" class="btn bg-purple btn-sm pull-right" data-widget="collapse" data-toggle="tooltip" title="Collapse" style="margin-right: 5px;">
										<i class="fa fa-minus"></i></button>
											<button type="button" class="btn bg-purple btn-sm pull-right" data-toggle="modal" data-target="#project-pro_l" style="margin-right: 5px;">
										<i class="fa fa-search-plus"></i></button>
									</div>
									
									<!-- Modal -->
									<div class="modal fade " id="project-pro_l" tabindex="-1" role="dialog" aria-labelledby="project-pro_l-label" aria-hidden="true">
										<div class="modal-dialog modal-lg">
											<div class="modal-content">
												<div class="modal-header bg-purple">
													<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
													<h4 class="modal-title" id="project-pro_l-label">Search</h4>
												</div>
												<div class="modal-body">
													<div class="row">
														<div class="col-md-6">
															<div class="form-group">
																<label>Branch:</label>
																<select id="pro_loanBranchSelect" class="form-control select2" multiple="multiple" data-placeholder="Select States" style="width: 100%;">
																</select>
															 </div>
														</div>
														<div class="col-md-6">
															<div class="form-group">
																<label>Account No:</label>
																<input id="pro_loanAccountNo" type="text" class="form-control">
															  </div>
															  <!-- /.form group -->
														</div>
														<div class="col-md-6">
															<div class="form-group">
																<label>Loan Type:</label>
																<select id="pro_loanTypeSelect" class="form-control select2" multiple="multiple" data-placeholder="Select States" style="width: 100%;">
																</select>
															 </div>
														</div>
														<div class="col-md-6">
															<div class="form-group">
																<label>Line No:</label>
																<input id="pro_loanLineNo" type="text" class="form-control">
															  </div>
															  <!-- /.form group -->
														</div>
														<div class="col-md-6">
															<div class="form-group">
																<label>Principal Currency:</label>
																<select id="pro_loanPrincipalCurrencySelect" class="form-control select2" multiple="multiple" data-placeholder="Select States" style="width: 100%;">
																</select>
															 </div>
														</div>
														<div class="col-md-6">
															<div class="form-group">
																<label>Principal Amount:</label>
																<div class="input-group">
																	<span class="input-group-addon">$</span>
																	<input id="pro_loanPrincipalAmountFrom" type="text" class="form-control">
																	<span class="input-group-addon">.00</span>
																</div>
																<label>To</label>
																<div class="input-group">
																	<span class="input-group-addon">$</span>
																	<input id="pro_loanPrincipalAmountTo" type="text" class="form-control">
																	<span class="input-group-addon">.00</span>
																</div>
															  </div>
															  <!-- /.form group -->
														</div>
														<div class="col-md-6">
															<!-- Date -->
															  <div class="form-group" style="position: relative; z-index: 9999;">
																<label>Value Date:</label>
																<div class="input-group date">
																  <div class="input-group-addon">
																	<i class="fa fa-calendar"></i>
																  </div>
																  <input type="text" class="form-control pull-right" id="datepickerProL1">
																</div>
																<label>To</label>
																<div class="input-group date">
																  <div class="input-group-addon">
																	<i class="fa fa-calendar"></i>
																  </div>
																  <input type="text" class="form-control pull-right" id="datepickerProL2">
																</div>
																<!-- /.input group -->
															  </div>
															  <!-- /.form group -->
														</div>
														<div class="col-md-6">
															<!-- Date -->
															  <div class="form-group" style="position: relative; z-index: 9999;">
																<label>Maturity Date:</label>

																<div class="input-group date">
																  <div class="input-group-addon">
																	<i class="fa fa-calendar"></i>
																  </div>
																  <input type="text" class="form-control pull-right" id="datepickerProL3">
																</div>
																<label>To</label>
																<div class="input-group date">
																  <div class="input-group-addon">
																	<i class="fa fa-calendar"></i>
																  </div>
																  <input type="text" class="form-control pull-right" id="datepickerProL4">
																</div>
																<!-- /.input group -->
															  </div>
															  <!-- /.form group -->
														</div>
														<div class="col-md-6">
															<div class="form-group">
																<label>Balance Currency:</label>
																<select id="pro_loanBalanceCurrencySelect" class="form-control select2" multiple="multiple" data-placeholder="Select States" style="width: 100%;">
																</select>
															 </div>
														</div>
														<div class="col-md-6">
															<div class="form-group">
																<label>Balance:</label>
																<div class="input-group">
																	<span class="input-group-addon">$</span>
																	<input id="pro_loanBalanceFrom" type="text" class="form-control">
																	<span class="input-group-addon">.00</span>
																</div>
																<label>To</label>
																<div class="input-group">
																	<span class="input-group-addon">$</span>
																	<input id="pro_loanBalanceTo" type="text" class="form-control">
																	<span class="input-group-addon">.00</span>
																</div>
															  </div>
															  <!-- /.form group -->
														</div>
														<div class="col-md-6">
															<div class="form-group">
																<label>Account Status:</label>
																<select id="pro_loanStatusSelect" class="form-control select2" multiple="multiple" data-placeholder="Select States" style="width: 100%;">
																</select>
															 </div>
														</div>
													</div>
												</div>
												<div class="modal-footer">
													<button type="button" class="btn  bg-purple" onclick="searchProLoanResult()">Search</button>
													<button type="button" class="btn  bg-purple" data-dismiss="modal">Close</button>
												</div>
											</div>
										</div>
									</div>
									<!-- Modal end -->
									
									<h3 class="box-title">
										Loan Information
									</h3>
								</div>
								<div class="box-body">
								 <table id="proLoanTable" class="table table-bordered table-striped">
									<thead>
									<tr>
									  <th>Branch</th>
									  <th>Loan Acct No</th>
									  <th>Loan Type</th>
									  <th>Line No</th>									  
									  <th>Principal Currency</th>
									  <th>Principal Amount</th>									  
									  <th>Value Date</th>
									  <th>Maturity Date</th>
									  <th>Balance Currency</th>	 									  
									  <th>Balance</th>
									  <th>Account Status</th>
									</tr>
									</thead>
									<tbody>
									</tbody>
									<tfoot>
									<tr>
									  <th>Branch</th>
									  <th>Loan Acct No</th>
									  <th>Loan Type</th>
									  <th>Line No</th>									  
									  <th>Principal Currency</th>
									  <th>Principal Amount</th>									  
									  <th>Value Date</th>
									  <th>Maturity Date</th>
									  <th>Balance Currency</th>	 									  
									  <th>Balance</th>
									  <th>Account Status</th>
									</tr>
									</tfoot>
								  </table>
								</div>
							</div>
						</section>
		
						<section class="col-lg-12" id="Product-ROKPI" style="display:none;">
							<div class="box box-success">
								<div class="box-header">
								  <div class="pull-right box-tools">
									<button type="button" class="btn bg-purple btn-sm pull-right" data-widget="collapse" data-toggle="tooltip" title="Collapse" style="margin-right: 5px;">
									  <i class="fa fa-minus"></i></button>
								  </div>
								  <h3 class="box-title">
									Repayment 
									<small>Overdue</small>
								  </h3>
								</div>
								<div class="box-body">
									<h3 class="col-md-6" style="margin-bottom:30px;">Time of overdue over the last 12 month : </h3>
									<h3 class="col-md-6" style="color:#00CCCC;margin-bottom:30px;" id="overdueTimes">null</h3>
								</div>
							</div>
						</section>
		
						<section class="col-lg-12" id="Product-RDP" style="display:none;">
							<div class="box box-success">
								<div class="box-header">
								  <div class="pull-right box-tools">
									<button type="button" class="btn bg-purple btn-sm pull-right" data-widget="collapse" data-toggle="tooltip" title="Collapse" style="margin-right: 5px;">
									  <i class="fa fa-minus"></i></button>
								  </div>
								  <h3 class="box-title">
									Repayment 
									<small>Deliquency</small>
								  </h3>
								</div>
								<div class="box-body">
								  <div id="deliquencyRadio" class="col-md-2" style="margin-left:20px;margin-top:10px;margin-bottom:20px;">
									 
								  </div>
								  <!-- Pie Chart -->
								  <div id="deliquencyPie" class="col-md-10" style="margin-top:15px;width: 700px;height:400px;display:none;"></div>
								</div>
							</div>
						</section>
						
						<section class="col-lg-12" id="Product-RT" style="display:none;">
							<div class="box box-success">
								<div class="box-header">
									<div class="pull-right box-tools">
									  <button type="button" class="btn bg-purple btn-sm pull-right" data-widget="collapse" data-toggle="tooltip" title="Collapse" style="margin-right: 5px;">
										<i class="fa fa-minus"></i></button>
											<button type="button" class="btn bg-purple btn-sm pull-right" data-toggle="modal" data-target="#project-pro_r" style="margin-right: 5px;">
										<i class="fa fa-search-plus"></i></button>
									</div>
								  
									<!-- Modal -->
									<div class="modal fade " id="project-pro_r" tabindex="-1" role="dialog" aria-labelledby="project-pro_r-label" aria-hidden="true">
										<div class="modal-dialog modal-lg">
											<div class="modal-content">
												<div class="modal-header bg-purple">
													<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
													<h4 class="modal-title" id="project-pro_r-label">Search</h4>
												</div>
												<div class="modal-body">
													<div class="row">
														<div class="col-md-6">
															<div class="form-group">
																<label>Open Item No:</label>
																<input id="repaymentOpenItemNoSelect" type="text" class="form-control">
															  </div>
															  <!-- /.form group -->
														</div>
														<div class="col-md-6">
															<div class="form-group">
																<label>Instalment No:</label>
																<input id="repaymentInstalmentNoSelect" type="text" class="form-control">
															  </div>
															  <!-- /.form group -->
														</div>
														<div class="col-md-6">
															<div class="form-group">
																<label>Branch:</label>
																<select id="repaymentBranchSelect" class="form-control select2" multiple="multiple" data-placeholder="Select States" style="width: 100%;">
																</select>
															 </div>
														</div>
																<div class="col-md-6">
															<div class="form-group">
																<label>Currency:</label>
																<select id="repaymentCcySelect" class="form-control select2" multiple="multiple" data-placeholder="Select States" style="width: 100%;">
																</select>
															 </div>
														</div>

														<div class="col-md-6">
															<div class="form-group">
																<label>Overdue Flag:</label>
																<select id="repaymentOverdueFlagSelect" class="form-control select2" multiple="multiple" data-placeholder="Select States" style="width: 100%;">
																</select>
															 </div>
														</div>
												

														<div class="col-md-6">
															<!-- Date -->
															  <div class="form-group" style="position: relative; z-index: 9999;">
																<label>Start Date:</label>
																<div class="input-group date">
																  <div class="input-group-addon">
																	<i class="fa fa-calendar"></i>
																  </div>
																  <input type="text" class="form-control pull-right" id="datepickerProR1">
																</div>
																<label>To</label>
																<div class="input-group date">
																  <div class="input-group-addon">
																	<i class="fa fa-calendar"></i>
																  </div>
																  <input type="text" class="form-control pull-right" id="datepickerProR2">
																</div>
																<!-- /.input group -->
															  </div>
															  <!-- /.form group -->
														</div>
														
														<div class="col-md-6">
															<!-- Date -->
															  <div class="form-group" style="position: relative; z-index: 9999;">
																<label>Due Date:</label>
																<div class="input-group date">
																  <div class="input-group-addon">
																	<i class="fa fa-calendar"></i>
																  </div>
																  <input type="text" class="form-control pull-right" id="datepickerProR3">
																</div>
																<label>To</label>
																<div class="input-group date">
																  <div class="input-group-addon">
																	<i class="fa fa-calendar"></i>
																  </div>
																  <input type="text" class="form-control pull-right" id="datepickerProR4">
																</div>
																<!-- /.input group -->
															  </div>
															  <!-- /.form group -->
														</div>
														
														<div class="col-md-6">
															<!-- Date -->
															  <div class="form-group" style="position: relative; z-index: 9999;">
																<label>Paid Date:</label>
																<div class="input-group date">
																  <div class="input-group-addon">
																	<i class="fa fa-calendar"></i>
																  </div>
																  <input type="text" class="form-control pull-right" id="datepickerProR5">
																</div>
																<label>To</label>
																<div class="input-group date">
																  <div class="input-group-addon">
																	<i class="fa fa-calendar"></i>
																  </div>
																  <input type="text" class="form-control pull-right" id="datepickerProR6">
																</div>
																<!-- /.input group -->
															  </div>
															  <!-- /.form group -->
														</div>
														
														<div class="col-md-6">
															<div class="form-group">
																<label>Instalment AMT:</label>
																<div class="input-group">
																	<span class="input-group-addon">$</span>
																	<input id="repaymentInstalmentAmtFrom" type="text" class="form-control">
																	<span class="input-group-addon">.00</span>
																</div>
																<label>To</label>
																<div class="input-group">
																	<span class="input-group-addon">$</span>
																	<input id="repaymentInstalmentAmtTo" type="text" class="form-control">
																	<span class="input-group-addon">.00</span>
																</div>
															  </div>
															  <!-- /.form group -->
														</div>
														
														<div class="col-md-6">
															<div class="form-group">
																<label>Interest AMT:</label>
																<div class="input-group">
																	<span class="input-group-addon">$</span>
																	<input id="repaymentInterestAmtFrom" type="text" class="form-control">
																	<span class="input-group-addon">.00</span>
																</div>
																<label>To</label>
																<div class="input-group">
																	<span class="input-group-addon">$</span>
																	<input id="repaymentInterestAmtTo" type="text" class="form-control">
																	<span class="input-group-addon">.00</span>
																</div>
															  </div>
															  <!-- /.form group -->
														</div>
														
													</div>
												</div>
												<div class="modal-footer">
													<button type="button" class="btn  bg-purple" onclick="searchRepayment()">Search</button>
													<button type="button" class="btn  bg-purple" data-dismiss="modal">Close</button>
												</div>
											</div>
										</div>
									</div>
									<!-- Modal end -->
								  
									<h3 class="box-title">
										Repayment
									</h3>
								</div>
								<div class="box-body">
								 <table id="repaymentTable" class="table table-bordered table-striped">
									<thead>
									<tr>
									  <th>Branch</th>
									  <th>Open Item Num</th>
									  <th>Instalment No</th>
									  <th>Start Date</th>
									  <th>Due Date</th>
									  <th>Paid Date</th>
									  <th>Ccy</th>
									  <th>Instalment Amt</th>
									  <th>Interest Amt</th>
									  <th>Overdue Flag</th>
									  
									</tr>
									</thead>
									<tbody>
									</tbody>
									<tfoot>
									<tr>
									  <th>Branch</th>
									  <th>Open Item Num</th>
									  <th>Instalment No</th>
									  <th>Start Date</th>
									  <th>Due Date</th>
									  <th>Paid Date</th>
									  <th>Ccy</th>
									  <th>Instalment Amt</th>
									  <th>Interest Amt</th>
									  <th>Overdue Flag</th>
									</tr>
									</tfoot>
								  </table>
								</div>
							</div>
						</section>
						
					</div>
					<div class="col-lg-1" style="padding:8px;position:fixed;right:-12px">
						<ul class="nav nav-tabs" style="font:14px arial,sans-serif;background:#e9efef;">
							<li class="nav-header" style="border-bottom:solid 2px #ddd;width:100%;text-align:center">
							  <h4>Navigation</h4>
							</li>
							<li style="border-bottom:solid 2px #ddd;width:100%">
							<a href="#">Top</a>
							</li>
							<li style="display:none;border-bottom:solid 2px #ddd;width:100%" id="Navigation-Product-LB">
							<a href="#Product-LB">Liquidity</a>
							</li>
							<li style="display:none;border-bottom:solid 2px #ddd;width:100%" id="Navigation-Product-ABT">
							<a href="#Product-ABT">Account Balance</a>
							</li>
							<li style="display:none;border-bottom:solid 2px #ddd;width:100%" id="Navigation-Product-DTL">
							<a href="#Product-DTL">Deposit Transaction</a>
							</li>
							<li style="display:none;border-bottom:solid 2px #ddd;width:100%" id="Navigation-Product-TDT">
							<a href="#Product-TDT">Transaction Detail</a>
							</li>
							<li style="display:none;border-bottom:solid 2px #ddd;width:100%" id="Navigation-Product-LIT2">
							<a href="#Product-LIT2">Loan Information</a>
							</li>
							<li style="display:none;border-bottom:solid 2px #ddd;width:100%" id="Navigation-Product-ROKPI">
							<a href="#Product-ROKPI">Repayment Overdue</a>
							</li>
							<li style="display:none;border-bottom:solid 2px #ddd;width:100%" id="Navigation-Product-RDP">
							<a href="#Product-RDP">Repayment Deliquency</a>
							</li>
							<li style="display:none;border-bottom:solid 2px #ddd;width:100%" id="Navigation-Product-RT">
							<a href="#Product-RT">Repayment</a>
							</li>
						</ul>
					</div>	
				</div>
				<div class="chart tab-pane" id="CreditFacility" style="display:none;position: relative;">
					<div class="col-lg-11" style="padding:0px">
						<div class="box box-success" id="CreditFacility-KPI" style="display:none;">
							<div class="box-header with-border">
								 <h5 class="box-title"></h5>
								 <div class="box-tools pull-right">
									<button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i>
									</button>
								 </div>
								  <!-- /.box-tools -->
							</div>
							<!-- /.box-header -->
							<div class="box-body">					 
								<div class="col-md-3">
								  <div class="box box-success box-solid">
									<div class="box-header with-border">
									  <h3 class="box-title">Customer Name</h3>					  
									</div>
									<!-- /.box-header -->
									<div class="box-body" name="b_CN">
									  
									</div>
									<!-- /.box-body -->
								  </div>
								  <!-- /.box -->
								</div>
								<!-- /.col -->						
								<div class="col-md-3">
								  <div class="box box-success box-solid">
									<div class="box-header with-border">
									  <h3 class="box-title">Customer Code</h3>
									  <!-- /.box-tools -->
									</div>
									<!-- /.box-header -->
									<div class="box-body" name="b_CC">
									  
									</div>
									<!-- /.box-body -->
								  </div>
								  <!-- /.box -->
								</div>
								<!-- /.col -->						
								<div class="col-md-3">
								  <div class="box box-success box-solid">
									<div class="box-header with-border">
									  <h3 class="box-title">Customer Level</h3>
									</div>
									<!-- /.box-header -->
									<div class="box-body" name="b_CL">
									  
									</div>
									<!-- /.box-body -->
								  </div>
								  <!-- /.box -->
								</div>
								<!-- /.col -->						
								<div class="col-md-3">
								  <div class="box box-success box-solid">
									<div class="box-header with-border">
									  <h3 class="box-title">Risk Rating</h3>
									</div>
									<!-- /.box-header -->
									<div class="box-body" name="b_RR">
									  
									</div>
									<!-- /.box-body -->
								  </div>
								  <!-- /.box -->
								</div>
								<!-- /.col -->						
								<div class="col-md-4">
								  <div class="box box-success box-solid">
									<div class="box-header with-border">
									  <h3 class="box-title">Assets Balance</h3>				
									</div>
									<!-- /.box-header -->
									<div class="box-body" name="b_AB">
									  
									</div>
									<!-- /.box-body -->
								  </div>
								  <!-- /.box -->
								</div>
								<!-- /.col -->						
								<div class="col-md-4">
								  <div class="box box-success box-solid">
									<div class="box-header with-border">
									  <h3 class="box-title">Liabilities Balance</h3>
									  <!-- /.box-tools -->
									</div>
									<!-- /.box-header -->
									<div class="box-body" name="b_LB">
									  
									</div>
									<!-- /.box-body -->
								  </div>
								  <!-- /.box -->
								</div>
								<!-- /.col -->						
								<div class="col-md-4">
								  <div class="box box-success box-solid">
									<div class="box-header with-border">
									  <h3 class="box-title">Line Limit</h3>
									</div>
									<!-- /.box-header -->
									<div class="box-body" name="b_LL">
									  
									</div>
									<!-- /.box-body -->
								  </div>
								  <!-- /.box -->
								</div>
								<!-- /.col -->						
							</div>
								<!-- /.box-body -->
						</div>
						<!-- /.box -->												 

						<section class="col-lg-12" id="CreditFacility-CLSTM" style="display:none;">
							<div class="box box-success">
								<div class="box-header">
								  <div class="pull-right box-tools">
									<button type="button" class="btn bg-purple btn-sm pull-right" data-widget="collapse" data-toggle="tooltip" title="Collapse" style="margin-right: 5px;">
									  <i class="fa fa-minus"></i></button>
								  </div>
								  <h3 class="box-title">
									Credit Line Structure 
								  </h3>
								</div>
								<div class="box-body">
								  <!-- Tree Structure Chart -->
								  <div id="creditLineTreeMap">
									<div id="creditLineTreeShowDiv" style="position:absolute;display:none;border:2px solid silver;">
										<small></small><br/>
										<small></small><br/>
										<small></small>
									</div>
								  </div>
								</div>
							</div>
						</section>	
					
						<section class="col-lg-12" id="CreditFacility-CLT" style="display:none;">
							<div class="box box-success">
								<div class="box-header">
									<div class="pull-right box-tools">
									  <button type="button" class="btn bg-purple btn-sm pull-right" data-widget="collapse" data-toggle="tooltip" title="Collapse" style="margin-right: 5px;">
										<i class="fa fa-minus"></i></button>
											<button type="button" class="btn bg-purple btn-sm pull-right" data-toggle="modal" data-target="#project-cl" style="margin-right: 5px;">
										<i class="fa fa-search-plus"></i></button>
									</div>
									
									<!-- Modal -->
									<div class="modal fade " id="project-cl" tabindex="-1" role="dialog" aria-labelledby="project-cl-label" aria-hidden="true">
										<div class="modal-dialog modal-lg">
											<div class="modal-content">
												<div class="modal-header bg-purple">
													<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
													<h4 class="modal-title" id="project-cl-label">Search</h4>
												</div>
												<div class="modal-body">
													<div class="row">
														<div class="col-md-6">
															<div class="form-group">
																<label>Credit Line No:</label>
																<input id="creditLineNo" type="text" class="form-control">
															  </div>
															  <!-- /.form group -->
														</div>
														<div class="col-md-6">
															<div class="form-group">
																<label>Line Name:</label>
																<input id="creditLineName" type="text" class="form-control">
															  </div>
															  <!-- /.form group -->
														</div>
														<div class="col-md-6">
															<!-- Date -->
															  <div class="form-group" style="position: relative; z-index: 9999;">
																<label>Create Date:</label>
																<div class="input-group date">
																  <div class="input-group-addon">
																	<i class="fa fa-calendar"></i>
																  </div>
																  <input type="text" class="form-control pull-right" id="datepickerCL1">
																</div>
																<label>To</label>
																<div class="input-group date">
																  <div class="input-group-addon">
																	<i class="fa fa-calendar"></i>
																  </div>
																  <input type="text" class="form-control pull-right" id="datepickerCL2">
																</div>
																<!-- /.input group -->
															  </div>
															  <!-- /.form group -->
														</div>
														<div class="col-md-6">
															<!-- Date -->
															  <div class="form-group" style="position: relative; z-index: 9999;">
																<label>Expire Date:</label>
																<div class="input-group date">
																  <div class="input-group-addon">
																	<i class="fa fa-calendar"></i>
																  </div>
																  <input type="text" class="form-control pull-right" id="datepickerCL3">
																</div>
																<label>To</label>
																<div class="input-group date">
																  <div class="input-group-addon">
																	<i class="fa fa-calendar"></i>
																  </div>
																  <input type="text" class="form-control pull-right" id="datepickerCL4">
																</div>
																<!-- /.input group -->
															  </div>
															  <!-- /.form group -->
														</div>
														<div class="col-md-6">
															<div class="form-group">
																<label>Currency:</label>
																<select id="creditLineCurrencySelect" class="form-control select2" multiple="multiple" data-placeholder="Select States" style="width: 100%;">
																</select>
															 </div>
														</div>		
														<div class="col-md-6">
															<div class="form-group">
																<label>Limit:</label>
																<div class="input-group">
																	<span class="input-group-addon">$</span>
																	<input id="creditLineLimitFrom" type="text" class="form-control">
																	<span class="input-group-addon">.00</span>
																</div>
																<label>To</label>
																<div class="input-group">
																	<span class="input-group-addon">$</span>
																	<input id="creditLineLimitTo" type="text" class="form-control">
																	<span class="input-group-addon">.00</span>
																</div>
															  </div>
															  <!-- /.form group -->
														</div>
														<div class="col-md-6">
															<div class="form-group">
																<label>Utilized Amount:</label>
																<div class="input-group">
																	<span class="input-group-addon">$</span>
																	<input id="creditLineUtilizedAmountFrom" type="text" class="form-control">
																	<span class="input-group-addon">.00</span>
																</div>
																<label>To</label>
																<div class="input-group">
																	<span class="input-group-addon">$</span>
																	<input id="creditLineUtilizedAmountTo" type="text" class="form-control">
																	<span class="input-group-addon">.00</span>
																</div>
															  </div>
															  <!-- /.form group -->
														</div>
														<div class="col-md-6">
															<div class="form-group">
																<label>Booking Amount:</label>
																<div class="input-group">
																	<span class="input-group-addon">$</span>
																	<input id="creditLineBookingAmountFrom" type="text" class="form-control">
																	<span class="input-group-addon">.00</span>
																</div>
																<label>To</label>
																<div class="input-group">
																	<span class="input-group-addon">$</span>
																	<input id="creditLineBookingAmountTo" type="text" class="form-control">
																	<span class="input-group-addon">.00</span>
																</div>
															  </div>
															  <!-- /.form group -->
														</div>														
														<div class="col-md-6">
															<div class="form-group">
																<label>Available Amount:</label>
																<div class="input-group">
																	<span class="input-group-addon">$</span>
																	<input id="creditLineAvailableAmountFrom" type="text" class="form-control">
																	<span class="input-group-addon">.00</span>
																</div>
																<label>To</label>
																<div class="input-group">
																	<span class="input-group-addon">$</span>
																	<input id="creditLineAvailableAmountTo" type="text" class="form-control">
																	<span class="input-group-addon">.00</span>
																</div>
															  </div>
															  <!-- /.form group -->
														</div>
														<div class="col-md-6">
															<div class="form-group">
																<label>Revolving Ind:</label>												
																<select id="creditLineRevolvingSelect" class="form-control select2" multiple="multiple" data-placeholder="Select States" style="width: 100%;">
																</select>
															 </div>
														</div>
													</div>
												</div>
												<div class="modal-footer">
													<button type="button" class="btn  bg-purple" onclick="searchCreditLineResult()">Search</button>
													<button type="button" class="btn  bg-purple" data-dismiss="modal">Close</button>
												</div>
											</div>
										</div>
									</div>
									<!-- Modal end -->									
									
									<h3 class="box-title">
										Credit Lines
									</h3>
								</div>
								<div class="box-body">
								 <table id="creditLinesTable" class="table table-bordered table-striped">
									<thead>
									<tr>
									  <th>Credit Line No</th>
									  <th>Line Name</th>
									  <th>Create Date</th>
									  <th>Expire Date</th>
									  <th>Ccy</th>
									  <th>Limit</th>
									  <th>Utilized Amount</th>
									  <th>Booking Amount</th>
									  <th>Available Amount</th>
									  <th>Revolving Industry</th>
									</tr>
									</thead>
									<tbody>
									</tbody>
									<tfoot>
									<tr>
									  <th>Credit Line No</th>
									  <th>Line Name</th>
									  <th>Create Date</th>
									  <th>ExpireDate</th>
									  <th>Ccy</th>
									  <th>Limit</th>
									  <th>Utilized Amount</th>
									  <th>Booking Amount</th>
									  <th>Available Amount</th>
									  <th>Revolving Industry</th>
									</tr>
									</tfoot>
								  </table>
								</div>
							</div>
						</section>
						
						<section class="col-lg-12" id="CreditFacility-CT" style="display:none;">
							<div class="box box-success">
								<div class="box-header">
									<div class="pull-right box-tools">
										<button type="button" class="btn bg-purple btn-sm pull-right" data-widget="collapse" data-toggle="tooltip" title="Collapse" style="margin-right: 5px;">
										<i class="fa fa-minus"></i></button>
											<button type="button" class="btn bg-purple btn-sm pull-right" data-toggle="modal" data-target="#project-c" style="margin-right: 5px;">
										<i class="fa fa-search-plus"></i></button>
									</div>
									
									<!-- Modal -->
									<div class="modal fade " id="project-c" tabindex="-1" role="dialog" aria-labelledby="project-c-label" aria-hidden="true">
										<div class="modal-dialog modal-lg">
											<div class="modal-content">
												<div class="modal-header bg-purple">
													<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
													<h4 class="modal-title" id="project-c-label">Search</h4>
												</div>
												<div class="modal-body">
													<div class="row">
														<div class="col-md-6">
															<div class="form-group">
																<label>Collateral No:</label>
																<input id="collateralNo" type="text" class="form-control">
															  </div>
															  <!-- /.form group -->
														</div>
														<div class="col-md-6">
															<div class="form-group">
																<label>Collateral Type:</label>
																<select id="collateralTypeSelect" class="form-control select2" multiple="multiple" data-placeholder="Select States" style="width: 100%;">
																</select>
															 </div>
														</div>
														<div class="col-md-6">
															<div class="form-group">
																<label>Item Description:</label>
																<input id="collateralItemDescription" type="text" class="form-control">
															  </div>
															  <!-- /.form group -->
														</div>
														<div class="col-md-6">
															<div class="form-group">
																<label>Val Currency:</label>
																<select id="collateralCurrencySelect" class="form-control select2" multiple="multiple" data-placeholder="Select States" style="width: 100%;">
																</select>
															 </div>
														</div>
														<div class="col-md-6">
															<div class="form-group">
																<label>Valuation:</label>
																<div class="input-group">
																	<span class="input-group-addon">$</span>
																	<input id="collateralValuationFrom" type="text" class="form-control">
																	<span class="input-group-addon">.00</span>
																</div>
																<label>To</label>
																<div class="input-group">
																	<span class="input-group-addon">$</span>
																	<input id="collateralValuationTo" type="text" class="form-control">
																	<span class="input-group-addon">.00</span>
																</div>
															  </div>
															  <!-- /.form group -->
														</div>
														<div class="col-md-6">
															<!-- Date -->
															  <div class="form-group" style="position: relative; z-index: 9999;">
																<label>Valuation Date:</label>
																<div class="input-group date">
																  <div class="input-group-addon">
																	<i class="fa fa-calendar"></i>
																  </div>
																  <input type="text" class="form-control pull-right" id="datepickerC1">
																</div>
																<label>To</label>
																<div class="input-group date">
																  <div class="input-group-addon">
																	<i class="fa fa-calendar"></i>
																  </div>
																  <input type="text" class="form-control pull-right" id="datepickerC2">
																</div>
																<!-- /.input group -->
															  </div>
															  <!-- /.form group -->
														</div>
														<div class="col-md-6">
															<div class="form-group">
																<label>Line No:</label>
																<input id="collateralLineNo" type="text" class="form-control">
															  </div>
															  <!-- /.form group -->
														</div>
													</div>
												</div>
												<div class="modal-footer">
													<button type="button" class="btn  bg-purple" onclick="searchCollateralsResult()">Search</button>
													<button type="button" class="btn  bg-purple" data-dismiss="modal">Close</button>
												</div>
											</div>
										</div>
									</div>
									<!-- Modal end -->									
									
									<h3 class="box-title">
										Collaterals
									</h3>
								</div>
								<div class="box-body">
								 <table id="collateralsTable" class="table table-bordered table-striped">
									<thead>
									<tr>
									  <th>Ref</th>
									  <th>Collateral No</th>
									  <th>Collateral Type</th>
									  <th>Item Description</th>
									  <th>Valuation</th>
									  <th>Valuation Date</th>
									  <th>Customer Code</th>
									  <th>Line No</th>
									</tr>
									</thead>
									<tbody> 
									</tbody>
									<tfoot>
									<tr>
									  <th>Ref</th>
									  <th>Collateral No</th>
									  <th>Collateral Type</th>
									  <th>Item Description</th>
									  <th>Valuation</th>
									  <th>Valuation Date</th>
									  <th>Customer Code</th>
									  <th>Line No</th>
									</tr>
									</tfoot>
								  </table>
								</div>
							</div>
						</section>
					</div>
					<div class="col-lg-1" style="padding:8px;position:fixed;right:-12px">
						<ul class="nav nav-tabs" style="font:14px arial,sans-serif;background:#e9efef;">
						<li class="nav-header" style="border-bottom:solid 2px #ddd;width:100%;text-align:center">
						  <h4>Navigation</h4>
						</li>
						<li style="border-bottom:solid 2px #ddd;width:100%">
						<a href="#">Top</a>
						</li>
						<li style="display:none;border-bottom:solid 2px #ddd;width:100%" id="Navigation-CreditFacility-CLSTM">
						<a href="#CreditFacility-CLSTM">Credit Line Structure</a>
						</li>
						<li style="display:none;border-bottom:solid 2px #ddd;width:100%" id="Navigation-CreditFacility-CLT">
						<a href="#CreditFacility-CLT">Credit Lines</a>
						</li>
						<li style="display:none;border-bottom:solid 2px #ddd;width:100%" id="Navigation-CreditFacility-CT">
						<a href="#CreditFacility-CT">Collaterals</a>
						</li>
						</ul>
					</div>
				</div>
				<div class="chart tab-pane" id="Pricing" style="display:none;position: relative;">
					<div class="col-lg-11" style="padding:0px">
						<div class="box box-success" id="Pricing-KPI" style="display:none;">
							<div class="box-header with-border">
								 <h5 class="box-title"></h5>
								 <div class="box-tools pull-right">
									<button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i>
									</button>
								 </div>
								  <!-- /.box-tools -->
							</div>
							<!-- /.box-header -->
							<div class="box-body">					 
								<div class="col-md-3">
								  <div class="box box-success box-solid">
									<div class="box-header with-border">
									  <h3 class="box-title">Customer Name</h3>					  
									</div>
									<!-- /.box-header -->
									<div class="box-body" name="b_CN">
									 
									</div>
									<!-- /.box-body -->
								  </div>
								  <!-- /.box -->
								</div>
								<!-- /.col -->						
								<div class="col-md-3">
								  <div class="box box-success box-solid">
									<div class="box-header with-border">
									  <h3 class="box-title">Customer Code</h3>
									  <!-- /.box-tools -->
									</div>
									<!-- /.box-header -->
									<div class="box-body" name="b_CC">
									  
									</div>
									<!-- /.box-body -->
								  </div>
								  <!-- /.box -->
								</div>
								<!-- /.col -->						
								<div class="col-md-3">
								  <div class="box box-success box-solid">
									<div class="box-header with-border">
									  <h3 class="box-title">Customer Level</h3>
									</div>
									<!-- /.box-header -->
									<div class="box-body" name="b_CL">
									 
									</div>
									<!-- /.box-body -->
								  </div>
								  <!-- /.box -->
								</div>
								<!-- /.col -->						
								<div class="col-md-3">
								  <div class="box box-success box-solid">
									<div class="box-header with-border">
									  <h3 class="box-title">Risk Rating</h3>
									</div>
									<!-- /.box-header -->
									<div class="box-body" name="b_RR">
									  
									</div>
									<!-- /.box-body -->
								  </div>
								  <!-- /.box -->
								</div>
								<!-- /.col -->						
								<div class="col-md-4">
								  <div class="box box-success box-solid">
									<div class="box-header with-border">
									  <h3 class="box-title">Assets Balance</h3>				
									</div>
									<!-- /.box-header -->
									<div class="box-body" name="b_AB">
									  
									</div>
									<!-- /.box-body -->
								  </div>
								  <!-- /.box -->
								</div>
								<!-- /.col -->						
								<div class="col-md-4">
								  <div class="box box-success box-solid">
									<div class="box-header with-border">
									  <h3 class="box-title">Liabilities Balance</h3>
									  <!-- /.box-tools -->
									</div>
									<!-- /.box-header -->
									<div class="box-body" name="b_LB">
									 
									</div>
									<!-- /.box-body -->
								  </div>
								  <!-- /.box -->
								</div>
								<!-- /.col -->						
								<div class="col-md-4">
								  <div class="box box-success box-solid">
									<div class="box-header with-border">
									  <h3 class="box-title">Line Limit</h3>
									</div>
									<!-- /.box-header -->
									<div class="box-body" name="b_LL">
									  
									</div>
									<!-- /.box-body -->
								  </div>
								  <!-- /.box -->
								</div>
								<!-- /.col -->						
							</div>
							<!-- /.box-body -->
						</div>
						<!-- /.box -->	
						<section class="col-lg-12" id="Pricing-PIRT" style="display:none;">
							<div class="box box-success">
								<div class="box-header">
									<div class="pull-right box-tools">
									  <button type="button" class="btn bg-purple btn-sm pull-right" data-widget="collapse" data-toggle="tooltip" title="Collapse" style="margin-right: 5px;">
										<i class="fa fa-minus"></i></button>
									</div>
									<h3 class="box-title">
										Preferential Interest Rate
									</h3>
								</div>
								<div class="box-body">
								 <table id="preferentialInterestRateTable" class="table table-bordered table-striped">
									<thead>
									<tr>
									  <th>Product Code</th>
									  <th>Product Desc</th>
									  <th>IR Spread</th>
									  <th>OD Int Spread</th>
									  <th>OD Int Spread</th>
									  <th>Effective Date</th>
									  <th>Expiry Date</th>
									  
									  
									</tr>
									</thead>
									<tbody>
									</tbody>
									<tfoot>
									<tr>
									  <th>Product Code</th>
									  <th>Product Desc</th>
									  <th>IR Spread</th>
									  <th>OD Int Spread</th>
									  <th>OD Int Spread</th>
									  <th>Effective Date</th>
									  <th>Expiry Date</th>
									</tr>
									</tfoot>
								  </table>
								</div>
							</div>
						</section>	
						<section class="col-lg-12" id="Pricing-PFRT" style="display:none;">
							<div class="box box-success">
								<div class="box-header">
									<div class="pull-right box-tools">
									  <button type="button" class="btn bg-purple btn-sm pull-right" data-widget="collapse" data-toggle="tooltip" title="Collapse" style="margin-right: 5px;">
										<i class="fa fa-minus"></i></button>
									</div>
									<h3 class="box-title">
										Preferential FX Rate
									</h3>
								</div>
								<div class="box-body">
								 <table id="preferentialFXRateTable" class="table table-bordered table-striped">
									<thead>
									<tr>
									  <th>Product Code</th>
									  <th>Product Desc</th>
									  <th>CCY1</th>
									  <th>CCY2</th>
									  <th>Point</th>
									  <th>Preminum Discount</th>
									</tr>
									</thead>
									<tbody>
									</tbody>
									<tfoot>
									<tr>
									  <th>Product Code</th>
									  <th>Product Desc</th>
									  <th>CCY1</th>
									  <th>CCY2</th>
									  <th>Point</th>
									  <th>Preminum Discount</th>
									</tr>
									</tfoot>
								  </table>
								</div>
							</div>
						</section>	
						<section class="col-lg-12" id="Pricing-PFT" style="display:none;">
							<div class="box box-success">
								<div class="box-header">
									<div class="pull-right box-tools">
									  <button type="button" class="btn bg-purple btn-sm pull-right" data-widget="collapse" data-toggle="tooltip" title="Collapse" style="margin-right: 5px;">
										<i class="fa fa-minus"></i></button>
									</div>
									<h3 class="box-title">
										Preferential Fees
									</h3>
								</div>
								<div class="box-body">
								 <table id="preferentialFeesTable" class="table table-bordered table-striped">
									<thead>
									<tr>
									  <th>Fee Type</th>
									  <th>Preminum Discount</th>
									</tr>
									</thead>
									<tbody>
									</tbody>
									<tfoot>
									<tr>
									  <th>Fee Type</th>
									  <th>Preminum Discount</th>
									</tr>
									</tfoot>
								  </table>
								</div>
							</div>
						</section>	
						<section class="col-lg-12" id="Pricing-SIT" style="display:none;">
							<div class="box box-success">
								<div class="box-header">
									<div class="pull-right box-tools">
									  <button type="button" class="btn bg-purple btn-sm pull-right" data-widget="collapse" data-toggle="tooltip" title="Collapse" style="margin-right: 5px;">
										<i class="fa fa-minus"></i></button>
									</div>
									<h3 class="box-title">
										Standing Instruction
									</h3>
								</div>
								<div class="box-body">
								 <table id="standingInstructionTable" class="table table-bordered table-striped">
									<thead>
									<tr>
									  <th>Instruction</th>
									  <th>Maker</th>
									  <th>Sdate</th>
									</tr>
									</thead>
									<tbody>
									</tbody>
									<tfoot>
									<tr>
									  <th>Instruction</th>
									  <th>Maker</th>
									  <th>Sdate</th>
									</tr>
									</tfoot>
								  </table>
								</div>
							</div>
						</section>
						<section class="col-lg-12" id="Pricing-PIT" style="display:none;">
							<div class="box box-success">
								<div class="box-header">
									<div class="pull-right box-tools">
									  <button type="button" class="btn bg-purple btn-sm pull-right" data-widget="collapse" data-toggle="tooltip" title="Collapse" style="margin-right: 5px;">
										<i class="fa fa-minus"></i></button>
									</div>
									<h3 class="box-title">
										Product Instruction
									</h3>
								</div>
								<div class="box-body">
								 <table id="productInstructionTable" class="table table-bordered table-striped">
									<thead>
									<tr>
									  <th>Product Code</th>
									  <th>Product Desc</th>
									  <th>Instruction</th>
									  <th>Maker</th>
									  <th>Pdate</th>
									</tr>
									</thead>
									<tbody>
									</tbody>
									<tfoot>
									<tr>
									  <th>Product Code</th>
									  <th>Product Desc</th>
									  <th>Instruction</th>
									  <th>Maker</th>
									  <th>Pdate</th>
									</tr>
									</tfoot>
								  </table>
								</div>
							</div>
						</section>
					</div>
					<div class="col-lg-1" style="padding:8px;position:fixed;right:-12px">
						<ul class="nav nav-tabs" style="font:14px arial,sans-serif;background:#e9efef;">
							<li class="nav-header" style="border-bottom:solid 2px #ddd;width:100%;text-align:center">
							  <h4>Navigation</h4>
							</li>
							<li style="border-bottom:solid 2px #ddd;width:100%">
							<a href="#">Top</a>
							</li>
							<li style="display:none;border-bottom:solid 2px #ddd;width:100%" id="Navigation-Pricing-PIRT">
							<a href="#Pricing-PIRT">Preferential Interest Rate</a>
							</li>
							<li style="display:none;border-bottom:solid 2px #ddd;width:100%" id="Navigation-Pricing-PFRT">
							<a href="#Pricing-PFRT">Preferential FX Rate</a>
							</li>
							<li style="display:none;border-bottom:solid 2px #ddd;width:100%" id="Navigation-Pricing-PFT">
							<a href="#Pricing-PFT">Preferential Fees</a>
							</li>
							<li style="display:none;border-bottom:solid 2px #ddd;width:100%" id="Navigation-Pricing-SIT">
							<a href="#Pricing-SIT">Standing Instruction</a>
							</li>
							<li style="display:none;border-bottom:solid 2px #ddd;width:100%" id="Navigation-Pricing-PIT">
							<a href="#Pricing-PIT">Product Instruction</a>
							</li>
						</ul>
					</div>
				</div>
				<div class="chart tab-pane" id="CallMemo" style="display:none;position: relative;">
					<div class="col-lg-11" style="padding:0px">
						<div class="box box-success" id="CallMemo-KPI" style="display:none;">
							<div class="box-header with-border">
								 <h5 class="box-title"></h5>
								 <div class="box-tools pull-right">
									<button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i>
									</button>
								 </div>
								  <!-- /.box-tools -->
							</div>
							<!-- /.box-header -->
							<div class="box-body">					 
								<div class="col-md-3">
								  <div class="box box-success box-solid">
									<div class="box-header with-border">
									  <h3 class="box-title">Customer Name</h3>					  
									</div>
									<!-- /.box-header -->
									<div class="box-body" name="b_CN">
									
									</div>
									<!-- /.box-body -->
								  </div>
								  <!-- /.box -->
								</div>
								<!-- /.col -->						
								<div class="col-md-3">
								  <div class="box box-success box-solid">
									<div class="box-header with-border">
									  <h3 class="box-title">Customer Code</h3>
									  <!-- /.box-tools -->
									</div>
									<!-- /.box-header -->
									<div class="box-body" name="b_CC">
									  
									</div>
									<!-- /.box-body -->
								  </div>
								  <!-- /.box -->
								</div>
								<!-- /.col -->						
								<div class="col-md-3">
								  <div class="box box-success box-solid">
									<div class="box-header with-border">
									  <h3 class="box-title">Customer Level</h3>
									</div>
									<!-- /.box-header -->
									<div class="box-body" name="b_CL">
									 
									</div>
									<!-- /.box-body -->
								  </div>
								  <!-- /.box -->
								</div>
								<!-- /.col -->						
								<div class="col-md-3">
								  <div class="box box-success box-solid">
									<div class="box-header with-border">
									  <h3 class="box-title">Risk Rating</h3>
									</div>
									<!-- /.box-header -->
									<div class="box-body" name="b_RR">
									  
									</div>
									<!-- /.box-body -->
								  </div>
								  <!-- /.box -->
								</div>
								<!-- /.col -->						
								<div class="col-md-4">
								  <div class="box box-success box-solid">
									<div class="box-header with-border">
									  <h3 class="box-title">Assets Balance</h3>				
									</div>
									<!-- /.box-header -->
									<div class="box-body" name="b_AB">
									 
									</div>
									<!-- /.box-body -->
								  </div>
								  <!-- /.box -->
								</div>
								<!-- /.col -->						
								<div class="col-md-4">
								  <div class="box box-success box-solid">
									<div class="box-header with-border">
									  <h3 class="box-title">Liabilities Balance</h3>
									  <!-- /.box-tools -->
									</div>
									<!-- /.box-header -->
									<div class="box-body" name="b_LB">
									  
									</div>
									<!-- /.box-body -->
								  </div>
								  <!-- /.box -->
								</div>
								<!-- /.col -->						
								<div class="col-md-4">
								  <div class="box box-success box-solid">
									<div class="box-header with-border">
									  <h3 class="box-title">Line Limit</h3>
									</div>
									<!-- /.box-header -->
									<div class="box-body" name="b_LL">
									 
									</div>
									<!-- /.box-body -->
								  </div>
								  <!-- /.box -->
								</div>
								<!-- /.col -->						
							</div>
								<!-- /.box-body -->
						</div>
						<!-- /.box -->	
						
						<section class="col-lg-7" id="CallMemo-list" style="display:none;">
							<div class="box box-success">
								<div class="box-header">
								  <div class="pull-right box-tools">
									<button type="button" class="btn bg-purple btn-sm pull-right" data-widget="collapse" data-toggle="tooltip" title="Collapse" style="margin-right: 5px;">
									  <i class="fa fa-minus"></i></button>
								  </div>
								  <h3 class="box-title">
									Call Memo 
								  </h3>
								</div>
								<div class="box-body">
									<ul class="timeline" id="callMemoList">
										
									</ul>
								</div>
							</div>
						</section>	
						
						<section class="col-lg-5" id="CallMemo-calendar" style="display:none;">
						  <div class="box box-success">
							<div class="box-header">
							  <i class="fa fa-calendar"></i>
							  <h3 class="box-title">Calendar</h3>
							  <!-- tools box -->
							  <div class="pull-right box-tools">
								<button type="button" class="btn bg-purple btn-sm" data-widget="collapse"><i class="fa fa-minus"></i>
								</button>
							  </div>
							  <!-- /. tools -->
							</div>
							<!-- /.box-header -->
							<div class="box-body no-padding">
								<div class="input-group" style="width:80%; margin-left:10%">
								  <input id="dateMask" type="text" class="form-control" data-inputmask="'alias': 'yyyy/mm/dd'" data-mask>
								  <span class="input-group-btn">
									<button type="button" class="btn bg-purple btn-flat" onclick="callMemoDateGo()">Go</button>
								  </span>
								</div>

								<!--The calendar -->
								<div id="calendar" style="width: 100%"></div>
							  <br/>
							</div>
							<!-- /.box-body -->
						  </div>
						  <!-- /.box -->
						</section>	
					</div>
					<div class="col-lg-1" style="padding:8px;position:fixed;right:-12px">
						<ul class="nav nav-tabs" style="font:14px arial,sans-serif;background:#e9efef;">
						<li class="nav-header" style="border-bottom:solid 2px #ddd;width:100%;text-align:center">
						  <h4>Navigation</h4>
						</li>
						<li style="border-bottom:solid 2px #ddd;width:100%">
						<a href="#">Top</a>
						</li>
						<li style="display:none;border-bottom:solid 2px #ddd;width:100%" id="Navigation-CallMemo-list">
						<a href="#CallMemo-list">Call Memo List</a>
						</li>
						<li style="display:none;border-bottom:solid 2px #ddd;width:100%" id="Navigation-CallMemo-calendar">
						<a href="#CallMemo-calendar">Calendar</a>
						</li>
						</ul>
					</div>	
				</div>
            </div>
		</div>
		<!-- /.nav-tabs-custom -->
	</div>
	</section>
	</div>
	
    <!-- /.content -->
  
  <!-- Control Sidebar -->
  <aside class="control-sidebar control-sidebar-light">
    
  </aside>
  <!-- /.control-sidebar -->
  <!-- Add the sidebar's background. This div must be placed
       immediately after the control sidebar -->
  <div class="control-sidebar-bg"></div>
</div>
<!-- ./wrapper -->

<!-- jQuery 2.2.3 -->
<script src="../plugins/jQuery/jquery-2.2.3.min.js"></script>
<!-- jQuery Number -->
<script src="../number/jquery.number.min.js"></script>
<!-- fullCalendar 2.2.5 -->
<!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.11.2/moment.min.js"></script> -->
<script src="../plugins/fullcalendar//moment.min.js"></script>
<script src="../plugins/fullcalendar/fullcalendar.min.js"></script>
<!-- iCheck 1.0.1 -->
<script src="../plugins/iCheck/icheck.min.js"></script>
<!-- jQuery UI 1.11.4 -->
<script src="../plugins/jQueryUI/jquery-ui.min.js"></script>
<!--<script src="https://code.jquery.com/ui/1.11.4/jquery-ui.min.js"></script>-->
<!-- Resolve conflict in jQuery UI tooltip with Bootstrap tooltip -->
<script>
  $.widget.bridge('uibutton', $.ui.button);
</script>
<!-- Bootstrap 3.3.6 -->
<script src="../bootstrap/js/bootstrap.min.js"></script>
<!-- DataTables -->
<script src="../plugins/datatables/jquery.dataTables.min.js"></script>
<script src="../plugins/datatables/dataTables.bootstrap.min.js"></script>
<!-- Select2 -->
<script src="../plugins/select2/select2.full.min.js"></script>
<!-- InputMask -->
<script src="../plugins/input-mask/jquery.inputmask.js"></script>
<script src="../plugins/input-mask/jquery.inputmask.date.extensions.js"></script>
<script src="../plugins/input-mask/jquery.inputmask.extensions.js"></script>
<!-- datepicker -->
<script src="../plugins/datepicker/bootstrap-datepicker.js"></script>
<!-- Slimscroll -->
<script src="../plugins/slimScroll/jquery.slimscroll.min.js"></script>
<!-- FastClick -->
<script src="../plugins/fastclick/fastclick.js"></script>
<!-- AdminLTE App -->
<script src="../dist/js/app.min.js"></script>
<!-- AdminLTE for demo purposes -->
<script src="../dist/js/demo.js"></script>
<script src="../plugins/enquiryModal.js"></script>
<!-- AdminLTE dashboard demo (This is only for demo purposes) -->
<script src="../dist/js/pages/dashboard.js"></script> 

<script>
    var custcod = $("#customercodeHidden").html();
	var order_column_index;

	$(function () {
		$("#enquiryTable").DataTable({
		  "paging": true,
		  "lengthChange": false,
		  "searching": false,
		  "ordering": true,
		  "info": false,
		  "autoWidth": false,
		});		
		
		//Initialize Select2 Elements
		$(".select2").select2();
		
		//Date picker
		$('#datepickerD1').datepicker({
		  autoclose: true,
		  format : 'yyyy/mm/dd'
		});
		$('#datepickerD2').datepicker({
		  autoclose: true,
		  format : 'yyyy/mm/dd'
		});
		$('#datepickerD3').datepicker({
		  autoclose: true,
		  format : 'yyyy/mm/dd'
		});
		$('#datepickerD4').datepicker({
		  autoclose: true,
		  format : 'yyyy/mm/dd'
		});
		$('#datepickerL1').datepicker({
		  autoclose: true,
		  format : 'yyyy/mm/dd'
		});
		$('#datepickerL2').datepicker({
		  autoclose: true,
		  format : 'yyyy/mm/dd'
		});
		$('#datepickerL3').datepicker({
		  autoclose: true,
		  format : 'yyyy/mm/dd'
		});
		$('#datepickerL4').datepicker({
		  autoclose: true,
		  format : 'yyyy/mm/dd'
		});
		$('#datepickerCL1').datepicker({
		  autoclose: true,
		  format : 'yyyy/mm/dd'
		});
		$('#datepickerCL2').datepicker({
		  autoclose: true,
		  format : 'yyyy/mm/dd'
		});
		$('#datepickerCL3').datepicker({
		  autoclose: true,
		  format : 'yyyy/mm/dd'
		});
		$('#datepickerCL4').datepicker({
		  autoclose: true,
		  format : 'yyyy/mm/dd'
		});
		$('#datepickerC1').datepicker({
		  autoclose: true,
		  format : 'yyyy/mm/dd'
		});
		$('#datepickerC2').datepicker({
		  autoclose: true,
		  format : 'yyyy/mm/dd'
		});
		
		$('#datepickerProD1').datepicker({
		  autoclose: true,
		  format : 'yyyy/mm/dd'
		});
		$('#datepickerProD2').datepicker({
		  autoclose: true,
		  format : 'yyyy/mm/dd'
		});
		$('#datepickerProD3').datepicker({
		  autoclose: true,
		  format : 'yyyy/mm/dd'
		});
		$('#datepickerProD4').datepicker({
		  autoclose: true,
		  format : 'yyyy/mm/dd'
		});
		$('#datepickerProDT1').datepicker({
		  autoclose: true,
		  format : 'yyyy/mm/dd'
		});
		$('#datepickerProDT2').datepicker({
		  autoclose: true,
		  format : 'yyyy/mm/dd'
		});
		$('#datepickerProT1').datepicker({
		  autoclose: true,
		  format : 'yyyy/mm/dd'
		});
		$('#datepickerProT2').datepicker({
		  autoclose: true,
		  format : 'yyyy/mm/dd'
		});
		$('#datepickerProL1').datepicker({
		  autoclose: true,
		  format : 'yyyy/mm/dd'
		});
		$('#datepickerProL2').datepicker({
		  autoclose: true,
		  format : 'yyyy/mm/dd'
		});
		$('#datepickerProL3').datepicker({
		  autoclose: true,
		  format : 'yyyy/mm/dd'
		});
		$('#datepickerProL4').datepicker({
		  autoclose: true,
		  format : 'yyyy/mm/dd'
		});
		$('#datepickerProR1').datepicker({
		  autoclose: true,
		  format : 'yyyy/mm/dd'
		});
		$('#datepickerProR2').datepicker({
		  autoclose: true,
		  format : 'yyyy/mm/dd'
		});
		$('#datepickerProR3').datepicker({
		  autoclose: true,
		  format : 'yyyy/mm/dd'
		});
		$('#datepickerProR4').datepicker({
		  autoclose: true,
		  format : 'yyyy/mm/dd'
		});
		$('#datepickerProR5').datepicker({
		  autoclose: true,
		  format : 'yyyy/mm/dd'
		});
		$('#datepickerProR6').datepicker({
		  autoclose: true,
		  format : 'yyyy/mm/dd'
		});
		$("#datemask").inputmask("yyyy/mm/dd", {"placeholder": "yyyy/mm/dd"});
		$("[data-mask]").inputmask();
	  });
	
	
//KPI
    function format (num) {
        return (num.toFixed(2) + '').replace(/\d{1,3}(?=(\d{3})+(\.\d*)?$)/g, '$&,');
    }

	function initPrimaryBox(){	
		
		$.ajax({
             type: "GET",
             url: "/CUSTOMER_INFO_DISPLAY/"+custcod,
             data: {
			 //custCode:cust_Code
			 },
             dataType: "json",
             success: function(data){
					$("div[name='b_CN']").html(data[0].customer_full_name);
					$("div[name='b_CC']").html(data[0].customer_code);
					$("div[name='b_CL']").html(data[0].relationship_level);
					$("div[name='b_RR']").html(data[0].credit_rating);
					$("div[name='b_AB']").html(format(data[0].account_balance_lcy_sum));
					$("div[name='b_LB']").html(format(data[0].balance_lcy_sum));
					$("div[name='b_LL']").html(format(data[0].available_amount_lcy_sum));
                      },
			 error: function(request) {
                    //alert("Connection error");
                }
         });
	}
	
	
//Portfolio------------------------------------------------------------------------------------------------------------

//Deposit Outstanding Amount(Pie chart)		
	var pieIndex;
	var option_pieArray = new Array();	
	var pieChart = echarts.init(document.getElementById('depositBalance'));
	function initPortfolioPieChart(){
		pieChart.showLoading();
		pieIndex = 1;
		var option_pie_1 = {
			title: {
				show : false,
				text : ''
			},
			tooltip: {
				trigger: 'item',
				formatter: "{a} <br/>{b}: {c} ({d}%)"
			},
			legend: {
				orient: 'vertical',
				x: 'left',
				data : []
			},
			series: [{
				name:'Balance',
				type:'pie',
				radius: ['50%', '70%'],
				avoidLabelOverlap: false,
				label: {
					normal: {
						show: false,
						position: 'center'
					},
					emphasis: {
						show: true,
						textStyle: {
							fontSize: '30',
							fontWeight: 'bold'
						}
					}
				},
				labelLine: {
					normal: {
						show: false
					}
				},
				data:[]
			}]
		}; 
		$.ajax({  
			type : "GET",  
			url : "/DEPOSIT_ACCOUNT_TYPE_BALANCE_LCY_SUM/getCcy",  
			data : {customer_code:custcod},
			dataType : "json",
			success : function(result) {  
				if (result) {  
					var typeArray = new Array();
					var pieChartDataArray = new Array();
					for (var aData in result){
						typeArray.push(result[aData].type);
						pieChartDataArray.push({'value':result[aData].sum,'name':result[aData].type});
					}										
					option_pie_1.legend.data = typeArray; 
					option_pie_1.series[0].data = pieChartDataArray;

					pieChart.hideLoading();  
					pieChart.setOption(option_pie_1);
					
					option_pieArray.push(option_pie_1);
				}  
			},  
			error : function(errorMsg) {  
				//alert("get pie chart response failed!");  
				pieChart.hideLoading(); 			
			}  
		});  
	}
	
	pieChart.on('click', function (params) {
		//var value = params.value; //
		var name = params.name; //
		var index = pieIndex;
		var title = option_pieArray[index-1].title.text;
		var url,data;
		var option_pie = {
			title: {
				show : false,
				text : ''
			},
			tooltip: {
				trigger: 'item',
				formatter: "{a} <br/>{b}: {c} ({d}%)"
			},
			legend: {
				orient: 'vertical',
				x: 'left',
				data : []
			},
			series: [{
				name: 'Balance',
				type:'pie',
				radius: ['50%', '70%'],
				avoidLabelOverlap: false,
				label: {
					normal: {
						show: false,
						position: 'center'
					},
					emphasis: {
						show: true,
						textStyle: {
							fontSize: '30',
							fontWeight: 'bold'
						}
					}
				},
				labelLine: {
					normal: {
						show: false
					}
				},
				data:[]
			}]
		}; 
	
		pieChart.showLoading();
		
		if (index == 2){
			pieChart.hideLoading();
			return;
		} 
		
		if (index == 1){
			url = "/DEPOSIT_ACCOUNT_TYPE_BALANCE_LCY_SUM/getAccountType";
			data = {customer_code:custcod,currency:name};
			option_pie.toolbox = {  
				show : true,  
				feature : {  
					myBackBtn1: {
						show: true,
						title: 'back',
						icon: 'image://../image/back.png',
						onclick: function (){
						    pieIndex--;
							pieChart.setOption(option_pieArray[0],true);
							$('#pieChartLocation').html('');
						}
					}
				}  
			}
		}
		
		$.ajax({  
			type : "GET",  
			url : url,  
			data : data,
			dataType : "json",
			success : function(result) {  
				if (result) {  
					pieIndex++;
					var typeArray = new Array();
					var pieDataArray = new Array();
					for (var aData in result){
						typeArray.push(result[aData].type);
						pieDataArray.push({'value':result[aData].sum,'name':result[aData].type});
					}
					option_pieArray[index] = option_pie;
					
					option_pieArray[index].title.text = title+' > '+name;
					option_pieArray[index].legend.data = typeArray; 
					option_pieArray[index].series[0].data = pieDataArray;
					
					pieChart.hideLoading();  
					pieChart.setOption(option_pieArray[index],true); 
					$('#pieChartLocation').html(option_pieArray[index].title.text);	
				}  
			},  
			error : function(errorMsg) {  
				//alert("get pie chart response failed!");  
				pieChart.hideLoading(); 			
			}  
		});  

	});


//Loan Outstanding Amount(Bar chart)	
	var barIndex;
	var option_barArray = new Array();
    var barChart = echarts.init(document.getElementById('loanBalance'));

	function initPortfolioBarChart() { 
		barChart.showLoading();
		barIndex = 1;		
		var option_bar_1 = {
			title: {
				show : false,
				text : ''
			},
			grid: [
				{
					bottom : '20%',
					containLabel: true
				}
			],
            tooltip: {},
            legend: {
                data:['Balance']
            },
			xAxis: {
				boundaryGap : ['20%', '20%'],
				axisLabel:{
					interval:0,
					rotate:30,
					margin:5
				},
				data : []
			},
            yAxis: {
				type : 'value',
				scale : true
			},
            series: [{
				name: 'Balance',
				type: 'bar',
				data : []
			}]
		};

		$.ajax({  
			type : "GET",  
			url : "/Loan/getLoan_Ccy_SumByCustCode",  
			data : {customer_code:custcod},
			dataType : "json",
			success : function(result) {  
				if (result) {  
					var typeArray = new Array();
					var balanceArray = new Array();
					for (var aData in result){
						typeArray.push(result[aData].type);
						balanceArray.push(result[aData].sum);
					}										
					option_bar_1.xAxis.data = typeArray;  
					option_bar_1.series[0].data = balanceArray;  
 
					barChart.hideLoading();  
					barChart.setOption(option_bar_1); 
					
					option_barArray.push(option_bar_1);
				}  
			},  
			error : function(errorMsg) {  
				//alert("get bar chart response failed!");  
				barChart.hideLoading();				
			}  
		});  
	}  
	
	barChart.on('click', function (params) {
		//var value = params.value; //
		var name = params.name; //
		var index = barIndex;
		var title = option_barArray[index-1].title.text;
		var url,data,result;
		var option_bar = {
			title: {
				show : false,
				text : ''
            },
			grid: [
				{
					bottom : '20%',
					containLabel: true
				}
			],
            tooltip: {},
            legend: {
                data:['Balance']
            },
			xAxis: {
				boundaryGap : ['20%', '20%'],
				axisLabel:{
					interval:0,
					rotate:30,
					margin:5
				},
				data : []
			},
            yAxis: {
				type : 'value',
				scale : true
			},
            series: [{
				name: 'Balance',
				type: 'bar',
				data : []
			}]
		};
		
		barChart.showLoading();
		
		if (index == 2){
			barChart.hideLoading();
			return;
		} 
		
		if (index == 1){
			url = "/Loan/getLoan_Type_SumByCustCode_CCY";
			data = {customer_code:custcod,currency:name};
			option_bar.toolbox = {  
				show : true,  
				feature : {  
					myBackBtn1: {
						show: true,
						title: 'back',
						icon: 'image://../image/back.png',
						onclick: function (){
						    barIndex--;
							barChart.setOption(option_barArray[0],true);
							$('#barChartLocation').html('');
						}
					}
				}  
			}
		}
		
		$.ajax({  
			type : "GET",  
			url : url,  
			data : data,
			dataType : "json",
			success : function(result) {  
				if (result) {  
				    barIndex++;
					var typeArray = new Array();
					var balanceArray = new Array();
					for (var aData in result){
						typeArray.push(result[aData].type);
						balanceArray.push(result[aData].sum);
					}				
					option_barArray[index] = option_bar;
	
					option_barArray[index].title.text = title+' > '+name;
					option_barArray[index].xAxis.data = typeArray;  
					option_barArray[index].series[0].data = balanceArray;  

					barChart.hideLoading();
					barChart.setOption(option_barArray[index],true); 
					$('#barChartLocation').html(option_barArray[index].title.text);						
				}  
			},  
			error : function(errorMsg) {  
				//alert("get bar chart response failed!");  
				barChart.hideLoading(); 			
			}  
		});  
	});

	
//Deposit Account Information(Table)	
	var searchDepositParameters = "{}";	
	var depositDataTable;
	function initDepositTable(){	
		depositDataTable = $("#depositInformationTable").DataTable({
			"processing": true,
			"serverSide": true,
			"searching": false,
			"scrollX": true,
			"ajax": {
				"url": "/DEPOSIT_ACCOUNT_INFO/getDeposit",
				"data": function ( d ) {
					if (depositDataTable!=null){
						order_column_index = depositDataTable.order()[0][0];
						switch(order_column_index)
						{
						case 0:
						    d.orderCol = "Branch";
						    break;
						case 1:
						    d.orderCol = "DP_ACCOUNT_NO";
						    break;
						case 2:
						    d.orderCol = "ACCOUNT_TYPE";
						    break;
						case 3:
						    d.orderCol = "CURRENCY";
						    break;
						case 4:
						    d.orderCol = "OPEN_DATE";
						    break;
						case 5:
						    d.orderCol = "MATURITY_DATE";
						    break;
						case 6:
						    d.orderCol = "ACCOUNT_BALANCE";
						    break;
						case 7:
						    d.orderCol = "ACCOUNT_STATUS";
						    break;							
						default:
							break;
						}
						d.orderDir = depositDataTable.order()[0][1];
					}
					else{
						d.orderCol = "Branch";
						d.orderDir = "asc";
					}
					d.search = searchDepositParameters;
					d.customer_code = custcod;
				}
			}
		});
	}	
	
	function initDepositSearchTable(){		
		var strBranchOptions ="";
		var strProductOptions = "";
		var strCurrencyOptions = "";
		var strStatusOptions = "";
		$.ajax({  
			type : "GET",   
			url : "/DEPOSIT_ACCOUNT_INFO/getDEPOSIT_ACCOUNT_INFO_Branch/"+custcod,  
			data : {},  
			dataType : "json", 
			success : function(result) {   	
				if (result){
					for (var aData in result){
						strBranchOptions += "<option>"+result[aData]+"</option>";
					}
				}
				$("#depositBranchSelect").html(strBranchOptions);
			},  
			error : function(errorMsg) {  
				//alert("get deposit branch select data response failed!");  			
			}  
		});
		$.ajax({  
			type : "GET",   
			url : "/DEPOSIT_ACCOUNT_INFO/getDEPOSIT_ACCOUNT_INFO_Account_type/"+custcod,  
			data : {},  
			dataType : "json",   
			success : function(result) {   	
				if (result){
					for (var aData in result){
						strProductOptions += "<option>"+result[aData]+"</option>";
					}
				}
				$("#depositProductSelect").html(strProductOptions);
			},  
			error : function(errorMsg) {  
				//alert("get deposit product select data response failed!");  			
			}  
		});
		$.ajax({  
			type : "GET",  
			url : "/DEPOSIT_ACCOUNT_INFO/getDEPOSIT_ACCOUNT_INFO_Currency/"+custcod,  
			data : {},  
			dataType : "json",
			success : function(result) {   	
				if (result){
					for (var aData in result){
						strCurrencyOptions += "<option>"+result[aData]+"</option>";
					}
				}
				$("#depositCurrencySelect").html(strCurrencyOptions);
			},  
			error : function(errorMsg) {  
				//alert("get deposit currency select data response failed!");  			
			}  
		});
		$.ajax({  
			type : "GET",   
			url : "/DEPOSIT_ACCOUNT_INFO/getDEPOSIT_ACCOUNT_INFO_Account_status/"+custcod,  
			data : {},  
			dataType : "json",  
			success : function(result) {   	
				if (result){
					for (var aData in result){
						strStatusOptions += "<option>"+result[aData]+"</option>";
					}
				}
				$("#depositStatusSelect").html(strStatusOptions);
			},  
			error : function(errorMsg) {  
				//alert("get deposit status select data response failed!");  			
			}  
		});
	}	


//Loan Information(Table)
	var searchLoanParameters = "{}";
	var loanDataTable;
	function initLoanTable(){
		loanDataTable = $("#loanInformationTable").DataTable({
			"processing": true,
			"serverSide": true,
			"searching": false,
			"scrollX": true,
			"ajax": {
				"url": "/Loan/getLoanInfo",
				"data": function ( d ) {
					if (loanDataTable!=null){
						order_column_index = loanDataTable.order()[0][0];
						switch(order_column_index)
						{
						case 0:
						    d.orderCol = "Branch";
						    break;
						case 1:
						    d.orderCol = "LN_Account_No";
						    break;
						case 2:
						    d.orderCol = "Loan_Type";
						    break;
						case 3:
						    d.orderCol = "Line_No";
						    break;
						case 4:
						    d.orderCol = "Principal_Currency";
						    break;
						case 5:
						    d.orderCol = "Principal_Amount";
						    break;
						case 6:
						    d.orderCol = "Value_Date";
						    break;
						case 7:
						    d.orderCol = "Maturity_Date";
						    break;	
						case 8:
						    d.orderCol = "Balance_Currency";
						    break;
						case 9:
						    d.orderCol = "Balance";
						    break;
						case 10:
						    d.orderCol = "Account_Status";
						    break;							
						default:
							break;
						}					
						d.orderDir = loanDataTable.order()[0][1];
					}
					else{
						d.orderCol = "Branch";
						d.orderDir = "asc";
					}
					d.search = searchLoanParameters;
					d.customer_code = custcod;
				}
			}
		});
	}
	
	function initLoanSearchTable(){
		var strBranchOptions ="";
		var strPrincipalCurrencyOptions = "";
		var strBalanceCurrencyOptions = "";
		var strLoanTypeOptions = "";
		var strStatusOptions = "";
		$.ajax({  
			type : "GET",   
			url : "/Loan/getLoan_BranchByCustCode/"+custcod,  
			data : {},  
			dataType : "json", 
			success : function(result) {   	
				if (result){
					for (var aData in result){
						strBranchOptions += "<option>"+result[aData]+"</option>";
					}
				}
				$("#loanBranchSelect").html(strBranchOptions);
			},  
			error : function(errorMsg) {  
				//alert("get loan branch select data response failed!");  			
			}  
		});
		$.ajax({  
			type : "GET",   
			url : "/Loan/getLoan_PrinCCYByCustCode/"+custcod,  
			data : {},  
			dataType : "json",   
			success : function(result) {   	
				if (result){
					for (var aData in result){
						strPrincipalCurrencyOptions += "<option>"+result[aData]+"</option>";
					}
				}
				$("#loanPrincipalCurrencySelect").html(strPrincipalCurrencyOptions);
			},  
			error : function(errorMsg) {  
				//alert("get loan principal currency select data response failed!");  			
			}  
		});
		$.ajax({  
			type : "GET",  
			url : "/Loan/getLoan_BalCCYByCustCode/"+custcod,  
			data : {},  
			dataType : "json",
			success : function(result) {   	
				if (result){
					for (var aData in result){
						strBalanceCurrencyOptions += "<option>"+result[aData]+"</option>";
					}
				}
				$("#loanBalanceCurrencySelect").html(strBalanceCurrencyOptions);
			},  
			error : function(errorMsg) {  
				//alert("get loan balance currency select data response failed!");  			
			}  
		});
		$.ajax({  
			type : "GET",   
			url : "/Loan/getLoan_TypeByCustCode/"+custcod,  
			data : {},  
			dataType : "json",  
			success : function(result) {   	
				if (result){
					for (var aData in result){
						strLoanTypeOptions += "<option>"+result[aData]+"</option>";
					}
				}
				$("#loanTypeSelect").html(strLoanTypeOptions);
			},  
			error : function(errorMsg) {  
				//alert("get loan type select data response failed!");  			
			}  
		});
		$.ajax({  
			type : "GET",   
			url : "/Loan/getLoan_AccStatusByCustCode/"+custcod,  
			data : {},  
			dataType : "json",  
			success : function(result) {   	
				if (result){
					for (var aData in result){
						strStatusOptions += "<option>"+result[aData]+"</option>";
					}
				}
				$("#loanStatusSelect").html(strStatusOptions);
			},  
			error : function(errorMsg) {  
				//alert("get loan status select data response failed!");  			
			}  
		});
	}
	

//Portfolio------------------------------------------------------------------------------------------------------------


//Customer Profile-----------------------------------------------------------------------------------------------------
	
//Basic Information(Display)
	function initBasicInformationDisplay(){
		$.ajax({  
			type : "GET",  
			url : "/CustomerInfoMain/getCustomerInfoMainByCustCode",  
			data : {customer_code:custcod},
			dataType : "json",
			success : function(result) {  
				if (result) {  
					$("#basicInformationDisplay tr td").eq(0).html(result.branch);
					$("#basicInformationDisplay tr td").eq(1).html(result.customer_code);
					$("#basicInformationDisplay tr td").eq(2).html(result.customer_full_name);
					$("#basicInformationDisplay tr td").eq(3).html(result.customer_short_name);
					$("#basicInformationDisplay tr td").eq(4).html(result.identity_no);
					$("#basicInformationDisplay tr td").eq(5).html(result.customer_status);
					$("#basicInformationDisplay tr td").eq(6).html(result.close_date);
					$("#basicInformationDisplay tr td").eq(7).html(result.open_date);
					$("#basicInformationDisplay tr td").eq(8).html(result.country_codel);
					$("#basicInformationDisplay tr td").eq(9).html(result.credit_rating);
					$("#basicInformationDisplay tr td").eq(10).html(result.customer_type);
					$("#basicInformationDisplay tr td").eq(11).html(result.email_address);
					$("#basicInformationDisplay tr td").eq(12).html(result.fax_no);
					$("#basicInformationDisplay tr td").eq(13).html(result.parent_customer_code);
					$("#basicInformationDisplay tr td").eq(14).html(result.relationship_level);
					$("#basicInformationDisplay tr td").eq(15).html(result.start_date);
					$("#basicInformationDisplay tr td").eq(16).html(result.tel_no);
				}  
			},  
			error : function(errorMsg) {  
				//alert("get basic information response failed!");  		
			}  
		}); 
	}
	
	
//Risk Rating(Display)
	function initRiskRatingDisplay(){
		$.ajax({  
			type : "GET",  
			url : "/ExternalRating/getExternalRatingByCustCode",  
			data : {customer_code:custcod},
			dataType : "json",
			success : function(result) {  
				if (result) {  
					$("#riskRatingDisplay tr td").eq(0).html(result.fcy_Rating);
					$("#riskRatingDisplay tr td").eq(1).html(result.lcy_Rating);
					$("#riskRatingDisplay tr td").eq(2).html(result.rating_Date);
					$("#riskRatingDisplay tr td").eq(3).html(result.rating_Agency);
				}  
			},  
			error : function(errorMsg) {  
				//alert("get risk rating response failed!");  		
			}  
		}); 
	}
	
	
//Company Information(Display)
	function initCompanyInformationDisplay(){
		$.ajax({  
			type : "GET",  
			url : "/CompanyProfileExtent/getCompanyInformationByCustCode",  
			data : {customer_code:custcod},
			dataType : "json",
			success : function(result) {  
				if (result) {  
					$("#companyInformationDisplay tr td").eq(0).html(result.industry_Code_Head_Office);
					$("#companyInformationDisplay tr td").eq(1).html(result.industry_Code_Regulatory);
					$("#companyInformationDisplay tr td").eq(2).html(result.sales_Vol);
					$("#companyInformationDisplay tr td").eq(3).html(result.market_Share);
					$("#companyInformationDisplay tr td").eq(4).html(result.product_Array);
					$("#companyInformationDisplay tr td").eq(5).html(result.reputation);
					$("#companyInformationDisplay tr td").eq(6).html(result.network);
					$("#companyInformationDisplay tr td").eq(7).html(result.threats_Challenges);
					$("#companyInformationDisplay tr td").eq(8).html(result.success_Factors);
					$("#companyInformationDisplay tr td").eq(9).html(result.potential_Gap);
				}  
			},  
			error : function(errorMsg) {  
				//alert("get company information response failed!");  		
			}  
		}); 
	}
	
	
//Company Registration(Display)
	function initCompanyRegistrationDisplay(){
		$.ajax({  
			type : "GET",  
			url : "/CompanyProfileExtent/getCompanyRegistrationByCustCode",  
			data : {customer_code:custcod},
			dataType : "json",
			success : function(result) {  
				if (result) {  
					$("#companyRegistrationDisplay tr td").eq(0).html(result.parent_Subsidiary_Type);
					$("#companyRegistrationDisplay tr td").eq(1).html(result.registration_Type);
					$("#companyRegistrationDisplay tr td").eq(2).html(result.registration_No);
					$("#companyRegistrationDisplay tr td").eq(3).html(result.registration_Date);
					$("#companyRegistrationDisplay tr td").eq(4).html(result.business_License_Exp_Date);
					$("#companyRegistrationDisplay tr td").eq(5).html(result.org_Code);
					$("#companyRegistrationDisplay tr td").eq(6).html(result.legal_Rep);
					$("#companyRegistrationDisplay tr td").eq(7).html(result.business_Area);
					$("#companyRegistrationDisplay tr td").eq(8).html(result.tax_No_National);
					$("#companyRegistrationDisplay tr td").eq(9).html(result.tax_No_Local);
					$("#companyRegistrationDisplay tr td").eq(10).html(result.registered_Capital);
					$("#companyRegistrationDisplay tr td").eq(11).html(result.listed_Company_Status);
					$("#companyRegistrationDisplay tr td").eq(12).html(result.stock_Exchange);
					$("#companyRegistrationDisplay tr td").eq(13).html(result.stock_Ticker);
				}  
			},  
			error : function(errorMsg) {  
				//alert("get company registration response failed!");  		
			}  
		}); 
	}
	

//Customer Group(Tree map)	
	var customerGroupTreeDepth = 0 ; 	
	function getDepthOfTree(node,deep) {
		if (node.children != null) {
			for (var i = 0; i < node.children.length; ++i) {
				getDepthOfTree(node.children[i],deep+1);
			}
		}
		else{
			customerGroupTreeDepth = (customerGroupTreeDepth > deep ? customerGroupTreeDepth : deep);
			return;
		}
	}
	
	function initCustomerGroupTreeMap(){
		$.ajax({  
			type : "GET",  
			url : "/CustomerGroup/getCustomerGroupByCustCode",
			data : {customer_code:custcod},			
			dataType : "json",
			success : function(result) {  
				if (result) {  
					var treeData = transData(result,'custcod','prtynop','children')[0];
					getDepthOfTree(treeData,customerGroupTreeDepth);
					var height = (customerGroupTreeDepth+1)*120;
					BuildVerticaLTree(treeData, "#customerGroupTreeMap", 960, height);
				}  
			},  
			error : function(errorMsg) {  
				//alert("get customer group response failed!");  		
			}  
		}); 
	}
	

//Related Parties(Table)	
	function initRelatedPartiesTable(){	
		var relatedPartiesDataTable = $("#relatedPartiesTable").DataTable({
			"processing": true,
			"serverSide": true,
			"searching": false,
			"scrollX": true,
			"ajax": {
				"url": "/RelatedParty/getRelatedParty",
				"data": function ( d ) {
					if (relatedPartiesDataTable!=null){
						order_column_index = relatedPartiesDataTable.order()[0][0];
						switch(order_column_index)
						{
						case 0:
						    d.orderCol = "customer_code";
						    break;
						case 1:
						    d.orderCol = "related_party";
						    break;
						case 2:
						    d.orderCol = "related_party_name";
						    break;
						case 3:
						    d.orderCol = "relationship";
						    break;
						case 4:
						    d.orderCol = "Shareholding";
						    break;					
						default:
							break;
						}
						d.orderDir = relatedPartiesDataTable.order()[0][1];
					}
					else{
						d.orderCol = "customer_code";
						d.orderDir = "asc";
					}
					d.search = "{}";
					d.customer_code = custcod;
				}
			}
		});
	}

	
//Background Check(Table)
	function initBackgroundCheckTable(){	
		var backgroundCheckDataTable = $("#backgroundCheckTable").DataTable({
			"processing": true,
			"serverSide": true,
			"searching": false,
			"scrollX": true,
			"ajax": {
				"url": "/BackgroundCheck/getBackgroundCheck",
				"data": function ( d ) {
					if (backgroundCheckDataTable!=null){
						order_column_index = backgroundCheckDataTable.order()[0][0];
						switch(order_column_index)
						{
						case 0:
						    d.orderCol = "CHECK_DATE";
						    break;
						case 1:
						    d.orderCol = "CHECK_ITEM";
						    break;
						case 2:
						    d.orderCol = "CHECK_RESULT";
						    break;	
						default:
							break;
						}
						d.orderDir = backgroundCheckDataTable.order()[0][1];
					}
					else{
						d.orderCol = "CHECK_DATE";
						d.orderDir = "asc";
					}
					d.search = "{}";
					d.customer_code = custcod;
				}
			}
		});
	}
	
	
//Customer Profile-----------------------------------------------------------------------------------------------------


//Product--------------------------------------------------------------------------------------------------------------	

//Liquidity(Bar chart)
	var liquidityChart = echarts.init(document.getElementById('liquidityBar'));
	function initLiquidity(){
		var option = {
			tooltip : {
				trigger: 'axis',
				axisPointer : {          
					type : 'shadow'       
				}
			},
			legend: {
				data:['Deposit', 'Loan']
			},
			grid: [
				{
					bottom : '10%',
					containLabel: true
				}
			],
			xAxis: {
				//boundaryGap : ['20%', '20%'],
				axisLabel:{
					interval:0,
					rotate:30,
					margin:5
				},
				type : 'value',
				data : []
			},
			yAxis : [
				{
					type : 'category',
					axisTick : {show: false},
					data : []
				}
			],
			series : [
				{
					name:'Deposit',
					type:'bar',
					stack: 'Deposit',
					label: {
						normal: {
							show: true,
							position: 'right',
							offset: [0,8]
						}
					},
					data:[]
				},
				{
					name:'Loan',
					type:'bar',
					stack: 'Deposit',
					label: {
						normal: {
							show: true,
							position: 'left',
							offset: [0,8]
						}
					},
					data:[]
				}
			]
		};
		var ccy;
		var strLiquidity = "";
		var tenorArray = [];
		
		$.ajax({  
			type : "GET",   
			url : "/PRODUCT_LIQUIDITY/getCcy",  
			data : {"customer_code":custcod},  
			dataType : "json", 
			success : function(result) {   	
				if (result){
					strLiquidity += "<table><tbody>";
					for (var aData in result){
						strLiquidity += "<tr><td><label><input type='radio' name='liquidityR' class='flat-red' value='"+result[aData].trim()+"'>"+result[aData].trim()+"</label></td></tr>";
					}
					strLiquidity += "</tbody></table>";
				}
				$("#liquidityRadio").html(strLiquidity);
				
				$('#liquidityRadio input[type="radio"].flat-red').iCheck({
				    checkboxClass: 'icheckbox_flat-green',
				    radioClass: 'iradio_flat-green'
				});
				
				$('#liquidityRadio input').on('ifChecked', function(){
					ccy = $(this).val();
					$('#liquidityBar').show();
					loadLiquidityBarChart(option,ccy,tenorArray);			
				}); 
			},  
			error : function(errorMsg) {  
				//alert("get liquidity currency data response failed!");  			
			}  
		});
		
		$.ajax({
			type : "GET",
			url : "/PRODUCT_LIQUIDITY/getTenor",
			data : {"customer_code":custcod},
			dataType : "json",
			success : function(result) {
				if (result){
					option.yAxis[0].data = result;
					tenorArray = result;
				}
				
				liquidityChart.setOption(option);
			},
			error : function(errorMsg) {
				//alert("get liquidity data response failed!");
			}
		});
	}
	
	function loadLiquidityBarChart(option,currency,tenors){
		liquidityChart.showLoading();

		$.ajax({
			type : "GET",
			url : "/PRODUCT_LIQUIDITY/getDepAmt",
			data : {"customer_code":custcod,"ccy":currency},
			dataType : "json",
			success : function(result) {
				if (result){
					var depAmtDataArray = new Array();
					var tenor,amount;
					for (var i = 0;i < tenors.length; ++i){
						amount = "-";
						tenor = tenors[i];
						for(var aData in result){
							if (tenor == result[aData].tenor){
								amount = result[aData].amount;
								break;
							}								
						}
						depAmtDataArray.push(amount);
					}
					option.series[0].data = depAmtDataArray;
				}

				liquidityChart.hideLoading();
				liquidityChart.setOption(option);
			},
			error : function(errorMsg) {
				//alert("get liquidity data response failed!");
			}
		});

		$.ajax({
			type : "GET",
			url : "/PRODUCT_LIQUIDITY/getLoanAmt",
			data : {"customer_code":custcod,"ccy":currency},
			dataType : "json",
			success : function(result) {
				if (result){
					var loanAmtDataArray = new Array();
					var tenor,amount;
					for (var i = 0;i < tenors.length; ++i){
						amount = "-";
						tenor = tenors[i];
						for(var aData in result){
							if (tenor == result[aData].tenor){
								amount = "-"+result[aData].amount;
								break;
							}								
						}
						loanAmtDataArray.push(amount);
					}
					option.series[1].data = loanAmtDataArray;
				}
				
				liquidityChart.setOption(option);
			},
			error : function(errorMsg) {
				//alert("get liquidity data response failed!");
			}
		});
	}	
	
	
//Account Balance(Table)
	var searchProDepositParameters="{}";
	var proDepositDataTable;
	var ifNeedClearD = false;
	function initProDepositTable(){	
		proDepositDataTable = $("#proDepositTable").DataTable({
			"processing": true,
			"serverSide": true,
			"searching": false,
			"scrollX": true,
			"ajax": {
				"url": "/DEPOSIT_ACCOUNT_INFO/getDeposit",
				"data": function ( d ) {
					if (proDepositDataTable!=null){
						order_column_index = proDepositDataTable.order()[0][0];
						switch(order_column_index)
						{
						case 0:
						    d.orderCol = "Branch";
						    break;
						case 1:
						    d.orderCol = "DP_ACCOUNT_NO";
						    break;
						case 2:
						    d.orderCol = "ACCOUNT_TYPE";
						    break;
						case 3:
						    d.orderCol = "CURRENCY";
						    break;
						case 4:
						    d.orderCol = "OPEN_DATE";
						    break;
						case 5:
						    d.orderCol = "MATURITY_DATE";
						    break;
						case 6:
						    d.orderCol = "ACCOUNT_BALANCE";
						    break;
						case 7:
						    d.orderCol = "ACCOUNT_STATUS";
						    break;							
						default:
							break;
						}
						d.orderDir = proDepositDataTable.order()[0][1];
					}
					else{
						d.orderCol = "Branch";
						d.orderDir = "asc";
					}
					d.search = searchProDepositParameters;
					d.customer_code = custcod;
				}
			}
		});
	}
	
	function initProDepositSearchTable(){		
		var strBranchOptions ="";
		var strProductOptions = "";
		var strCurrencyOptions = "";
		var strStatusOptions = "";
		$.ajax({  
			type : "GET",   
			url : "/DEPOSIT_ACCOUNT_INFO/getDEPOSIT_ACCOUNT_INFO_Branch/"+custcod,  
			data : {},  
			dataType : "json", 
			success : function(result) {   	
				if (result){
					for (var aData in result){
						strBranchOptions += "<option>"+result[aData]+"</option>";
					}
				}
				$("#pro_depositBranchSelect").html(strBranchOptions);
			},  
			error : function(errorMsg) {  
				//alert("get deposit branch select data response failed!");  			
			}  
		});
		$.ajax({  
			type : "GET",   
			url : "/DEPOSIT_ACCOUNT_INFO/getDEPOSIT_ACCOUNT_INFO_Account_type/"+custcod,  
			data : {},  
			dataType : "json",   
			success : function(result) {   	
				if (result){
					for (var aData in result){
						strProductOptions += "<option>"+result[aData]+"</option>";
					}
				}
				$("#pro_depositProductSelect").html(strProductOptions);
			},  
			error : function(errorMsg) {  
				//alert("get deposit product select data response failed!");  			
			}  
		});
		$.ajax({  
			type : "GET",  
			url : "/DEPOSIT_ACCOUNT_INFO/getDEPOSIT_ACCOUNT_INFO_Currency/"+custcod,  
			data : {},  
			dataType : "json",
			success : function(result) {   	
				if (result){
					for (var aData in result){
						strCurrencyOptions += "<option>"+result[aData]+"</option>";
					}
				}
				$("#pro_depositCurrencySelect").html(strCurrencyOptions);
			},  
			error : function(errorMsg) {  
				//alert("get deposit currency select data response failed!");  			
			}  
		});
		$.ajax({  
			type : "GET",   
			url : "/DEPOSIT_ACCOUNT_INFO/getDEPOSIT_ACCOUNT_INFO_Account_status/"+custcod,  
			data : {},  
			dataType : "json",  
			success : function(result) {   	
				if (result){
					for (var aData in result){
						strStatusOptions += "<option>"+result[aData]+"</option>";
					}
				}
				$("#pro_depositStatusSelect").html(strStatusOptions);
			},  
			error : function(errorMsg) {  
				//alert("get deposit status select data response failed!");  			
			}  
		});
	}

	$('#proDepositTable').on( 'draw.dt', function () {
		var linkCondition;
		if (ifNeedClearD){
			searchDepositTranParameters = "{\"branch_array\":[],\"transaction_type_array\":[],\"currency_array\":[],\"dr_indicator_array\":[],\"account_no\":\"\",\"transaction_date\":\"\",\"transaction_date_max\":\"\",\"transaction_amount\":\"\",\"transaction_amount_max\":\"\",\"dep_serial_no\":\"\"}";
			depositTranDataTable.ajax.reload();	
			ifNeedClearD = false;
		}
		
		$("#proDepositTable tbody tr").on( 'click', function () {
			if (!ifNeedRemoveLinkD){
				linkCondition = this.childNodes[1].innerHTML;
				var flag = jQuery(this).hasClass("link_condition");
				ifNeedClearD = false;
				
				var len = $('#proDepositTable tbody tr').length;
				for (var i = 0;i < len;++i){
					$('#proDepositTable tbody tr').eq(i).removeClass("link_condition");
					$('#proDepositTable tbody tr').eq(i).removeAttr("style");
				}
				if (!flag){
					jQuery(this).addClass("link_condition");
					jQuery(this).css("background-color","yellow");
					ifNeedClearD = true;
				}
				
				//jQuery(this).toggleClass("link_condition");
				if (this.className.indexOf("link_condition") < 0){
					searchDepositTranParameters = "{\"branch_array\":[],\"transaction_type_array\":[],\"currency_array\":[],\"dr_indicator_array\":[],\"account_no\":\"\",\"transaction_date\":\"\",\"transaction_date_max\":\"\",\"transaction_amount\":\"\",\"transaction_amount_max\":\"\",\"dep_serial_no\":\"\"}";
				}
				else{
					searchDepositTranParameters = "{\"branch_array\":[],\"transaction_type_array\":[],\"currency_array\":[],\"dr_indicator_array\":[],\"account_no\":\""+linkCondition+"\",\"transaction_date\":\"\",\"transaction_date_max\":\"\",\"transaction_amount\":\"\",\"transaction_amount_max\":\"\",\"dep_serial_no\":\"\"}";
				}
				depositTranDataTable.ajax.reload();	
			}
		});
	});

	
//Deposit Transaction(Line chart)	
	var lineChart = echarts.init(document.getElementById('depositTransaction'));	
	var lineChartxAxisArray;
	var lineChartseriesArrays;
	function initLineChart() {  
		lineChart.showLoading();
		// specify the options and fixed data for the chart   
		var option_line = {
			title: {
			},
			tooltip : {
				trigger: 'axis'
			},
			legend: {
				data:[]
			},
			grid: [
				{
					bottom : '10%',
					containLabel: true
				}
			],
			xAxis : [
				{
					type : 'category',
					boundaryGap : false,
					axisLine: {onZero: false},
					axisLabel:{
						interval:0,
						rotate:30,
						margin:10
					},
					
					data : []
				}
			],
			yAxis : [
				{
					type : 'value',
					name : 'Transaction Amount',
					scale : true
				}
			],
			series : []
		};
		
		//get xAxis data  
		var transactionDateArray = new Array();
		$.ajax({  
			type : "GET",  
			async : false, // synchronous 
			url : "/DEPOSIT_ACCOUNT_TRAN_CURRENCY/getDEPOSIT_ACCOUNT_TRAN_CURRENCY_AllDatesByCustomer_code/"+custcod,  
			data : {},  
			dataType : "json",
			success : function(result) {  
				if (result) { 		
					transactionDateArray = result;
					option_line.xAxis[0].data = transactionDateArray; 					
					lineChartxAxisArray = transactionDateArray;
				}  
			},  
			error : function(errorMsg) {  
				//alert("get line chart date response failed!");
				return;				
			}  
		});
		//get other data
		$.ajax({  
			type : "GET",  
			url : "/DEPOSIT_ACCOUNT_TRAN_CURRENCY/"+custcod,  
			data : {},  
			dataType : "json", 
			success : function(result) {  
				if (result) {  
					var currencyArray = new Array();
					var dataArrays = new Array();					
					
					for (var aLineData in result){
						currencyArray.push(result[aLineData].currency);
						var otherArray = result[aLineData].transaction_amount;
						var aDataArray = new Array(transactionDateArray.length);
						for (var i=0;i<otherArray.length;i++){
							if (otherArray[i].transaction_amount != "-1"){
								aDataArray[i] = otherArray[i].transaction_amount;
							}
							else{
								aDataArray[i] = '-';
							}
						}
						dataArrays.push({'name':result[aLineData].currency,'type':'line',data:aDataArray});
					}	
					
					option_line.legend.data = currencyArray;  
					option_line.series = dataArrays;
					lineChartseriesArrays = dataArrays;
					
					lineChart.hideLoading();  
					// using the specified options and data to display
					lineChart.setOption(option_line);  
				}  
			},  
			error : function(errorMsg) {  
				//alert("get line chart response failed!");  
				lineChart.hideLoading();  
			}  
		});  	
	}  


//Transaction Detail(Table)
	var searchDepositTranParameters="{}";
	var depositTranDataTable;
	function initDepositTranTable(){	
		depositTranDataTable = $("#depositTranTable").DataTable({
			"processing": true,
			"serverSide": true,
			"searching": false,
			"scrollX": true,
			"ajax": {
				"url": "/PRODUCT_TRANSACTION_DETAIL/getValue",
				"data": function ( d ) {
					if (depositTranDataTable!=null){
						order_column_index = depositTranDataTable.order()[0][0];
						switch(order_column_index)
						{
						case 0:
						    d.orderCol = "Branch";
						    break;
						case 1:
						    d.orderCol = "DEP_SERIAL_NO";
						    break;
						case 2:
						    d.orderCol = "TRANSACTION_DATE";
						    break;
						case 3:
						    d.orderCol = "TRANSACTION_TYPE";
						    break;
						case 4:
						    d.orderCol = "ACCOUNT_NO";
						    break;
						case 5:
						    d.orderCol = "CURRENCY";
						    break;
						case 6:
						    d.orderCol = "DR_Indicator";
						    break;
						case 7:
						    d.orderCol = "TRANSACTION_AMOUNT";
						    break;							
						default:
							break;
						}
						d.orderDir = depositTranDataTable.order()[0][1];
					}
					else{
						d.orderCol = "Branch";
						d.orderDir = "asc";
					}
					d.search = searchDepositTranParameters;
					d.customer_code = custcod;
				}
			}
		});
	}
	
	function initDepositTranSearchTable(){		
		var strBranchOptions ="";
		var strTransactionTypeOptions = "";
		var strCurrencyOptions = "";
		var strDrIndicatorOptions = "";
		$.ajax({  
			type : "GET",   
			url : "/PRODUCT_TRANSACTION_DETAIL/getDepTran_Branch/"+custcod,  
			data : {},  
			dataType : "json", 
			success : function(result) {   	
				if (result){
					for (var aData in result){
						strBranchOptions += "<option>"+result[aData]+"</option>";
					}
				}
				$("#depositTranBranchSelect").html(strBranchOptions);
			},  
			error : function(errorMsg) {  
				//alert("get transaction branch select data response failed!");  			
			}  
		});
		$.ajax({  
			type : "GET",   
			url : "/PRODUCT_TRANSACTION_DETAIL/getDepTran_Type/"+custcod,  
			data : {},  
			dataType : "json",   
			success : function(result) {   	
				if (result){
					for (var aData in result){
						strTransactionTypeOptions += "<option>"+result[aData]+"</option>";
					}
				}
				$("#depositTranTypeSelect").html(strTransactionTypeOptions);
			},  
			error : function(errorMsg) {  
				//alert("get transaction type select data response failed!");  			
			}  
		});
		$.ajax({  
			type : "GET",  
			url : "/PRODUCT_TRANSACTION_DETAIL/getDepTran_Ccy/"+custcod,  
			data : {},  
			dataType : "json",
			success : function(result) {   	
				if (result){
					for (var aData in result){
						strCurrencyOptions += "<option>"+result[aData]+"</option>";
					}
				}
				$("#depositTranCcySelect").html(strCurrencyOptions);
			},  
			error : function(errorMsg) {  
				//alert("get transaction currency select data response failed!");  			
			}  
		});
		$.ajax({  
			type : "GET",   
			url : "/PRODUCT_TRANSACTION_DETAIL/getDepTran_Dr_Indicator/"+custcod,  
			data : {},  
			dataType : "json",  
			success : function(result) {   	
				if (result){
					for (var aData in result){
						strDrIndicatorOptions += "<option>"+result[aData]+"</option>";
					}
				}
				$("#depositTranDrSelect").html(strDrIndicatorOptions);
			},  
			error : function(errorMsg) {  
				//alert("get transaction indicator select data response failed!");  			
			}  
		});
	}	
	
	
//Loan Information(Table)
	var searchProLoanParameters = "{}";
	var proLoanDataTable;
	var ifNeedClearL = false;
	function initProLoanTable(){
		proLoanDataTable = $("#proLoanTable").DataTable({
			"processing": true,
			"serverSide": true,
			"searching": false,
			"scrollX": true,
			"ajax": {
				"url": "/Loan/getLoanInfo",
				"data": function ( d ) {
					if (proLoanDataTable!=null){
						order_column_index = proLoanDataTable.order()[0][0];
						switch(order_column_index)
						{
						case 0:
						    d.orderCol = "Branch";
						    break;
						case 1:
						    d.orderCol = "LN_Account_No";
						    break;
						case 2:
						    d.orderCol = "Loan_Type";
						    break;
						case 3:
						    d.orderCol = "Line_No";
						    break;
						case 4:
						    d.orderCol = "Principal_Currency";
						    break;
						case 5:
						    d.orderCol = "Principal_Amount";
						    break;
						case 6:
						    d.orderCol = "Value_Date";
						    break;
						case 7:
						    d.orderCol = "Maturity_Date";
						    break;	
						case 8:
						    d.orderCol = "Balance_Currency";
						    break;
						case 9:
						    d.orderCol = "Balance";
						    break;
						case 10:
						    d.orderCol = "Account_Status";
						    break;							
						default:
							break;
						}					
						d.orderDir = proLoanDataTable.order()[0][1];
					}
					else{
						d.orderCol = "Branch";
						d.orderDir = "asc";
					}
					d.search = searchProLoanParameters;
					d.customer_code = custcod;
				}
			}
		});
	}
	
	function initProLoanSearchTable(){
		var strBranchOptions ="";
		var strPrincipalCurrencyOptions = "";
		var strBalanceCurrencyOptions = "";
		var strLoanTypeOptions = "";
		var strStatusOptions = "";
		$.ajax({  
			type : "GET",   
			url : "/Loan/getLoan_BranchByCustCode/"+custcod,  
			data : {},  
			dataType : "json", 
			success : function(result) {   	
				if (result){
					for (var aData in result){
						strBranchOptions += "<option>"+result[aData]+"</option>";
					}
				}
				$("#pro_loanBranchSelect").html(strBranchOptions);
			},  
			error : function(errorMsg) {  
				//alert("get loan branch select data response failed!");  			
			}  
		});
		$.ajax({  
			type : "GET",   
			url : "/Loan/getLoan_PrinCCYByCustCode/"+custcod,  
			data : {},  
			dataType : "json",   
			success : function(result) {   	
				if (result){
					for (var aData in result){
						strPrincipalCurrencyOptions += "<option>"+result[aData]+"</option>";
					}
				}
				$("#pro_loanPrincipalCurrencySelect").html(strPrincipalCurrencyOptions);
			},  
			error : function(errorMsg) {  
				//alert("get loan principal currency select data response failed!");  			
			}  
		});
		$.ajax({  
			type : "GET",  
			url : "/Loan/getLoan_BalCCYByCustCode/"+custcod,  
			data : {},  
			dataType : "json",
			success : function(result) {   	
				if (result){
					for (var aData in result){
						strBalanceCurrencyOptions += "<option>"+result[aData]+"</option>";
					}
				}
				$("#pro_loanBalanceCurrencySelect").html(strBalanceCurrencyOptions);
			},  
			error : function(errorMsg) {  
				//alert("get loan balance currency select data response failed!");  			
			}  
		});
		$.ajax({  
			type : "GET",   
			url : "/Loan/getLoan_TypeByCustCode/"+custcod,  
			data : {},  
			dataType : "json",  
			success : function(result) {   	
				if (result){
					for (var aData in result){
						strLoanTypeOptions += "<option>"+result[aData]+"</option>";
					}
				}
				$("#pro_loanTypeSelect").html(strLoanTypeOptions);
			},  
			error : function(errorMsg) {  
				//alert("get loan type select data response failed!");  			
			}  
		});
		$.ajax({  
			type : "GET",   
			url : "/Loan/getLoan_AccStatusByCustCode/"+custcod,  
			data : {},  
			dataType : "json",  
			success : function(result) {   	
				if (result){
					for (var aData in result){
						strStatusOptions += "<option>"+result[aData]+"</option>";
					}
				}
				$("#pro_loanStatusSelect").html(strStatusOptions);
			},  
			error : function(errorMsg) {  
				//alert("get loan status select data response failed!");  			
			}  
		});
	}
	
	$('#proLoanTable').on( 'draw.dt', function () {
		var linkCondition;
		if (ifNeedClearL){
			searchRepaymentParameters = "{\"branch_array\":[],\"overdue_flag_array\":[],\"currency_array\":[],\"open_item_num\":\"\",\"instalment_no\":\"\",\"start_date\":\"\",\"start_date_max\":\"\",\"due_date\":\"\",\"due_date_max\":\"\",\"paid_date\":\"\",\"paid_date_max\":\"\",\"instalment_amount\":\"\",\"instalment_amount_max\":\"\",\"interest_amt\":\"\",\"interst_amt_max\":\"\"}";
			repaymentDataTable.ajax.reload();	
			ifNeedClearL = false;
		}
				
		$("#proLoanTable tbody tr").on( 'click', function () {
			if (!ifNeedRemoveLinkL){
				linkCondition = this.childNodes[1].innerHTML;
				var flag = jQuery(this).hasClass("link_condition");
				ifNeedClearL = false;
				
				var len = $('#proLoanTable tbody tr').length;
				for (var i = 0;i < len;++i){
					$('#proLoanTable tbody tr').eq(i).removeClass("link_condition");
					$('#proLoanTable tbody tr').eq(i).removeAttr("style");
				}
				if (!flag){
					jQuery(this).addClass("link_condition");
					jQuery(this).css("background-color","yellow");
					ifNeedClearL = true;
				}
				
				//jQuery(this).toggleClass("link_condition");
				if (this.className.indexOf("link_condition") < 0){
					searchRepaymentParameters = "{\"branch_array\":[],\"overdue_flag_array\":[],\"currency_array\":[],\"open_item_num\":\"\",\"instalment_no\":\"\",\"start_date\":\"\",\"start_date_max\":\"\",\"due_date\":\"\",\"due_date_max\":\"\",\"paid_date\":\"\",\"paid_date_max\":\"\",\"instalment_amount\":\"\",\"instalment_amount_max\":\"\",\"interest_amt\":\"\",\"interst_amt_max\":\"\"}";
				}
				else{
					searchRepaymentParameters = "{\"branch_array\":[],\"overdue_flag_array\":[],\"currency_array\":[],\"open_item_num\":\""+linkCondition+"\",\"instalment_no\":\"\",\"start_date\":\"\",\"start_date_max\":\"\",\"due_date\":\"\",\"due_date_max\":\"\",\"paid_date\":\"\",\"paid_date_max\":\"\",\"instalment_amount\":\"\",\"instalment_amount_max\":\"\",\"interest_amt\":\"\",\"interst_amt_max\":\"\"}";
				}
				repaymentDataTable.ajax.reload();	
			}
		});
	});

	
//	Repayment Overdue(KPI)
	function initOverdueKPI(){
		$.ajax({
			type : "GET",
			url : "/PRODUCT_REPAYMENT_TIMEOVERDUE/getValue",
			data : {"customer_code":custcod},
			dataType : "json",
			success : function(result) {
				if (result){
					$('#overdueTimes').html(result);
				}			
			},
			error : function(errorMsg) {
				//alert("get overdue KPI response failed!");
			}
		});
	}
	
	
//Repayment Deliquency(Pie char)
	var deliquencyChart = echarts.init(document.getElementById('deliquencyPie'));
	function initDeliquency(){
		var option = {
			tooltip : {
				trigger: 'item',
				formatter: "{a} <br/>{b} : {c} ({d}%)"
			},
			legend: {
				orient : 'vertical',
				x : 'left',
				data:[]
			},
			calculable : true,
			series : [
				{
					name:'Deliquency',
					type:'pie',
					radius : '55%',
					center: ['50%', '60%'],
					data:[]
				}
			]
		};
		var ccy;
		var strDeliquency = "";
		
		$.ajax({  
			type : "GET",   
			url : "/PRODUCT_REPAYMENT_DELIQUENCY/getCcy",  
			data : {"customer_code":custcod},  
			dataType : "json", 
			success : function(result) {   	
				if (result){
					for (var aData in result){
						strDeliquency += "<label><input type='radio' name='deliquencyR' class='flat-red' value='"+result[aData].trim()+"'>"+result[aData].trim()+"</label>";
					}
				}
				$("#deliquencyRadio").html(strDeliquency);
				
				$('#deliquencyRadio input[type="radio"].flat-red').iCheck({
				    checkboxClass: 'icheckbox_flat-green',
				    radioClass: 'iradio_flat-green'
				});
				
				$('#deliquencyRadio input').on('ifChecked', function(){
					ccy = $(this).val();
					$('#deliquencyPie').show();
					loadDeliquencyPieChart(option,ccy);			
				}); 
			},  
			error : function(errorMsg) {  
				//alert("get deliquency currency data response failed!");  			
			}  
		});
	}
	
	function loadDeliquencyPieChart(option,currency){
		deliquencyChart.showLoading();

		$.ajax({
			type : "GET",
			url : "/PRODUCT_REPAYMENT_DELIQUENCY/getValue",
			data : {"customer_code":custcod,"ccy":currency},
			dataType : "json",
			success : function(result) {
				if (result){
					var tbucketArray = new Array();
					var amountDataArray = new Array();
					for(var aData in result){
						tbucketArray.push(result[aData].tbucket);
						amountDataArray.push({'value':result[aData].amount,'name':result[aData].tbucket})
					}
					option.legend.data = tbucketArray;
					option.series[0].data = amountDataArray;
				}
				
				deliquencyChart.hideLoading();
				deliquencyChart.setOption(option);				
			},
			error : function(errorMsg) {
				//alert("get deliquency pie chart response failed!");
			}
		});
	}

	
//Repayment(Table)
	var searchRepaymentParameters="{}";
	var repaymentDataTable;
	function initRepaymentTable(){	
		repaymentDataTable = $("#repaymentTable").DataTable({
			"processing": true,
			"serverSide": true,
			"searching": false,
			"scrollX": true,
			"ajax": {
				"url": "/PRODUCT_REPAYMENT_TABLE/getValue",
				"data": function ( d ) {
					if (repaymentDataTable!=null){
						order_column_index = repaymentDataTable.order()[0][0];
						switch(order_column_index)
						{
						case 0:
						    d.orderCol = "BRANCH";
						    break;
						case 1:
						    d.orderCol = "OPEN_ITEM_NUM";
						    break;
						case 2:
						    d.orderCol = "INSTALMENT_NO";
						    break;
						case 3:
						    d.orderCol = "START_DATE";
						    break;
						case 4:
						    d.orderCol = "DUE_DATE";
						    break;
						case 5:
						    d.orderCol = "PAID_DATE";
						    break;
						case 6:
						    d.orderCol = "CURRENCY";
						    break;
						case 7:
						    d.orderCol = "INSTALMENT_AMOUNT";
						    break;
						case 8:
						    d.orderCol = "INTEREST_AMT";
						    break;							
						case 9:
						    d.orderCol = "OVERDUE_FLAG";
						    break;							        							
						default:
							break;
						}
						d.orderDir = repaymentDataTable.order()[0][1];
					}
					else{
						d.orderCol = "Branch";
						d.orderDir = "asc";
					}
					d.search = searchRepaymentParameters;
					d.customer_code = custcod;
				}
			}
		});
	}
	
	function initRepaymentSearchTable(){		
		var strBranchOptions ="";
		var strCurrencyOptions = "";
		var strOverdueFlagOptions = "";
		$.ajax({  
			type : "GET",   
			url : "/PRODUCT_REPAYMENT_TABLE/getRep_Branch/"+custcod,
			data : {},  
			dataType : "json", 
			success : function(result) {   	
				if (result){
					for (var aData in result){
						strBranchOptions += "<option>"+result[aData]+"</option>";
					}
				}
				$("#repaymentBranchSelect").html(strBranchOptions);
			},  
			error : function(errorMsg) {  
				//alert("get repayment branch select data response failed!");  			
			}  
		});
		$.ajax({  
			type : "GET",   
			url : "/PRODUCT_REPAYMENT_TABLE/getRep_Ccy/"+custcod,  
			data : {},  
			dataType : "json",   
			success : function(result) {   	
				if (result){
					for (var aData in result){
						strCurrencyOptions += "<option>"+result[aData]+"</option>";
					}
				}
				$("#repaymentCcySelect").html(strCurrencyOptions);
			},  
			error : function(errorMsg) {  
				//alert("get repayment currency select data response failed!");  			
			}  
		});
		$.ajax({  
			type : "GET",  
			url : "/PRODUCT_REPAYMENT_TABLE/getRep_Overdue_Flag/"+custcod,  
			data : {},  
			dataType : "json",
			success : function(result) {   	
				if (result){
					for (var aData in result){
						strOverdueFlagOptions += "<option>"+result[aData]+"</option>";
					}
				}
				$("#repaymentOverdueFlagSelect").html(strOverdueFlagOptions);
			},  
			error : function(errorMsg) {  
				//alert("get repayment overdue flag data response failed!");  			
			}  
		});

	}

	
//Product--------------------------------------------------------------------------------------------------------------


//Credit Facility------------------------------------------------------------------------------------------------------

//Credit Line Structure(Tree map)
	var creditLineTreeDepth = 0 ; 
	function getDepthOfTree2(node,deep) {
		if (node.children != null) {
			for (var i = 0; i < node.children.length; ++i) {
				getDepthOfTree2(node.children[i],deep+1);
			}
		}
		else{
			creditLineTreeDepth = (creditLineTreeDepth > deep ? creditLineTreeDepth : deep);
			return;
		}
	}
	
	function initCreditLineTreeMap(){
		$.ajax({  
			type : "GET",  
			url : "/CustomerCreditLine/getCustomerCreditLineByCustCode",  
			data : {customer_code:custcod},
			dataType : "json",
			success : function(result) {  
				if (result) {  
					var treeData = transData(result,'code1','parentid','children')[0];
					getDepthOfTree2(treeData,creditLineTreeDepth);
					var height = (creditLineTreeDepth+1)*120;
					BuildVerticaLTree2(treeData, "#creditLineTreeMap", 960, height ,"#creditLineTreeShowDiv");
				}  
			},  
			error : function(errorMsg) {  
				//alert("get credit line structure response failed!");  		
			}  
		}); 
	}
	
	
//Credit Line(Table)
	var searchCreditLineParameters = "{}";
	var creditLineDataTable;
	var ifNeedClearC = false;		
	function initCreditLineTable(){
		creditLineDataTable = $("#creditLinesTable").DataTable({
			"processing": true,
			"serverSide": true,
			"searching": false,
//			"scrollX": true,
			"ajax": {
				"url": "/CreditLineMain/getCreditLineMain",
				"data": function ( d ) {
					if (creditLineDataTable!=null){
						order_column_index = creditLineDataTable.order()[0][0];
						switch(order_column_index)
						{
						case 0:
						    d.orderCol = "Credit_Line_No";
						    break;
						case 1:
						    d.orderCol = "Line_name";
						    break;
						case 2:
						    d.orderCol = "Create_Date";
						    break;
						case 3:
						    d.orderCol = "Expire_Date";
						    break;
						case 4:
						    d.orderCol = "Currency";
						    break;
						case 5:
						    d.orderCol = "Limit";
						    break;
						case 6:
						    d.orderCol = "Utilized_Amount";
						    break;
						case 7:
						    d.orderCol = "Booking_Amount";
						    break;		
						case 8:
						    d.orderCol = "Available_Amount";
						    break;
						case 9:
						    d.orderCol = "Revolving_Ind";
						    break;								
						default:
							break;
						}					
						d.orderDir = creditLineDataTable.order()[0][1];
					}
					else{
						d.orderCol = "Credit_Line_No";
						d.orderDir = "asc";
					}
					d.search = searchCreditLineParameters;
					d.customer_code = custcod;
				}
			}
		});
		$('#creditLinesTable thead tr').eq(0).append("<th>Utilized Ratio</th>");
		$('#creditLinesTable tfoot tr').eq(0).append("<th>Utilized Ratio</th>");
	}
	
	function initCreditLineSearchTable(){		
		var strCurrencyOptions = "";
		var strRevolvingOptions = "";
		$.ajax({  
			type : "GET",  
			url : "/CreditLineMain/getCurrencyByCustCode",  
			data : {customer_code:custcod},   
			dataType : "json",
			success : function(result) {   	
				if (result){
					for (var aData in result){
						strCurrencyOptions += "<option>"+result[aData]+"</option>";
					}
				}
				$("#creditLineCurrencySelect").html(strCurrencyOptions);
			},  
			error : function(errorMsg) {  
				//alert("get credit line currency select data response failed!");  			
			}  
		});
		$.ajax({  
			type : "GET",   
			url : "/CreditLineMain/getRevolvingIndByCustCode",  
			data : {customer_code:custcod},  
			dataType : "json",  
			success : function(result) {   	
				if (result){
					for (var aData in result){
						strRevolvingOptions += "<option>"+result[aData]+"</option>";
					}
				}
				$("#creditLineRevolvingSelect").html(strRevolvingOptions);
			},  
			error : function(errorMsg) {  
				//alert("get revolving ind select data response failed!");  			
			}  
		});
	}
	
	$('#creditLinesTable').on( 'draw.dt', function () {
		var limit,utilized_amount,booking_amount,ratio,trDom,strHtml,linkCondition;
		var trCount = $('#creditLinesTable tbody tr').length;
		for (var i = 0;i < trCount;++i){
			trDom = $('#creditLinesTable tbody tr').eq(i);
			limit = trDom.find('td').eq(5).html();
			//utilized_amount = trDom.find('td').eq(6).html();
			//booking_amount = trDom.find('td').eq(7).html();
			available_amount = trDom.find('td').eq(8).html();
			ratio = parseInt(((limit - available_amount)/limit)*100);
			if (ratio >= 40){
				strHtml = "<td><div class='progress progress-striped active'><div class='progress-bar' style='width:"+ratio+"%'>"+ratio+"%</div></div></td>";
			}
			else{
				strHtml = "<td><div class='progress progress-striped active'><div class='progress-bar' style='width:"+ratio+"%'></div><small>&nbsp;&nbsp;"+ratio+"%</small></div></td>";
			}
			trDom.append(strHtml);
		}

		if (ifNeedClearC){
			searchCollateralsParameters = "{\"collateral_no\":\"\",\"item_description\":\"\",\"valuation_date\":\"\",\"valuation_date_max\":\"\",\"valuation\":\"\",\"valuation_max\":\"\",\"collateral_type_array\":[],\"val_currency_array\":[],\"line_no\":\"\",\"auto\":\"false\"}";
			collateralsDataTable.ajax.reload();	
			ifNeedClearC = false;
		}
		
		$("#creditLinesTable tbody tr").on( 'click', function () {
			if (!ifNeedRemoveLinkC){
				linkCondition = this.childNodes[0].innerHTML;
				var flag = jQuery(this).hasClass("link_condition");
				ifNeedClearC = false;
				
				var len = $('#creditLinesTable tbody tr').length;
				for (var i = 0;i < len;++i){
					$('#creditLinesTable tbody tr').eq(i).removeClass("link_condition");
					$('#creditLinesTable tbody tr').eq(i).removeAttr("style");
				}
				if (!flag){
					jQuery(this).addClass("link_condition");
					jQuery(this).css("background-color","yellow");
					ifNeedClearC = true;
				}
				
				//jQuery(this).toggleClass("link_condition");
				if (this.className.indexOf("link_condition") < 0){
					searchCollateralsParameters = "{\"collateral_no\":\"\",\"item_description\":\"\",\"valuation_date\":\"\",\"valuation_date_max\":\"\",\"valuation\":\"\",\"valuation_max\":\"\",\"collateral_type_array\":[],\"val_currency_array\":[],\"line_no\":\"\",\"auto\":\"false\"}";
				}
				else{
					searchCollateralsParameters = "{\"collateral_no\":\"\",\"item_description\":\"\",\"valuation_date\":\"\",\"valuation_date_max\":\"\",\"valuation\":\"\",\"valuation_max\":\"\",\"collateral_type_array\":[],\"val_currency_array\":[],\"line_no\":\""+linkCondition+"\",\"auto\":\"false\"}";
				}
				collateralsDataTable.ajax.reload();	
			}
		});
	});


//Collaterals(Table)
	var searchCollateralsParameters = "{}";
	var collateralsDataTable;
	function initCollateralsTable(){
		collateralsDataTable = $("#collateralsTable").DataTable({
			"processing": true,
			"serverSide": true,
			"searching": false,
			"scrollX": true,
			"ajax": {
				"url": "/CollateralMain/getCollateralMain",
				"data": function ( d ) {
					if (collateralsDataTable!=null){
						order_column_index = collateralsDataTable.order()[0][0];
						switch(order_column_index)
						{
						case 0:
						    d.orderCol = "Ref";
						    break;
						case 1:
						    d.orderCol = "Collateral_No";
						    break;
						case 2:
						    d.orderCol = "Collateral_Type";
						    break;
						case 3:
						    d.orderCol = "Item_Description";
						    break;
						case 4:
						    d.orderCol = "Val_Currency";
						    break;
						case 5:
						    d.orderCol = "Valuation";
						    break;
						case 6:
						    d.orderCol = "Valuation_Date";
						    break;
						case 7:
						    d.orderCol = "Line_no";
						    break;						
						default:
							break;
						}					
						d.orderDir = collateralsDataTable.order()[0][1];
					}
					else{
						d.orderCol = "Ref";
						d.orderDir = "asc";
					}
					d.search = searchCollateralsParameters;
					d.customer_code = custcod;
				}
			}
		});	
	}
	
	function initCollateralsSearchTable(){		
		var strCurrencyOptions = "";
		var strTypeOptions = "";
		$.ajax({  
			type : "GET",  
			url : "/CollateralMain/getValCurrencyByCustCode",  
			data : {customer_code:custcod},   
			dataType : "json",
			success : function(result) {   	
				if (result){
					for (var aData in result){
						strCurrencyOptions += "<option>"+result[aData]+"</option>";
					}
				}
				$("#collateralCurrencySelect").html(strCurrencyOptions);
			},  
			error : function(errorMsg) {  
				//alert("get collateral currency select data response failed!");  			
			}  
		});
		$.ajax({  
			type : "GET",   
			url : "/CollateralMain/getCollateralTypeByCustCode",  
			data : {customer_code:custcod},  
			dataType : "json",  
			success : function(result) {   	
				if (result){
					for (var aData in result){
						strTypeOptions += "<option>"+result[aData]+"</option>";
					}
				}
				$("#collateralTypeSelect").html(strTypeOptions);
			},  
			error : function(errorMsg) {  
				//alert("get collaterals type select data response failed!");  			
			}  
		});
	}


//Credit Facility------------------------------------------------------------------------------------------------------


//Pricing--------------------------------------------------------------------------------------------------------------

//Preferential Interest Rate(Table)
	function initpreferentialInterestRateTable(){	
		var preferentialInterestRateTable = $("#preferentialInterestRateTable").DataTable({
			"processing": true,
			"serverSide": true,
			"searching": false,
			"scrollX": true,
			"ajax": {
				"url": "/PRICING_PREFERENTIAL_INTEREST_RATE/getValue",
				"data": function ( d ) {
					if (preferentialInterestRateTable!=null){
						order_column_index = preferentialInterestRateTable.order()[0][0];
						switch(order_column_index)
						{
						case 0:
						    d.orderCol = "PRODUCT_CODE";
						    break;
						case 1:
						    d.orderCol = "PRODUCT_DESC";
						    break;
						case 2:
						    d.orderCol = "IR_SPREAD";
						    break;	
						case 3:
						    d.orderCol = "OD_INT_SPREAD";
						    break;
						case 4:
						    d.orderCol = "PREMINUM_DISCOUNT";
						    break;
						case 5:
						    d.orderCol = "EFFECTIVE_DATE";
						    break;
						case 6:
						    d.orderCol = "EXPIRY_DATE";
						    break;
						default:
							break;
						}
						d.orderDir = preferentialInterestRateTable.order()[0][1];
					}
					else{
						d.orderCol = "PRODUCT_CODE";
						d.orderDir = "asc";
					}
					d.search = "{}";
					d.customer_code = custcod;
				}
			}
		});
	}
	

//Preferential FX Rate(Table)	
	function initpreferentialFXRateTableTable(){	
		var preferentialFXRateTable = $("#preferentialFXRateTable").DataTable({
			"processing": true,
			"serverSide": true,
			"searching": false,
			"scrollX": true,
			"ajax": {
				"url": "/PRICING_PREFERENTIAL_FX_RATE/getValue",
				"data": function ( d ) {
					if (preferentialFXRateTable!=null){
						order_column_index = preferentialFXRateTable.order()[0][0];
						switch(order_column_index)
						{
						case 0:
						    d.orderCol = "PRODUCT_CODE";
						    break;
						case 1:
						    d.orderCol = "PRODUCT_DESC";
						    break;
						case 2:
						    d.orderCol = "CCY1";
						    break;	
						case 3:
						    d.orderCol = "CCY2";
						    break;
						case 4:
						    d.orderCol = "POINT";
						    break;
						case 5:
						    d.orderCol = "PREMINUM_DISCOUNT";
						    break;
						default:
							break;
						}
						d.orderDir = preferentialFXRateTable.order()[0][1];
					}
					else{
						d.orderCol = "PRODUCT_CODE";
						d.orderDir = "asc";
					}
					d.search = "{}";
					d.customer_code = custcod;
				}
			}
		});
	}

	
//Preferential Fees(Table)	
	function initpreferentialFeesTable(){	
		var preferentialFeesDataTable = $("#preferentialFeesTable").DataTable({
			"processing": true,
			"serverSide": true,
			"searching": false,
			"scrollX": true,
			"ajax": {
				"url": "/PRICING_PREFERENTIAL_FEES/getValue",
				"data": function ( d ) {
					if (preferentialFeesDataTable!=null){
						order_column_index = preferentialFeesDataTable.order()[0][0];
						switch(order_column_index)
						{
						case 0:
						    d.orderCol = "FEE_TYPE";
						    break;
						case 1:
						    d.orderCol = "PREMINUM_DISCOUNT";
						    break;
						default:
							break;
						}
						d.orderDir = preferentialFeesDataTable.order()[0][1];
					}
					else{
						d.orderCol = "FEE_TYPE";
						d.orderDir = "asc";
					}
					d.search = "{}";
					d.customer_code = custcod;
				}
			}
		});
	}

	
//Standing Instruction(Table)
	function initStandingInstructionTable(){	
		var standingInstructionTable = $("#standingInstructionTable").DataTable({
			"processing": true,
			"serverSide": true,
			"searching": false, 
			"scrollX": true,
			"ajax": {
				"url": "/PRICING_STANDING_INSTRUCTION/getValue",
				"data": function ( d ) {
					if (standingInstructionTable!=null){
						order_column_index = standingInstructionTable.order()[0][0];
						switch(order_column_index)
						{
						case 0:
						    d.orderCol = "INSTRUCTION";
						    break;
						case 1:
						    d.orderCol = "MAKER";
						    break;
						case 2:
						    d.orderCol = "SDATE";
						    break;
						default:
							break;
						}
						d.orderDir = standingInstructionTable.order()[0][1];
					}
					else{
						d.orderCol = "INSTRUCTION";
						d.orderDir = "asc";
					}
					d.search = "{}";
					d.customer_code = custcod;
				}
			}
		});
	}


//Product Instruction(Table)	
	function initProductInstructionTable(){	
		var productInstructionTable = $("#productInstructionTable").DataTable({
			"processing": true,
			"serverSide": true,
			"searching": false, 
			"scrollX": true,
			"ajax": {
				"url": "/PRICING_PRODUCT_INSTRUCTION/getValue",
				"data": function ( d ) {
					if (productInstructionTable!=null){
						order_column_index = productInstructionTable.order()[0][0];
						switch(order_column_index)
						{
						case 0:
						    d.orderCol = "PRODUCT_CODE";
						    break;
						case 1:
						    d.orderCol = "PRODUCT_DESC";
						    break;
						case 2:
						    d.orderCol = "INSTRUCTION";
						    break;
						case 3:
						    d.orderCol = "MAKER";
						    break;
						case 4:
						    d.orderCol = "PDATE";
						    break;
						default:
							break;
						}
						d.orderDir = productInstructionTable.order()[0][1];
					}
					else{
						d.orderCol = "PRODUCT_CODE";
						d.orderDir = "asc";
					}
					d.search = "{}";
					d.customer_code = custcod;
				}
			}
		});
	}
	

//Pricing--------------------------------------------------------------------------------------------------------------


//Call Memo------------------------------------------------------------------------------------------------------------
	var dateArray = new Array();
	var eventDateArray = new Array();
	var callMemoResult = [];
	var selectDate = "";
	function initCallMemoList(){
		$.ajax({  
			type : "GET",  
			async: false, //
			url : "/CallMemo/getCallMemoByCustCode",  
			data : {customer_code:custcod},
			dataType : "json",
			success : function(result) {  				
				var strCallMemoList = "";
				var date,content;
				if (result) {  
					callMemoResult = result;
					for (var aData in result){
						date = result[aData].calldte;
						//eventDate = date.toString().trim().replace(reg,'-');
						content = result[aData].memo_entityList;
						dateArray.push(date);
						eventDateArray.push({'title':'<memo>','start':date,'backgroundColor':'#00c0ef','borderColor':'#00c0ef'});
						strCallMemoList += "<li class='time-label'><span class='bg-blue'>"+date+"</span></li>";
						for (var aData2 in content){
							strCallMemoList += "<li><i class='fa fa-user bg-aqua'></i><div class='timeline-item'><h2 class='timeline-header'>Called by :"+content[aData2].callcus+"</h2><div class='timeline-body'><h5>Purpose : "+content[aData2].purpose+"</h5><h5>Summary :"+content[aData2].summay1+"</h5><h5>Action Plan :"+content[aData2].action1+"</h5></div></div></li>";
						}							
					}
					strCallMemoList += "<li><i class='fa fa-clock-o bg-gray'></i></li>";
					$("#callMemoList").html(strCallMemoList);
				}  
			},  
			error : function(errorMsg) {  
				//alert("get call memo response failed!");  		
			}  
		}); 
	}
	

//Call Memo------------------------------------------------------------------------------------------------------------

//for button click-----------------------------------------------------------------------------------------------------
	function printArray(array){
		var strResult = "";
		for (var i=0;i<array.length;++i){
			strResult += "\""+array[i]+"\"";
			if (i!=array.length-1)
				strResult += ","
		}
		return strResult;
	}
	
	function searchDepositResult(){
		//url parameters
		var branchArray,productArray,currencyArray,statusArray;
		var accountNo = $('#depositAccountNo').val();
		var openDateFrom = $('#datepickerD1').val();
		var openDateTo = $('#datepickerD2').val();
		var maturityDateFrom = $('#datepickerD3').val();
		var maturityDateTo = $('#datepickerD4').val();
		var outstandingAmoutFrom = $('#depositOutstandingAmountFrom').val();
		var outstandingAmoutTo = $('#depositOutstandingAmountTo').val();		
		var strBranch = $('#depositBranchSelect').val();
		var strProduct = $('#depositProductSelect').val();
		var strCurrency = $('#depositCurrencySelect').val();
		var strStatus = $('#depositStatusSelect').val();
		
		if (strBranch != null && strBranch!= ""){
			branchArray = strBranch.toString().trim().split(',');
			strBranch = printArray(branchArray);
		}
		if (strProduct != null && strProduct!= ""){
			productArray = strProduct.toString().trim().split(',');
			strProduct = printArray(productArray);
		}
		if (strCurrency != null && strCurrency!= ""){
			currencyArray = strCurrency.toString().trim().split(',');
			strCurrency = printArray(currencyArray);
		}		
		if (strStatus != null && strStatus!= ""){
			statusArray = strStatus.toString().trim().split(',');
			strStatus = printArray(statusArray);
		}	
		
		// verify data
		if (openDateFrom != "" && openDateTo != ""){
			if (openDateFrom > openDateTo){
				alert("open date range is wrong");
				return;
			}
		}
		if (maturityDateFrom != "" && maturityDateTo != ""){
			if (maturityDateFrom > maturityDateTo){
				alert("maturity date range is wrong");
				return;
			}
		}
		if (outstandingAmoutFrom != "" && outstandingAmoutTo != ""){
			if (/^\d+$/.test(outstandingAmoutFrom) && /^\d+$/.test(outstandingAmoutTo)){
				if (parseInt(outstandingAmoutFrom) > parseInt(outstandingAmoutTo)){
					alert("outstanding amout range is wrong");
					return;
				}
			}
			else{
				alert("outstanding amout to be filled in must be integer");
				return;
			}
		}	
		searchDepositParameters = "{\"branch_array\":["+strBranch+"],\"account_type_array\":["+strProduct+"],\"currency_array\":["+strCurrency+"],\"account_status_array\":["+strStatus+"],\"dp_account_no\":\""+accountNo+"\",\"open_date\":\""+openDateFrom+"\",\"open_date_max\":\""+openDateTo+"\",\"maturity_date\":\""+maturityDateFrom+"\",\"maturity_date_max\":\""+maturityDateTo+"\",\"account_balance\":\""+outstandingAmoutFrom+"\",\"account_balance_max\":\""+outstandingAmoutTo+"\"}";
		depositDataTable.ajax.reload();		
		$('#project-d').modal('toggle');
	}
	
	function searchLoanResult(){	
		//url parameters
		var branch_array,principal_currency_array,balance_currency_array,loan_type_array,account_status_array;
		var ln_account_no = $('#loanAccountNo').val();
		var line_no = $('#loanLineNo').val();
		var principal_amount = $('#loanPrincipalAmountFrom').val();
		var principal_amount_max = $('#loanPrincipalAmountTo').val();
		var balance = $('#loanBalanceFrom').val();
		var balance_max = $('#loanBalanceTo').val();
		var value_date = $('#datepickerL1').val();
		var value_date_max = $('#datepickerL2').val();
		var maturity_date = $('#datepickerL3').val();
		var maturity_date_max = $('#datepickerL4').val();		
		var strBranch = $('#loanBranchSelect').val();
		var strPrincipalCurrency = $('#loanPrincipalCurrencySelect').val();
		var strBalanceCurrency = $('#loanBalanceCurrencySelect').val();
		var strLoanType = $('#loanTypeSelect').val();
		var strStatus = $('#loanStatusSelect').val();
		
		if (strBranch != null && strBranch!= ""){
			branch_array = strBranch.toString().trim().split(',');
			strBranch = printArray(branch_array);
		}		
		if (strPrincipalCurrency != null && strPrincipalCurrency!= ""){
			principal_currency_array = strPrincipalCurrency.toString().trim().split(',');
			strPrincipalCurrency = printArray(principal_currency_array);
		}		
		if (strBalanceCurrency != null && strBalanceCurrency!= ""){
			balance_currency_array = strBalanceCurrency.toString().trim().split(',');
			strBalanceCurrency = printArray(balance_currency_array);
		}				
		if (strLoanType != null && strLoanType!= ""){
			loan_type_array = strLoanType.toString().trim().split(',');
			strLoanType = printArray(loan_type_array);
		}			
		if (strStatus != null && strStatus!= ""){
			account_status_array = strStatus.toString().trim().split(',');
			strStatus = printArray(account_status_array);
		}	
		
		// verify data
		if (value_date != "" && value_date_max != ""){
			if (value_date > value_date_max){
				alert("value date range is wrong");
				return;
			}
		}
		if (maturity_date != "" && maturity_date_max != ""){
			if (maturity_date > maturity_date_max){
				alert("maturity date range is wrong");
				return;
			}
		}
		if (principal_amount != "" && principal_amount_max != ""){
			if (/^\d+$/.test(principal_amount) && /^\d+$/.test(principal_amount_max)){
				if (parseInt(principal_amount) > parseInt(principal_amount_max)){
					alert("principal amount range is wrong");
					return;
				}
			}
			else{
				alert("principal amount to be filled in must be integer");
				return;
			}
		}
		if (balance != "" && balance_max != ""){
			if (/^\d+$/.test(balance) && /^\d+$/.test(balance_max)){
				if (parseInt(balance) > parseInt(balance_max)){
					alert("balance range is wrong");
					return;
				}
			}
			else{
				alert("balance to be filled in must be integer");
				return;
			}
		}
		searchLoanParameters = "{\"branch_array\":["+strBranch+"],\"ln_account_no\":\""+ln_account_no+"\",\"loan_type_array\":["+strLoanType+"],\"line_no\":\""+line_no+"\",\"principal_currency_array\":["+strPrincipalCurrency+"],\"principal_amount\":\""+principal_amount+"\",\"principal_amount_max\":\""+principal_amount_max+"\",\"value_date\":\""+value_date+"\",\"value_date_max\":\""+value_date_max+"\",\"maturity_date\":\""+maturity_date+"\",\"maturity_date_max\":\""+maturity_date_max+"\",\"balance_currency_array\":["+strBalanceCurrency+"],\"balance\":\""+balance+"\",\"balance_max\":\""+balance_max+"\",\"account_status_array\":["+strStatus+"]}";
		loanDataTable.ajax.reload();
		$('#project-l').modal('toggle');
	}

	$('#lineChartSearch').on('click',function(){
		var searchDateFrom = $('#datepickerProDT1').val();
		var searchDateTo = $('#datepickerProDT2').val();
		
		if (searchDateFrom != "" && searchDateTo != ""){
			if (searchDateFrom > searchDateTo){
				alert("search date range is wrong");
				return;
			}
		}
		//index
		var startIndex = 0;
		var endIndex = lineChartxAxisArray.length-1;
		var dateStart,dateEnd;
		if (searchDateFrom != ""){	
			startIndex = lineChartxAxisArray.length;
			for (var i=0;i<lineChartxAxisArray.length;++i){
				dateStart = lineChartxAxisArray[i];
				if (searchDateFrom <= dateStart){
					startIndex = i;
					break;
				}
			}
		}
		if (searchDateTo != ""){
			endIndex = -1;
			for (var j=lineChartxAxisArray.length-1;j>-1;j--){
				dateEnd = lineChartxAxisArray[j];
				if (searchDateTo >= dateEnd){
					endIndex = j;
					break;
				}
			}
		}
		var newTransactionDateArray = lineChartxAxisArray.slice(startIndex,endIndex+1); // sliceend
		var newDataArrays = new Array();
		for (var m=0;m<lineChartseriesArrays.length;m++){
			newDataArrays.push({'name':lineChartseriesArrays[m].name,'type':'line',data:lineChartseriesArrays[m].data.slice(startIndex,endIndex+1)});
		}
		
		var option = lineChart.getOption();
		option.xAxis[0].data = newTransactionDateArray;
		option.series = newDataArrays;
		lineChart.hideLoading();  
		lineChart.setOption(option);  
	}); 
	
	function searchProDepositResult(){
		//url parameters
		var branchArray,productArray,currencyArray,statusArray;
		var accountNo = $('#pro_depositAccountNo').val();
		var openDateFrom = $('#datepickerProD1').val();
		var openDateTo = $('#datepickerProD2').val();
		var maturityDateFrom = $('#datepickerProD3').val();
		var maturityDateTo = $('#datepickerProD4').val();
		var outstandingAmoutFrom = $('#pro_depositOutstandingAmountFrom').val();
		var outstandingAmoutTo = $('#pro_depositOutstandingAmountTo').val();		
		var strBranch = $('#pro_depositBranchSelect').val();
		var strProduct = $('#pro_depositProductSelect').val();
		var strCurrency = $('#pro_depositCurrencySelect').val();
		var strStatus = $('#pro_depositStatusSelect').val();
		
		if (strBranch != null && strBranch!= ""){
			branchArray = strBranch.toString().trim().split(',');
			strBranch = printArray(branchArray);
		}
		if (strProduct != null && strProduct!= ""){
			productArray = strProduct.toString().trim().split(',');
			strProduct = printArray(productArray);
		}
		if (strCurrency != null && strCurrency!= ""){
			currencyArray = strCurrency.toString().trim().split(',');
			strCurrency = printArray(currencyArray);
		}		
		if (strStatus != null && strStatus!= ""){
			statusArray = strStatus.toString().trim().split(',');
			strStatus = printArray(statusArray);
		}	
		
		// verify data
		if (openDateFrom != "" && openDateTo != ""){
			if (openDateFrom > openDateTo){
				alert("open date range is wrong");
				return;
			}
		}
		if (maturityDateFrom != "" && maturityDateTo != ""){
			if (maturityDateFrom > maturityDateTo){
				alert("maturity date range is wrong");
				return;
			}
		}
		if (outstandingAmoutFrom != "" && outstandingAmoutTo != ""){
			if (/^\d+$/.test(outstandingAmoutFrom) && /^\d+$/.test(outstandingAmoutTo)){
				if (parseInt(outstandingAmoutFrom) > parseInt(outstandingAmoutTo)){
					alert("account balance range is wrong");
					return;
				}
			}
			else{
				alert("account balance to be filled in must be integer");
				return;
			}
		}	
		searchProDepositParameters = "{\"branch_array\":["+strBranch+"],\"account_type_array\":["+strProduct+"],\"currency_array\":["+strCurrency+"],\"account_status_array\":["+strStatus+"],\"dp_account_no\":\""+accountNo+"\",\"open_date\":\""+openDateFrom+"\",\"open_date_max\":\""+openDateTo+"\",\"maturity_date\":\""+maturityDateFrom+"\",\"maturity_date_max\":\""+maturityDateTo+"\",\"account_balance\":\""+outstandingAmoutFrom+"\",\"account_balance_max\":\""+outstandingAmoutTo+"\"}";
		proDepositDataTable.ajax.reload();		
		$('#project-pro_d').modal('toggle');
	}
	
	function searchDepositTran(){
		//url parameters
		var branchArray,tranTypeArray,currencyArray,drIndicatorArray;
		var depSerialNo = $('#depositTranSernoSelect').val();
		var tranDateFrom = $('#datepickerProT1').val();
		var tranDateTo = $('#datepickerProT2').val();
		var accountNo = $('#depositTranAccountNo').val();
		var tranAmountFrom = $('#depositTranAmtFrom').val();
		var tranAmountTo = $('#depositTranAmtTo').val();		
		var strBranch = $('#depositTranBranchSelect').val();
		var strTranType = $('#depositTranTypeSelect').val();
		var strCurrency = $('#depositTranCcySelect').val();
		var strDrIndicator = $('#depositTranDrSelect').val();
		
		if (strBranch != null && strBranch!= ""){
			branchArray = strBranch.toString().trim().split(',');
			strBranch = printArray(branchArray);
		}
		if (strTranType != null && strTranType!= ""){
			tranTypeArray = strTranType.toString().trim().split(',');
			strTranType = printArray(tranTypeArray);
		}
		if (strCurrency != null && strCurrency!= ""){
			currencyArray = strCurrency.toString().trim().split(',');
			strCurrency = printArray(currencyArray);
		}		
		if (strDrIndicator != null && strDrIndicator!= ""){
			drIndicatorArray = strDrIndicator.toString().trim().split(',');
			strDrIndicator = printArray(drIndicatorArray);
		}	
		
		// verify data
		if (tranDateFrom != "" && tranDateTo != ""){
			if (tranDateFrom > tranDateTo){
				alert("transaction date range is wrong");
				return;
			}
		}
	
		if (tranAmountFrom != "" && tranAmountTo != ""){
			if (/^\d+$/.test(tranAmountFrom) && /^\d+$/.test(tranAmountTo)){
				if (parseInt(tranAmountFrom) > parseInt(tranAmountTo)){
					alert("transaction amout range is wrong");
					return;
				}
			}
			else{
				alert("transaction amout to be filled in must be integer");
				return;
			}
		}	
		
		searchDepositTranParameters = "{\"branch_array\":["+strBranch+"],\"transaction_type_array\":["+strTranType+"],\"currency_array\":["+strCurrency+"],\"dr_indicator_array\":["+strDrIndicator+"],\"account_no\":\""+accountNo+"\",\"transaction_date\":\""+tranDateFrom+"\",\"transaction_date_max\":\""+tranDateTo+"\",\"transaction_amount\":\""+tranAmountFrom+"\",\"transaction_amount_max\":\""+tranAmountTo+"\",\"dep_serial_no\":\""+depSerialNo+"\"}";
		depositTranDataTable.ajax.reload();		
		$('#project-pro_t').modal('toggle');
	}
	
	function searchProLoanResult(){	
		//url parameters
		var branch_array,principal_currency_array,balance_currency_array,loan_type_array,account_status_array;
		var ln_account_no = $('#pro_loanAccountNo').val();
		var line_no = $('#pro_loanLineNo').val();
		var principal_amount = $('#pro_loanPrincipalAmountFrom').val();
		var principal_amount_max = $('#pro_loanPrincipalAmountTo').val();
		var balance = $('#pro_loanBalanceFrom').val();
		var balance_max = $('#pro_loanBalanceTo').val();
		var value_date = $('#datepickerProL1').val();
		var value_date_max = $('#datepickerProL2').val();
		var maturity_date = $('#datepickerProL3').val();
		var maturity_date_max = $('#datepickerProL4').val();		
		var strBranch = $('#pro_loanBranchSelect').val();
		var strPrincipalCurrency = $('#pro_loanPrincipalCurrencySelect').val();
		var strBalanceCurrency = $('#pro_loanBalanceCurrencySelect').val();
		var strLoanType = $('#pro_loanTypeSelect').val();
		var strStatus = $('#pro_loanStatusSelect').val();
		
		if (strBranch != null && strBranch!= ""){
			branch_array = strBranch.toString().trim().split(',');
			strBranch = printArray(branch_array);
		}		
		if (strPrincipalCurrency != null && strPrincipalCurrency!= ""){
			principal_currency_array = strPrincipalCurrency.toString().trim().split(',');
			strPrincipalCurrency = printArray(principal_currency_array);
		}		
		if (strBalanceCurrency != null && strBalanceCurrency!= ""){
			balance_currency_array = strBalanceCurrency.toString().trim().split(',');
			strBalanceCurrency = printArray(balance_currency_array);
		}				
		if (strLoanType != null && strLoanType!= ""){
			loan_type_array = strLoanType.toString().trim().split(',');
			strLoanType = printArray(loan_type_array);
		}			
		if (strStatus != null && strStatus!= ""){
			account_status_array = strStatus.toString().trim().split(',');
			strStatus = printArray(account_status_array);
		}	
		
		// verify data
		if (value_date != "" && value_date_max != ""){
			if (value_date > value_date_max){
				alert("value date range is wrong");
				return;
			}
		}
		if (maturity_date != "" && maturity_date_max != ""){
			if (maturity_date > maturity_date_max){
				alert("maturity date range is wrong");
				return;
			}
		}
		if (principal_amount != "" && principal_amount_max != ""){
			if (/^\d+$/.test(principal_amount) && /^\d+$/.test(principal_amount_max)){
				if (parseInt(principal_amount) > parseInt(principal_amount_max)){
					alert("principal amount range is wrong");
					return;
				}
			}
			else{
				alert("principal amount to be filled in must be integer");
				return;
			}
		}
		if (balance != "" && balance_max != ""){
			if (/^\d+$/.test(balance) && /^\d+$/.test(balance_max)){
				if (parseInt(balance) > parseInt(balance_max)){
					alert("balance range is wrong");
					return;
				}
			}
			else{
				alert("balance to be filled in must be integer");
				return;
			}
		}
		searchProLoanParameters = "{\"branch_array\":["+strBranch+"],\"ln_account_no\":\""+ln_account_no+"\",\"loan_type_array\":["+strLoanType+"],\"line_no\":\""+line_no+"\",\"principal_currency_array\":["+strPrincipalCurrency+"],\"principal_amount\":\""+principal_amount+"\",\"principal_amount_max\":\""+principal_amount_max+"\",\"value_date\":\""+value_date+"\",\"value_date_max\":\""+value_date_max+"\",\"maturity_date\":\""+maturity_date+"\",\"maturity_date_max\":\""+maturity_date_max+"\",\"balance_currency_array\":["+strBalanceCurrency+"],\"balance\":\""+balance+"\",\"balance_max\":\""+balance_max+"\",\"account_status_array\":["+strStatus+"]}";
		proLoanDataTable.ajax.reload();
		$('#project-pro_l').modal('toggle');
	}

	function searchRepayment(){
		//url parameters
		var branchArray,currencyArray,overdueFlagArray;
		var openItemNo = $('#repaymentOpenItemNoSelect').val();
		var instalmentNo = $('#repaymentInstalmentNoSelect').val();
		var startDateFrom = $('#datepickerProR1').val();
		var startDateTo = $('#datepickerProR2').val();
		var dueDateFrom = $('#datepickerProR3').val();
		var dueDateTo = $('#datepickerProR4').val();
		var paidDateFrom = $('#datepickerProR5').val();
		var paidDateTo = $('#datepickerProR6').val();
		var instalmentAmountFrom = $('#repaymentInstalmentAmtFrom').val();
		var instalmentAmountTo = $('#repaymentInstalmentAmtTo').val();	
		var interestAmountFrom = $('#repaymentInterestAmtFrom').val();
		var interestAmountTo = $('#repaymentInterestAmtTo').val();	
		var strBranch = $('#repaymentBranchSelect').val();
		var strCurrency = $('#repaymentCcySelect').val();
		var strOverdueFlag = $('#repaymentOverdueFlagSelect').val();
		
		if (strBranch != null && strBranch!= ""){
			branchArray = strBranch.toString().trim().split(',');
			strBranch = printArray(branchArray);
		}
		if (strCurrency != null && strCurrency!= ""){
			currencyArray = strCurrency.toString().trim().split(',');
			strCurrency = printArray(currencyArray);
		}		
		if (strOverdueFlag != null && strOverdueFlag!= ""){
			overdueFlagArray = strOverdueFlag.toString().trim().split(',');
			strOverdueFlag = printArray(overdueFlagArray);
		}	
		
		// verify data
		if (startDateFrom != "" && startDateTo != ""){
			if (startDateFrom > startDateTo){
				alert("start date range is wrong");
				return;
			}
		}
		if (dueDateFrom != "" && dueDateTo != ""){
			if (dueDateFrom > dueDateTo){
				alert("due date range is wrong");
				return;
			}
		}
		if (paidDateFrom != "" && paidDateTo != ""){
			if (paidDateFrom > paidDateTo){
				alert("paid date range is wrong");
				return;
			}
		}
	
		if (instalmentAmountFrom != "" && instalmentAmountTo != ""){
			if (/^\d+$/.test(instalmentAmountFrom) && /^\d+$/.test(instalmentAmountTo)){
				if (parseInt(instalmentAmountFrom) > parseInt(instalmentAmountTo)){
					alert("instalment amout range is wrong");
					return;
				}
			}
			else{
				alert("instalment amout to be filled in must be integer");
				return;
			}
		}
		
		if (interestAmountFrom != "" && interestAmountTo != ""){
			if (/^\d+$/.test(interestAmountFrom) && /^\d+$/.test(interestAmountTo)){
				if (parseInt(interestAmountFrom) > parseInt(interestAmountTo)){
					alert("interest amout range is wrong");
					return;
				}
			}
			else{
				alert("interest amout to be filled in must be integer");
				return;
			}
		}		

		searchRepaymentParameters = "{\"branch_array\":["+strBranch+"],\"overdue_flag_array\":["+strOverdueFlag+"],\"currency_array\":["+strCurrency+"],\"open_item_num\":\""+openItemNo+"\",\"instalment_no\":\""+instalmentNo+"\",\"start_date\":\""+startDateFrom+"\",\"start_date_max\":\""+startDateTo+"\",\"due_date\":\""+dueDateFrom+"\",\"due_date_max\":\""+dueDateTo+"\",\"paid_date\":\""+paidDateFrom+"\",\"paid_date_max\":\""+paidDateTo+"\",\"instalment_amount\":\""+instalmentAmountFrom+"\",\"instalment_amount_max\":\""+instalmentAmountTo+"\",\"interest_amt\":\""+interestAmountFrom+"\",\"interst_amt_max\":\""+interestAmountTo+"\"}";
		repaymentDataTable.ajax.reload();		
		$('#project-pro_r').modal('toggle');
	}

	function searchCreditLineResult(){	
		//url parameters
		var currency_array,revolving_ind_array;
		var credit_line_no = $('#creditLineNo').val();
		var line_name = $('#creditLineName').val();
		var create_date = $('#datepickerCL1').val();
		var create_date_max = $('#datepickerCL2').val();
		var expire_date = $('#datepickerCL3').val();
		var expire_date_max = $('#datepickerCL4').val();	
		var limit = $('#creditLineLimitFrom').val();
		var limit_max = $('#creditLineLimitTo').val();
		var utilized_amount = $('#creditLineUtilizedAmountFrom').val();
		var utilized_amount_max = $('#creditLineUtilizedAmountTo').val();	
		var booking_amount = $('#creditLineBookingAmountFrom').val();
		var booking_amount_max = $('#creditLineBookingAmountTo').val();
		var available_amount = $('#creditLineAvailableAmountFrom').val();
		var available_amount_max = $('#creditLineAvailableAmountTo').val();		
		var strCurrency = $('#creditLineCurrencySelect').val();
		var strRevolvingInd = $('#creditLineRevolvingSelect').val();
		
		if (strCurrency != null && strCurrency!= ""){
			currency_array = strCurrency.toString().trim().split(',');
			strCurrency = printArray(currency_array);
		}		
		if (strRevolvingInd != null && strRevolvingInd!= ""){
			revolving_ind_array = strRevolvingInd.toString().trim().split(',');
			strRevolvingInd = printArray(revolving_ind_array);
		}		
		
		// verify data
		if (create_date != "" && create_date_max != ""){
			if (create_date > create_date_max){
				alert("create date range is wrong");
				return;
			}
		}
		if (expire_date != "" && expire_date_max != ""){
			if (expire_date > expire_date_max){
				alert("expire date range is wrong");
				return;
			}
		}
		if (limit != "" && limit_max != ""){
			if (/^\d+$/.test(limit) && /^\d+$/.test(limit_max)){
				if (parseInt(limit) > parseInt(limit_max)){
					alert("limit range is wrong");
					return;
				}
			}
			else{
				alert("limit to be filled in must be integer");
				return;
			}
		}
		if (utilized_amount != "" && utilized_amount_max != ""){
			if (/^\d+$/.test(utilized_amount) && /^\d+$/.test(utilized_amount_max)){
				if (parseInt(utilized_amount) > parseInt(utilized_amount_max)){
					alert("utilized amount range is wrong");
					return;
				}
			}
			else{
				alert("utilized amount to be filled in must be integer");
				return;
			}
		}
		if (booking_amount != "" && booking_amount_max != ""){
			if (/^\d+$/.test(booking_amount) && /^\d+$/.test(booking_amount_max)){
				if (parseInt(booking_amount) > parseInt(booking_amount_max)){
					alert("booking amount range is wrong");
					return;
				}
			}
			else{
				alert("booking amount to be filled in must be integer");
				return;
			}
		}
		if (available_amount != "" && available_amount_max != ""){
			if (/^\d+$/.test(available_amount) && /^\d+$/.test(available_amount_max)){
				if (parseInt(available_amount) > parseInt(available_amount_max)){
					alert("available amount range is wrong");
					return;
				}
			}
			else{
				alert("available amount to be filled in must be integer");
				return;
			}
		}
		searchCreditLineParameters = "{\"credit_line_no\":\""+credit_line_no+"\",\"line_name\":\""+line_name+"\",\"create_date\":\""+create_date+"\",\"create_date_max\":\""+create_date_max+"\",\"expire_date\":\""+expire_date+"\",\"expire_date_max\":\""+expire_date_max+"\",\"currency_array\":["+strCurrency+"],\"limit\":\""+limit+"\",\"limit_max\":\""+limit_max+"\",\"utilized_amount\":\""+utilized_amount+"\",\"utilized_amount_max\":\""+utilized_amount_max+"\",\"booking_amount\":\""+booking_amount+"\",\"booking_amount_max\":\""+booking_amount_max+"\",\"available_amount\":\""+available_amount+"\",\"available_amount_max\":\""+available_amount_max+"\",\"revolving_ind_array\":["+strRevolvingInd+"]}";
		creditLineDataTable.ajax.reload();
		$('#project-cl').modal('toggle');
	}
	
	function searchCollateralsResult(){		
		//url parameters
		var collateral_type_array,val_currency_array;
		var collateral_no = $('#collateralNo').val();
		var item_description = $('#collateralItemDescription').val();
		var valuation_date = $('#datepickerC1').val();
		var valuation_date_max = $('#datepickerC2').val();	
		var valuation = $('#collateralValuationFrom').val();
		var valuation_max = $('#collateralValuationTo').val();
		var line_no = $('#collateralLineNo').val();
		var strCollateralType = $('#collateralTypeSelect').val();
		var strValCurrency = $('#collateralCurrencySelect').val();
		
		if (strCollateralType != null && strCollateralType!= ""){
			collateral_type_array = strCollateralType.toString().trim().split(',');
			strCollateralType = printArray(collateral_type_array);
		}		
		if (strValCurrency != null && strValCurrency!= ""){
			strValCurrency = strValCurrency.toString().trim().split(',');
			strValCurrency = printArray(strValCurrency);
		}		
		
		// verify data
		if (valuation_date != "" && valuation_date_max != ""){
			if (valuation_date > valuation_date_max){
				alert("valuation date range is wrong");
				return;
			}
		}
		if (valuation != "" && valuation_max != ""){
			if (/^\d+$/.test(valuation) && /^\d+$/.test(valuation_max)){
				if (parseInt(valuation) > parseInt(valuation_max)){
					alert("valuation range is wrong");
					return;
				}
			}
			else{
				alert("valuation to be filled in must be integer");
				return;
			}
		}
		searchCollateralsParameters = "{\"collateral_no\":\""+collateral_no+"\",\"item_description\":\""+item_description+"\",\"valuation_date\":\""+valuation_date+"\",\"valuation_date_max\":\""+valuation_date_max+"\",\"valuation\":\""+valuation+"\",\"valuation_max\":\""+valuation_max+"\",\"collateral_type_array\":["+strCollateralType+"],\"val_currency_array\":["+strValCurrency+"],\"line_no\":\""+line_no+"\",\"auto\":\"false\"}";
		collateralsDataTable.ajax.reload();
		$('#project-c').modal('toggle');
	}	

	function callMemoDateGo(){
		var goDate = $('#dateMask').val();
		var goDateArray,year,month,day,date="null";
		if (goDate != "" && goDate != null){
			goDateArray = goDate.toString().split('/');
			year = goDateArray[0];
			month = goDateArray[1];
			day = goDateArray[2];
			if (/^\d+$/.test(year)){
				if (/^\d+$/.test(month)){
					if (/^\d+$/.test(day)){
						date = year+"/"+month+"/"+day;
						$("#calendar").fullCalendar( 'gotoDate', date )
					}
					else {
						date = year+"/"+month+"/01";
						$("#calendar").fullCalendar( 'gotoDate', date )
					}
				}
				else {
					date = year+"/01/01";
					$("#calendar").fullCalendar( 'gotoDate', date )
				}
			}
            if (selectDate != ""){
                for (var i=0;i<$('div .fc-day').length;++i){
                    if ($('div .fc-day').eq(i).attr("data-date") == selectDate){
                        $('div .fc-day').eq(i).addClass("memoSelect");
                        break;
                    }
                }
            }
		}
	}
	
	$(document).keyup(function(e){ 
		if(true == $("#dateMask").is(":focus")){  
			if (e.keyCode == "13"){
				callMemoDateGo();
			}
		}
	})
//for button click------------------------------------------------------------------------------------------------------------


//init------------------------------------------------------------------------------------------------------------------------
var userid = $("#useridHidden").html();
var ifKPI;
var firstTab;

var portfolioArray = new Array();
var ifInitPortfolio = false;

var customerProfileArray = new Array();
var ifInitCustomerProfile = false;

var productArray = new Array();
var ifInitProduct = false;
var ifNeedRemoveLinkD = false;
var ifNeedRemoveLinkL = false;

var creditFacilityArray = new Array();
var ifInitCreditFacility = false;
var ifNeedRemoveLinkC = false;

var pricingArray = new Array();
var ifInitPricing = false;

var callMemoArray;
var ifInitCallMemo = false;

function loadPortfolioTab(array){
	if (!ifInitPortfolio){
		for (var i = 0; i < array.length; ++i){
			switch (array[i])
			{
				case "DOAP":
					$("#Portfolio-DOAP").show();
					$("#Navigation-Portfolio-DOAP").show();
					initPortfolioPieChart();
					break;
				case "LOAB":
					$("#Portfolio-LOAB").show();
					$("#Navigation-Portfolio-LOAB").show();
					initPortfolioBarChart();
					break;
				case "DAIT":
					$("#Portfolio-DAIT").show();
					$("#Navigation-Portfolio-DAIT").show();
					initDepositTable();	
					initDepositSearchTable();
					break;
				case "LIT":
					$("#Portfolio-LIT").show();
					$("#Navigation-Portfolio-LIT").show();
					initLoanTable();	
					initLoanSearchTable();
					break;
				default:
					break;
			}
		}
		
		if (ifKPI)
			$("#Portfolio-KPI").show();	
			
		ifInitPortfolio = true;
	}
}

function loadCustomerProfileTab(array){
	if (!ifInitCustomerProfile){
		var ifPersonal = "Y";
		$.ajax({  
			type : "GET",  
			async : false,
			url : "/CustomerInfoMain/getPersonalFlagByCustCode", 
			data : {customer_code:custcod},
			success : function(result) { 
				ifPersonal = result;
			},  
			error : function(errorMsg) {  
				alert("get personal flag response failed!");  		
			}  
		}); 
		for (var i = 0; i < array.length; ++i){
			switch (array[i])
			{
				case "BID":
					$("#CustomerProfile-BID").show();
					$("#Navigation-CustomerProfile-BID").show();
					initBasicInformationDisplay();
					break;
				case "RRD":
					$("#CustomerProfile-RRD").show();
					$("#Navigation-CustomerProfile-RRD").show();
					initRiskRatingDisplay();
					break;
				case "CID":
					if (ifPersonal == "N"){
						$("#CustomerProfile-CID").show();
						$("#Navigation-CustomerProfile-CID").show();
						initCompanyInformationDisplay();
					}
					break;
				case "CRD":
					if (ifPersonal == "N"){
						$("#CustomerProfile-CRD").show();
						$("#Navigation-CustomerProfile-CRD").show();
						initCompanyRegistrationDisplay();
					}
					break;
				case "CGTM":
					if (ifPersonal == "N"){
						$("#CustomerProfile-CGTM").show();
						$("#Navigation-CustomerProfile-CGTM").show();
						initCustomerGroupTreeMap();	
					}
					break;
				case "RPT":
					$("#CustomerProfile-RPT").show();
					$("#Navigation-CustomerProfile-RPT").show();
					initRelatedPartiesTable();
					break;
				case "BCT":
					$("#CustomerProfile-BCT").show();
					$("#Navigation-CustomerProfile-BCT").show();
					initBackgroundCheckTable();	
					break;
				default:
					break;
			}
		}
		
		if (ifKPI)
			$("#CustomerProfile-KPI").show();	

		ifInitCustomerProfile = true;			
	}
}

function loadProductTab(array){
	if (!ifInitProduct){
		var ifABTExist = false;
		var ifTDTExist = false;
		var ifLIT2Exist = false;
		var ifRTExist = false;
		for (var i = 0; i < array.length; ++i){
			switch (array[i])
			{
				case "LB":
					$("#Product-LB").show();
					$("#Navigation-Product-LB").show();
					initLiquidity();
					break;
				case "ABT":
					$("#Product-ABT").show();
					$("#Navigation-Product-ABT").show();
					initProDepositTable();
					initProDepositSearchTable();
					ifABTExist = true;
					break;
				case "DTL":
					$("#Product-DTL").show();
					$("#Navigation-Product-DTL").show();
					initLineChart();
					break;
				case "TDT":
					$("#Product-TDT").show();
					$("#Navigation-Product-TDT").show();
					initDepositTranTable();
					initDepositTranSearchTable();
					ifTDTExist = true;
					break;
				case "LIT2":
					$("#Product-LIT2").show();
					$("#Navigation-Product-LIT2").show();
					initProLoanTable();
					initProLoanSearchTable();
					ifLIT2Exist = true;
					break;
				case "ROKPI":
					$("#Product-ROKPI").show();
					$("#Navigation-Product-ROKPI").show();
					initOverdueKPI();
					break;
				case "RDP":
					$("#Product-RDP").show();
					$("#Navigation-Product-RDP").show();
					initDeliquency();
					break;
				case "RT":
					$("#Product-RT").show();
					$("#Navigation-Product-RT").show();
					initRepaymentTable();
					initRepaymentSearchTable();
					ifRTExist = true;
					break;
				default:
					break;
			}
		}
		
		if (ifABTExist && !ifTDTExist)
			ifNeedRemoveLinkD = true;
			
		if (ifLIT2Exist && !ifRTExist)
			ifNeedRemoveLinkL = true;
		
		if (ifKPI)
			$("#Product-KPI").show();	

		ifInitProduct = true;
	}
}

function loadCreditFacilityTab(array){
	if (!ifInitCreditFacility){
		var ifCLTExist = false;
		var ifCTExist = false;
		for (var i = 0; i < array.length; ++i){
			switch (array[i])
			{
				case "CLSTM":
					$("#CreditFacility-CLSTM").show();
					$("#Navigation-CreditFacility-CLSTM").show();
					initCreditLineTreeMap();
					break;
				case "CLT":
					$("#CreditFacility-CLT").show();
					$("#Navigation-CreditFacility-CLT").show();
					initCreditLineTable();	
					initCreditLineSearchTable();
					ifCLTExist = true;
					break;
				case "CT":
					$("#CreditFacility-CT").show();
					$("#Navigation-CreditFacility-CT").show();
					initCollateralsTable();
					initCollateralsSearchTable();
					ifCTExist = true;
					break;
				default:
					break;
			}
		}
		
		if (ifCLTExist && !ifCTExist)
			ifNeedRemoveLinkC = true;
		
		if (ifKPI)
			$("#CreditFacility-KPI").show();	
			
		ifInitCreditFacility = true;
	}
}

function loadPricingTab(array){
	if (!ifInitPricing){
		for (var i = 0; i < array.length; ++i){
			switch (array[i])
			{
				case "PIRT":
					$("#Pricing-PIRT").show();
					$("#Navigation-Pricing-PIRT").show();
					initpreferentialInterestRateTable();
					break;
				case "PFRT":
					$("#Pricing-PFRT").show();
					$("#Navigation-Pricing-PFRT").show();
					initpreferentialFXRateTableTable();
					break;
				case "PFT":
					$("#Pricing-PFT").show();
					$("#Navigation-Pricing-PFT").show();
					initpreferentialFeesTable();
					break;
				case "SIT":
					$("#Pricing-SIT").show();
					$("#Navigation-Pricing-SIT").show();
					initStandingInstructionTable();
					break;
				case "PIT":
					$("#Pricing-PIT").show();
					$("#Navigation-Pricing-PIT").show();
					initProductInstructionTable();
					break;
				default:
					break;
			}
		}
		
		if (ifKPI)
			$("#Pricing-KPI").show();	
			
		ifInitPricing = true;
	}
}

function loadCallMemoTab(){
	if (!ifInitCallMemo){
		$("#CallMemo-list").show();
		$("#Navigation-CallMemo-list").show();
		$("#CallMemo-calendar").show();
		$("#Navigation-CallMemo-calendar").show();
		
		initCallMemoList();
		
		$('#calendar').fullCalendar({
			selectable: true,
			header: {
				left: 'prevYear,prev',
				center: 'title',
				right: 'next,nextYear'
			},
			contentHeight: 380,
			events: eventDateArray,
			dayClick: function(date, allDay, jsEvent, view) {			
				var date_array = date.toString().split(' ');
				var strCallMemoList = "";
				var clickDate,dateIndex,content;
				var month = date_array[1];
				switch(month)
				{
					case "Jan":
						clickDate = date_array[3]+"-01-"+date_array[2];
						break;
					case "Feb":
						clickDate = date_array[3]+"-02-"+date_array[2];
						break;
					case "Mar":
						clickDate = date_array[3]+"-03-"+date_array[2];
						break;
					case "Apr":
						clickDate = date_array[3]+"-04-"+date_array[2];
						break;
					case "May":
						clickDate = date_array[3]+"-05-"+date_array[2];
						break;		
					case "Jun":
						clickDate = date_array[3]+"-06-"+date_array[2];
						break;
					case "Jul":
						clickDate = date_array[3]+"-07-"+date_array[2];
						break;	
					case "Aug":
						clickDate = date_array[3]+"-08-"+date_array[2];
						break;	
					case "Sep":
						clickDate = date_array[3]+"-09-"+date_array[2];
						break;	
					case "Oct":
						clickDate = date_array[3]+"-10-"+date_array[2];
						break;	
					case "Nov":
						clickDate = date_array[3]+"-11-"+date_array[2];
						break;	
					case "Dec":
						clickDate = date_array[3]+"-12-"+date_array[2];
						break;	
					default:
						break;
				}
				dateIndex = dateArray.indexOf(clickDate);
				if (dateIndex >= 0){
					if (!this.hasClass("memoSelect")){
						for (var i=0;i<$('div .fc-day').length;++i){
							$('div .fc-day').eq(i).removeClass("memoSelect");
						}
						
						jQuery(this).addClass("memoSelect");
						content = callMemoResult[dateIndex].memo_entityList;
						strCallMemoList += "<li class='time-label'><span class='bg-blue'>"+callMemoResult[dateIndex].calldte+"</span></li>";
						for (var aData in content){
							strCallMemoList += "<li><i class='fa fa-user bg-aqua'></i><div class='timeline-item'><h2 class='timeline-header'>Called by :"+content[aData].callcus+"</h2><div class='timeline-body'><h5>Purpose : "+content[aData].purpose+"</h5><h5>Summary :"+content[aData].summay1+"</h5><h5>Action Plan :"+content[aData].action1+"</h5></div></div></li>";
						}
						selectDate = clickDate;
					}
					else{
						jQuery(this).removeClass("memoSelect");
						for (var aData in callMemoResult){
							content = callMemoResult[aData].memo_entityList;
							strCallMemoList += "<li class='time-label'><span class='bg-blue'>"+callMemoResult[aData].calldte+"</span></li>";
							for (var aData2 in content){
								strCallMemoList += "<li><i class='fa fa-user bg-aqua'></i><div class='timeline-item'><h2 class='timeline-header'>Called by :"+content[aData2].callcus+"</h2><div class='timeline-body'><h5>Purpose : "+content[aData2].purpose+"</h5><h5>Summary :"+content[aData2].summay1+"</h5><h5>Action Plan :"+content[aData2].action1+"</h5></div></div></li>";
							}							
						}
						selectDate = "" ;
					}
					strCallMemoList += "<li><i class='fa fa-clock-o bg-gray'></i></li>";
					$("#callMemoList").html(strCallMemoList);
				}
			}
		});
		
		$("#calendar button.fc-button").on ( 'click', function () {
			if (selectDate != ""){
				for (var i=0;i<$('div .fc-day').length;++i){
					if ($('div .fc-day').eq(i).attr("data-date") == selectDate){
						$('div .fc-day').eq(i).addClass("memoSelect");
						break;
					}
				}
			}
		});
		
		if (ifKPI)
			$("#CallMemo-KPI").show();	
			
		ifInitCallMemo = true;
	}
}


$.ajax({  
	type : "GET",  
	url : "/users/functions/"+userid,
	dataType : "json",
	success : function(result) {  
		if (result) {  
			var functionid,tab;
			for (var aData in result){	
				functionid = result[aData].functionid;
				tab = result[aData].tab;
				if (functionid == "KPI"){
					initPrimaryBox();
					ifKPI = true;
				}
				else {
					switch (tab)
					{
						case "Portfolio":
							portfolioArray.push(functionid);
							break;
						case "Customer Profile":
							customerProfileArray.push(functionid);
							break;
						case "Product":
							productArray.push(functionid);
							break;
						case "Credit Facility":
							creditFacilityArray.push(functionid);
							break;
						case "Pricing":
							pricingArray.push(functionid);
							break;
						case "Call Memo":
							callMemoArray = true;
							break;
						default:
							break;
					}
				}
			}
			
			if (callMemoArray){
				firstTab = "CallMemo";
				$("#CallMemo-li").show();
			}
			if (pricingArray.length > 0){
				firstTab = "Pricing";
				$("#Pricing-li").show();
			}
			if (creditFacilityArray.length > 0){
				firstTab = "CreditFacility";
				$("#CreditFacility-li").show();
			}
			if (productArray.length > 0){
				firstTab = "Product";
				$("#Product-li").show();
			}
			if (customerProfileArray.length > 0){
				firstTab = "CustomerProfile";
				$("#CustomerProfile-li").show();
			}			
			if (portfolioArray.length > 0){
				firstTab = "Portfolio";
				$("#Portfolio-li").show();
			}
			
			switch (firstTab)
			{
				case "Portfolio":
					$("#Portfolio").addClass("active");
					$("#Portfolio-li").addClass("active");
					loadPortfolioTab(portfolioArray);
					$("#Portfolio").show();
					ifInitPortfolio = true;
					break;
				case "CustomerProfile":
					$("#CustomerProfile").addClass("active");
					$("#CustomerProfile-li").addClass("active");
					loadCustomerProfileTab(customerProfileArray);
					$("#CustomerProfile").show();
					ifInitCustomerProfile = true;
					break;
				case "Product":
					$("#Product").addClass("active");
					$("#Product-li").addClass("active");
					loadProductTab(productArray);
					$("#Product").show();
					ifInitProduct = true;
					break;
				case "CreditFacility":
					$("#CreditFacility").addClass("active");
					$("#CreditFacility-li").addClass("active");
					loadCreditFacilityTab(creditFacilityArray);
					$("#CreditFacility").show();
					ifInitCreditFacility = true;
					break;
				case "Pricing":
					$("#Pricing").addClass("active");
					$("#Pricing-li").addClass("active");
					loadPricingTab(pricingArray);
					$("#Pricing").show();
					ifInitPricing = true;
					break;
				case "CallMemo":
					$("#CallMemo").addClass("active");
					$("#CallMemo-li").addClass("active");
					loadCallMemoTab();
					$("#CallMemo").show();
					ifInitCallMemo = true;
					break;
				default:
					break;
			}
		}  
	},  
	error : function(errorMsg) {  
		alert("connect failed!"); 			
	}  
});  

$('.nav-tabs.pull-left li').on('click', function(){
	$(this).addClass('active').siblings().removeClass('active');
	var _id = $(this).attr('data-id');
	$("#"+_id).show();
	$("#"+_id).siblings().hide();
	$("#"+_id).addClass('active').siblings().removeClass('active');
	
	switch(_id){
		case "Portfolio":
			loadPortfolioTab(portfolioArray);
			break;
		case "CustomerProfile":
			loadCustomerProfileTab(customerProfileArray);
			break;
		case "Product":
			loadProductTab(productArray);
			break;
		case "CreditFacility":
			loadCreditFacilityTab(creditFacilityArray);
			break;
		case "Pricing":
			loadPricingTab(pricingArray);
			break;
		case "CallMemo":
			loadCallMemoTab();
			break;
		default:
			break;
	}
});

//init------------------------------------------------------------------------------------------------------------------------
</script>
</body>
</html>
